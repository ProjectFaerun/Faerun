decisions = {

	recruit_deneir_scribe = {
		ai = no

		potential = {
			not_casting = yes
			trait = patron_deneir
		}
		allow = {
			piety = 40
			scaled_wealth = 0.25
			is_inaccessible_or_incapable_trigger = no
			NOT = { trait = infirm }
		}
		effect = {
			piety = -40
			scaled_wealth = -0.25
			hidden_tooltip = {
				spawn_good_deneir_scribe_effect = yes
			}
			character_event = { id = frmaint.54 }
		}
		ai_will_do = {
			factor = 0
		}
	}

	beshabas_boon = {
		only_playable = yes
		ai_check_interval = 24
		
		potential = {
			trait = patron_beshaba
			is_incapable = no
		}
		allow = {
			NOR = {
				has_character_modifier = beshaba_diplomacy
				has_character_modifier = beshaba_martial
				has_character_modifier = beshaba_stewardship
				has_character_modifier = beshaba_intrigue
				has_character_modifier = beshaba_learning
				has_character_modifier = beshaba_combat
				has_character_modifier = beshaba_health
			}
			piety = 70
			custom_tooltip = {
				text = beshaba_boon_cd
				OR = {
					NOT = { has_character_flag = beshaba_boon_cd }
					had_character_flag = {
						flag = beshaba_boon_cd
						years = 1
					}
				}
			}
		}
		effect = {
			piety = -70
			clr_character_flag = beshaba_boon_cd
			set_character_flag = beshaba_boon_cd
			random_list = {
				1 = {
					add_character_modifier = {
						name = beshaba_diplomacy
						months = 6
					}
				}
				1 = {
					add_character_modifier = {
						name = beshaba_martial
						months = 6
					}
				}
				1 = {
					add_character_modifier = {
						name = beshaba_stewardship
						months = 6
					}
				}
				1 = {
					add_character_modifier = {
						name = beshaba_intrigue
						months = 6
					}
				}
				1 = {
					add_character_modifier = {
						name = beshaba_learning
						months = 6
					}
				}
				1 = {
					add_character_modifier = {
						name = beshaba_combat
						months = 6
					}
				}
				1 = {
					add_character_modifier = {
						name = beshaba_health
						months = 6
					}
				}
			}
		}
		ai_will_do = {
			factor = 0.4
		}
	}

	undeath_after_death = {
		only_playable = yes
		ai_check_interval = 60
		potential = {
			trait = patron_bane
			is_undead = no
			evilcat_is_chosen = no
			is_dragon = no
			undead_incompatible_race = no
			NOR = {
				trait = immortal
				trait = natural_lycanthrope
				trait = afflicted_lycanthrope
			}
			is_adult = yes
		}
		allow = {
			piety = 700
			is_pregnant = no
			is_incapable = no
		}
		effect = {
			piety = -700
			if = {
				limit = {
					trait = infirm
				}
				remove_trait = infirm
			}
			character_event = { id = conv.26 }
		}
		ai_will_do = {
			factor = 0.05
			modifier = {
				factor = 0.01
				trait = depressed
			}
			modifier = {
				factor = 10
				trait = infirm
			}
			modifier = {
				factor = 2
				trait = lunatic
			}
			modifier = {
				factor = 0.5
				health >= 7
			}
			modifier = {
				factor = 2
				health <= 3
			}
			modifier = {
				factor = 0.3
				faerun_immortal_race_trigger = yes
			}
		}
	}

	hold_magic_symposium = {
		only_playable = yes

		ai_check_interval = 132
		
		potential = {
			trait = patron_azuth
			not_casting = yes
		}
		allow = {
			custom_tooltip = {
				text = held_symposium_cd
				OR = {
					NOT = { has_character_flag = held_symposium_timer }
					had_character_flag = {
						flag = held_symposium_timer
						years = 10
					}
				}
			}
			piety = 100
		}
		effect = {
			piety = -100
			any_courtier = {
				limit = {
					prisoner = no
					is_incapable = no
				}
				arcane_class_gain_xp = yes
			}
			arcane_class_gain_xp = yes
			clr_character_flag = held_symposium_timer
			set_character_flag = held_symposium_timer
			character_event = { id = conv.25 }
		}
		ai_will_do = {
			factor = 0.3
		}
	}
	
	recruit_amaunatori_judge = {
		ai = no

		potential = {
			not_casting = yes
			trait = patron_amaunator
		}
		allow = {
			piety = 40
			scaled_wealth = 0.25
			NOT = { trait = infirm }
			is_inaccessible_or_incapable_trigger = no
		}
		effect = {
			piety = -40
			scaled_wealth = -0.25
			hidden_tooltip = {
				spawn_good_amaunatori_judge_effect = yes
			}
			character_event = { id = frmaint.54 }
		}
		ai_will_do = {
			factor = 0
		}
	}
	
	challenge_the_caliph = {
		ai_check_interval = 240
		only_playable = yes
		
		potential = {
			controls_religion = yes
			k_grand_caliphate = {
				has_holder = yes
				holder_scope = {
					is_alive = yes
				}
			}
			NOR = {
				has_character_flag = has_challenged_caliph
			}
			OR = {
				ai = no
				AND = {
					ai = yes
					OR = {
						trait = ambitious
						k_grand_caliphate = {
							holder_scope = {
								OR = {
									AND = {
										NOT = { opinion = 0 }
										independent = no
									}
									NOT = { opinion = -75 }
								}
							}
						}
					}
				}
			}
			is_landed = yes
			is_inaccessible_or_incapable_trigger = no
			OR = {
				AND = {
					independent = yes
					capital_scope = {
						region = zakhara_region
					}
				}
				liege = {
					has_landed_title = k_grand_caliphate
				}
			}
			k_grand_caliphate = {
				holder_scope = {
					NOR = {
						is_friend = ROOT
						is_lover = ROOT
						is_married = ROOT
					}
				}
			}
			NOT = { has_landed_title = k_grand_caliphate }
			any_demesne_title = {
				OR = {
					title = d_muhjari
					title = d_myriadic
					title = d_qisma
					title = d_pantheist
				}
			}
		}
		allow = {
			NOT = { trait = content }
		}
		effect = {
			set_character_flag = has_challenged_caliph
			save_event_target_as = caliph_challenger
			hidden_tooltip = {
				set_variable = { which = challenger_score value = 0 }
			}
			k_grand_caliphate = {
				holder_scope = {
					save_event_target_as = current_caliph
					hidden_tooltip = {
						set_variable = { which = global_caliph_score value = 0 } # has to be global
					}
					character_event = { id = frzakh.2 }
				}
			}
			character_event = { id = frzakh.1 }
		}
		ai_will_do = {
			factor = 0.05 # 5% chance
			modifier = {
				factor = 5
				trait = ambitious
			}
			modifier = {
				factor = 10
				event_target:current_caliph = { independent = no }
			}
		}
	}
	
	create_grand_caliphate = {
		ai_check_interval = 240
		only_independent = yes

		potential = {
			k_grand_caliphate = {
				has_holder = no
			}
			any_demesne_title = {
				OR = {
					title = d_muhjari
					title = d_myriadic
					title = d_qisma
					title = d_pantheist
				}
			}
		}
		
		allow = {
			has_landed_title = c_huzuz
			has_global_flag = found_loregiver_lore # future-proofing
			prestige = 500
			piety = 500
			is_inaccessible_or_incapable_trigger = no
			independent = yes
		}
		
		effect = {
			prestige = -500
			piety = -500
			save_event_target_as = new_grand_caliph
			grant_title = k_grand_caliphate
			trigger_switch = {
				on_trigger = religion
				qisma = { # this is a trigger, like an if
					qisma = { # this is a scope
						set_religion_head = k_grand_caliphate
						destroy_landed_title = d_qisma
					}
				}
				ten_thousand_gods = {
					ten_thousand_gods = {
						set_religion_head = k_grand_caliphate
						destroy_landed_title = d_myriadic
					}
				}
				pantheist_league = {
					pantheist_league = {
						set_religion_head = k_grand_caliphate
						destroy_landed_title = d_pantheist
					}
				}
				muhjari = {
					muhjari = {
						set_religion_head = k_grand_caliphate
						destroy_landed_title = d_muhjari
					}
				}
			}
			narrative_event = { id = frzakh.11 }
		}
	}

	kaitotem = {
		ai = no

		potential = {
			not_casting = yes
			OR = {
				religion = ulutiuan
				religion = ulutiuan_reformed
			}
			is_adult = yes
			is_inaccessible_or_incapable_trigger = no
		}

		allow = {
			custom_tooltip = {
				text = TWENTYYEARCD
				OR = {
					NOT = { has_character_flag = kaitotem_cd }
					had_character_flag = {
						flag = kaitotem_cd
						years = 20
					}
				}
			}
		}

		effect = {
			clr_character_flag = kaitotem_cd
			set_character_flag = kaitotem_cd
			character_event = { id = generalmisc.42 }
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 1.5
				trait = kind
			}
			modifier = {
				factor = 0.1
				trait = cynical
			}
			modifier = {
				factor = 0.1
				trait = cruel
			}
		}
	}

	prepare_for_iurit = {
		ai_check_interval = 72
		only_playable = yes

		potential = {
			OR = {
				religion = ulutiuan
				religion = ulutiuan_reformed
			}
			is_adult = yes
			is_inaccessible_or_incapable_trigger = no
			not_casting = yes
		}

		allow = {
			custom_tooltip = {
				text = FIVEYEARCD
				OR = {
					NOT = { has_character_flag = iurit_cd }
					had_character_flag = {
						flag = iurit_cd
						years = 5
					}
				}
			}
			OR = {
				month >= 11
				month < 2
			}
		}

		effect = {
			clr_character_flag = iurit_cd
			set_character_flag = iurit_cd
			add_trait = on_pilgrimage
			if = {
				limit = {
					month == 11
				}
				character_event = { id = generalmisc.37 }
				character_event = { id = generalmisc.38 days = 15 }
				character_event = { id = generalmisc.39 days = 45 }
				character_event = { id = generalmisc.40 days = 75 }
				character_event = { id = generalmisc.41 days = 105 }
			}
			else_if = {
				limit = {
					month == 12
				}
				character_event = { id = generalmisc.37 }
				character_event = { id = generalmisc.39 days = 15 }
				character_event = { id = generalmisc.40 days = 45 }
				character_event = { id = generalmisc.41 days = 75 }
			}
			else_if = {
				limit = {
					month == 1
				}
				character_event = { id = generalmisc.37 }
				character_event = { id = generalmisc.40 days = 15 }
				character_event = { id = generalmisc.41 days = 45 }
			}
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.1
				trait = cynical
			}
		}
	}

	ulutiu_offering_to_spirit_beast = {
		ai_check_interval = 72
		only_playable = yes

		potential = {
			OR = {
				religion = ulutiuan
				religion = ulutiuan_reformed
			}
			is_adult = yes
			is_inaccessible_or_incapable_trigger = no
			not_casting = yes
		}

		allow = {
			custom_tooltip = {
				text = FIVEYEARCD
				OR = {
					NOT = { has_character_flag = ulutiu_spirit_beast }
					had_character_flag = {
						flag = ulutiu_spirit_beast
						years = 5
					}
				}
			}
			NOR = {
				has_character_modifier = ulutiu_seal
				has_character_modifier = ulutiu_walrus
				has_character_modifier = ulutiu_bear
				has_character_modifier = ulutiu_reindeer
			}
			scaled_wealth = { value = 0.05 min = 10 max = 100 }
		}

		effect = {
			clr_character_flag = ulutiu_spirit_beast
			set_character_flag = ulutiu_spirit_beast
			scaled_wealth = { value = -0.05 min = -10 max = -100 }
			character_event = { id = generalmisc.34 }
		}

		ai_will_do = {
			factor = 0.4
		}
	}

	ulutiu_winter_soldier = {
		ai_check_interval = 120
		only_playable = yes

		potential = {
			OR = {
				religion = ulutiuan
				religion = ulutiuan_reformed
				has_character_modifier = syncretic_ulutiuan
			}
			can_have_more_leadership_traits = yes
			NOT = { trait = winter_soldier }
			is_adult = yes
			is_inaccessible_or_incapable_trigger = no
			NOT = { has_character_flag = religious_winter_soldier }
			not_casting = yes
		}

		allow = {
			wealth = 20
			piety = 35
			NOT = { trait = infirm }
		}

		effect = {
			wealth = -20
			piety = -35
			character_event = { id = generalmisc.50 days = 3  }
			set_character_flag = religious_winter_soldier
		}

		ai_will_do = {
			factor = 0.1
			modifier = {
				factor = 2
				martial = 6
			}
			modifier = {
				factor = 2
				OR = {
					z_fighter = yes
					z_paladin = yes
					z_barbarian = yes
					z_ranger = yes
				}
			}
			modifier = {
				factor = 0.2
				trait = craven
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
		}
	}

	enlightened_schools = {
		ai_check_interval = 120

		potential = {
			OR = {
				religion = muhjari
				religion = pantheist_league
				religion = ten_thousand_gods
				religion = qisma
			}
			NOR = {
				trait = moralist
				trait = ethoist
				trait = pragmatist_trait
			}
			is_adult = yes
			is_inaccessible_or_incapable_trigger = no
		}

		allow = {
			always = yes
		}

		effect = {
			character_event = { id = generalmisc.31 }
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = cynical
			}
		}

	}

	gender_alteration = {
		ai_check_interval = 5000
		only_playable = yes
		potential = {
			age = 16
			is_inaccessible_or_incapable_trigger = no
			OR = {
				religion = joyful
				has_character_modifier = syncretic_joyful
				religion = elven_pantheon
				has_character_modifier = syncretic_elf
				religion = yuir
				religion = yuir_reformed
				has_character_modifier = syncretic_yuir
				religion = asathalfinare
				has_character_modifier = syncretic_asathalfinare
				religion = eilistraee
				has_character_modifier = syncretic_eilistraee
				AND = {
					trait = patron_najm
					NOR = {
						religion = pantheist_league
						has_character_modifier = syncretic_pantheist
					}
				}
				trait = patron_leira
				trait = patron_mask
				trait = patron_grazzt
				trait = patron_sharess
			}
			NOT = { trait = creature_hag }
			OR = {
				ai = no
				AND = {
					is_married = no
					has_children = no
				}
			}
			is_pregnant = no
			not_casting = yes
		}
		allow = {
			custom_tooltip = {
				text = ONEYEARCD
				OR = {
					NOT = { has_character_flag = gender_change }
					AND = {
						had_character_flag = {
							flag = gender_change
							years = 1
						}
						ai = no
					}
					AND = {
						had_character_flag = {
							flag = gender_change
							years = 10
						}
						ai = yes
					}
				}
			}
			OR = {
				conditional_tooltip = {
					trigger = {
						OR = {
							trait = androgynous
							trait = half_celestial
							trait = creature_fiend
							trait = creature_genie
							trait = creature_construct
							trait = avatar
						}
						NOT = { trait = proud }
					}
					piety = 30
				}
				conditional_tooltip = {
					trigger = {
						OR = {
							trait = androgynous
							trait = half_celestial
							trait = creature_fiend
							trait = creature_genie
							trait = creature_construct
							trait = avatar
						}
						trait = proud
					}
					piety = 70
				}
				conditional_tooltip = {
					trigger = {
						NOR = {
							trait = androgynous
							trait = half_celestial
							trait = creature_fiend
							trait = creature_genie
							trait = creature_construct
							trait = avatar
						}
						NOT = { trait = proud }
					}
					piety = 150
				}
				conditional_tooltip = {
					trigger = {
						NOR = {
							trait = androgynous
							trait = half_celestial
							trait = creature_fiend
							trait = creature_genie
							trait = creature_construct
							trait = avatar
						}
						trait = proud
					}
					piety = 250
				}
			}
		}

		effect = {
			clr_character_flag = gender_change
			set_character_flag = gender_change
			set_gender = opposite
			if = {
				limit = {
					OR = {
						trait = androgynous
						trait = half_celestial
						trait = creature_fiend
						trait = creature_genie
						trait = creature_construct
						trait = avatar
					}
					NOT = { trait = proud }
				}
				piety = -30
			}
			else_if = {
				limit = {
					OR = {
						trait = androgynous
						trait = half_celestial
						trait = creature_fiend
						trait = creature_genie
						trait = creature_construct
						trait = avatar
					}
					trait = proud
				}
				piety = -70
			}
			else_if = {
				limit = {
					NOR = {
						trait = androgynous
						trait = half_celestial
						trait = creature_fiend
						trait = creature_genie
						trait = creature_construct
						trait = avatar
					}
					NOT = { trait = proud }
				}
				piety = -150
			}
			else = {
				piety = -250
			}
			if = {
				limit = {
					NOR = {
						trait = asexual
						trait = bisexual
					}
				}
				if = {
					limit = {
						NOT = { trait = homosexual }
					}
					add_trait = homosexual # sexuality doesn't change, but has to be re-labeled based on current gender
				}
				else = {
					remove_trait = homosexual
				}
			}
			if = {
				limit = { is_married = yes }
				any_spouse = {
					if = {
						limit = {
							NOR = {
								trait = bisexual
								trait = asexual
							}
						}
						if = {
							limit = {
								opinion = {
									who = ROOT
									value = 40
								}
							}
							remove_trait = homosexual
							add_trait = bisexual # finds they're bi, at least for the spouse
						}
						else = {
							remove_spouse = ROOT
							ROOT = {
								character_event = { id = generalmisc.29 }
							}
						}
					}
				}
				remove_special_character_title = yes
				if = {
					limit = {
						has_discardable_gendered_nickname = yes
					}
					give_nickname = nick_the_sildur
				}
				else_if = {
					limit = {
						has_nickname = nick_the_troubadour
						is_female = yes
					}
					give_nickname = nick_the_trobairitz
				}
				else_if = {
					limit = {
						OR = {
							has_nickname = nick_the_lion
							has_nickname = nick_the_lion_of_semphar
						}
						is_female = yes
					}
					give_nickname = nick_the_lioness
				}
				else_if = {
					limit = {
						has_nickname = nick_the_enchanter
						is_female = yes
					}
					give_nickname = nick_the_enchantress
				}
				else_if = {
					limit = {
						has_nickname = nick_the_war_king
						is_female = yes
					}
					give_nickname = nick_the_war_queen
				}
				else_if = {
					limit = {
						has_nickname = nick_the_red_gladiator
						is_female = yes
					}
					give_nickname = nick_the_red_gladiatrix
				}
				else_if = {
					limit = {
						has_nickname = nick_the_pirate_king
						is_female = yes
					}
					give_nickname = nick_the_pirate_queen
				}
				else_if = {
					limit = {
						has_nickname = nick_the_dark_prince
						is_female = yes
					}
					give_nickname = nick_the_dark_lady
				}
				else_if = {
					limit = {
						has_nickname = nick_king_under_the_mountain
						is_female = yes
					}
					give_nickname = nick_queen_under_the_mountain
				}
				else_if = {
					limit = {
						has_nickname = nick_the_king_of_thorns
						is_female = yes
					}
					give_nickname = nick_the_queen_of_thorns
				}
				else_if = {
					limit = {
						has_nickname = nick_the_pale_prince
						is_female = yes
					}
					give_nickname = nick_the_pale
				}
				else_if = {
					limit = {
						has_nickname = nick_the_black_baron
						is_female = yes
					}
					give_nickname = nick_the_black
				}
				else_if = {
					limit = {
						has_nickname = nick_the_grand_patriarch
						is_female = yes
					}
					give_nickname = nick_the_grand_matriarch
				}
				else_if = {
					limit = {
						has_nickname = nick_the_lord_of_murder
						is_female = yes
					}
					give_nickname = nick_the_lady_of_murder
				}
				else_if = {
					limit = {
						has_nickname = nick_the_radiant_king
						is_female = yes
					}
					give_nickname = nick_the_radiant
				}
				else_if = {
					limit = {
						has_nickname = nick_the_battle_master
						is_female = yes
					}
					give_nickname = nick_the_battle_mistress
				}
				else_if = {
					limit = {
						has_nickname = nick_the_beast_master
						is_female = yes
					}
					give_nickname = nick_the_beast_mistress
				}
				else_if = {
					limit = {
						has_nickname = nick_grandfather
						is_female = yes
					}
					give_nickname = nick_grandmother
				}
				else_if = {
					limit = {
						has_nickname = nick_the_coward_lord
						is_female = yes
					}
					give_nickname = nick_the_cowardly
				}
				else_if = {
					limit = {
						has_nickname = nick_the_pale_master
					}
					give_nickname = nick_the_pale_mistress
				}
				else_if = {
					limit = {
						has_nickname = nick_the_sea_king
					}
					give_nickname = nick_the_sea_queen
				}
				else_if = {
					limit = {
						has_nickname = nick_the_warrior_king
					}
					give_nickname = nick_the_warrior_queen
				}
				# female-specific starts here
				else_if = {
					limit = {
						has_nickname = nick_the_trobairitz
						is_female = no
					}
					give_nickname = nick_the_troubadour
				}
				else_if = {
					limit = {
						has_nickname = nick_the_lioness
						is_female = no
					}
					give_nickname = nick_the_lion
				}
				else_if = {
					limit = {
						has_nickname = nick_the_enchantress
						is_female = no
					}
					give_nickname = nick_the_enchanter
				}
				else_if = {
					limit = {
						has_nickname = nick_the_war_queen
						is_female = no
					}
					give_nickname = nick_the_war_king
				}
				else_if = {
					limit = {
						has_nickname = nick_the_dragoness
						is_female = no
					}
					give_nickname = nick_the_dragon
				}
				else_if = {
					limit = {
						has_nickname = nick_the_dragon_lady
						is_female = no
					}
					give_nickname = nick_the_dragon
				}
				else_if = {
					limit = {
						has_nickname = nick_the_dragon_queen
						is_female = no
					}
					give_nickname = nick_the_dragon
				}
				else_if = {
					limit = {
						has_nickname = nick_the_red_gladiatrix
						is_female = no
					}
					give_nickname = nick_the_red_gladiator
				}
				else_if = {
					limit = {
						has_nickname = nick_the_masked_lady
						is_female = no
					}
					give_nickname = nick_the_masked
				}
				else_if = {
					limit = {
						has_nickname = nick_the_pirate_queen
						is_female = no
					}
					give_nickname = nick_the_pirate_king
				}
				else_if = {
					limit = {
						has_nickname = nick_the_shining_lady
						is_female = no
					}
					give_nickname = nick_the_shining
				}
				else_if = {
					limit = {
						has_nickname = nick_she_wolf
						is_female = no
					}
					give_nickname = nick_the_wolf
				}
				else_if = {
					limit = {
						has_nickname = nick_the_she_wolf_of_manshaka
						is_female = no
					}
					give_nickname = nick_the_wolf
				}
				else_if = {
					limit = {
						has_nickname = nick_the_princess_terrible
						is_female = no
					}
					give_nickname = nick_the_terrible
				}
				else_if = {
					limit = {
						has_nickname = nick_lady_penitent
						is_female = no
					}
					give_nickname = nick_the_penitent
				}
				else_if = {
					limit = {
						has_nickname = nick_queen_under_the_mountain
						is_female = no
					}
					give_nickname = nick_king_under_the_mountain
				}
				else_if = {
					limit = {
						has_nickname = nick_the_queen_of_thorns
						is_female = no
					}
					give_nickname = nick_the_king_of_thorns
				}
				else_if = {
					limit = {
						has_nickname = nick_the_mithril_princess
						is_female = no
					}
					give_nickname = nick_the_iron_unbent
				}
				else_if = {
					limit = {
						has_nickname = nick_the_steel_princess
						is_female = no
					}
					give_nickname = nick_true_steel
				}
				else_if = {
					limit = {
						has_nickname = nick_the_black_widow
						is_female = no
					}
					give_nickname = nick_the_black
				}
				else_if = {
					limit = {
						has_nickname = nick_the_grim_mistress
						is_female = no
					}
					give_nickname = nick_the_grim
				}
				else_if = {
					limit = {
						has_nickname = nick_the_grand_matriarch
						is_female = no
					}
					give_nickname = nick_the_grand_patriarch
				}
				else_if = {
					limit = {
						has_nickname = nick_the_dark_sister
						is_female = no
					}
					give_nickname = nick_the_dark
				}
				else_if = {
					limit = {
						has_nickname = nick_the_lady_of_murder
						is_female = no
					}
					give_nickname = nick_the_lord_of_murder
				}
				else_if = {
					limit = {
						has_nickname = nick_the_battle_mistress
						is_female = no
					}
					give_nickname = nick_the_battle_master
				}
				else_if = {
					limit = {
						has_nickname = nick_the_beast_mistress
						is_female = no
					}
					give_nickname = nick_the_beast_master
				}
				else_if = {
					limit = {
						has_nickname = nick_grandmother
						is_female = no
					}
					give_nickname = nick_grandfather
				}
				else_if = {
					limit = {
						has_nickname = nick_the_proud_queen
						is_female = no
					}
					give_nickname = nick_the_proud
				}
				else_if = {
					limit = {
						has_nickname = nick_the_dark_lady
						is_female = no
					}
					give_nickname = nick_the_dark
				}
				else_if = {
					limit = {
						has_nickname = nick_the_pale_mistress
					}
					give_nickname = nick_the_pale_master
				}
				else_if = {
					limit = {
						has_nickname = nick_the_sea_queen
					}
					give_nickname = nick_the_sea_king
				}
				else_if = {
					limit = {
						has_nickname = nick_the_warrior_queen
					}
					give_nickname = nick_the_warrior_king
				}
			}
			if = {
				limit = { ai = no }

				prompt_name = {
					player = ROOT
					type = RENAME_CHARACTER_MESSAGE
				}
			}
		}

		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 0.01
				NOT = { trait = androgynous }
			}
			modifier = {
				factor = 1.2
				trait = creature_elf
			}
			modifier = {
				factor = 0.3
				trait = proud
			}
			modifier = {
				factor = 1.2
				trait = arbitrary
			}
		}
	}

	joyful_etiquette_lessons = {
		ai_check_interval = 72
		only_playable = yes
		potential = {
			religion = joyful
			is_adult = yes
			is_inaccessible_or_incapable_trigger = no
			not_casting = yes
		}
		allow = {
			custom_tooltip = {
				text = FIVEYEARCD
				OR = {
					NOT = { has_character_flag = joyful_etiquette }
					had_character_flag = {
						flag = joyful_etiquette
						years = 5
					}
				}
			}
			piety = 50
			scaled_wealth = { value = 0.02 min = 15 max = 200 }
		}
		effect = {
			clr_character_flag = joyful_etiquette
			set_character_flag = joyful_etiquette
			piety = -50
			scaled_wealth = { value = -0.02 min = -15 max = -200 }
			add_character_modifier = {
				name = joyful_etiquette_mod
				years = 3
			}
		}

		ai_will_do = {
			factor = 0.2
		}
	}
	joyful_improve_appearance = {
		ai_check_interval = 72

		potential = {
			OR = {
				religion = joyful
				has_character_modifier = syncretic_joyful
			}
			NOT = {
				trait = creature_hag
			}
			is_fair_non_congenital_trait_upgradeable_trigger = yes
			is_adult = yes
			is_inaccessible_or_incapable_trigger = no
			not_casting = yes
		}

		allow = {
			prestige = 30
			piety = 50
			custom_tooltip = {
				text = ONEYEARCD
				OR = {
					NOT = { has_character_flag = joyful_improve_app }
					had_character_flag = {
						flag = joyful_improve_app
						years = 1
					}
				}
			}
		}

		effect = {
			clr_character_flag = joyful_improve_app
			set_character_flag = joyful_improve_app
			prestige = -30
			piety = -50
			upgrade_fair_non_congenital_trait_effect = yes
		}

		ai_will_do = {
			factor = 0.2
		}
	}

	abyssal_bind_demon = { # Character
		only_playable = yes
		ai_check_interval = 48
		potential = {
			religion = abyssal_cult
			not_casting = yes
		}
		allow = {
			piety = 150
			custom_tooltip = {
				text = ABYSSBINDING
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = abyss_demon_binding }
						had_character_flag = {
							flag = abyss_demon_binding
							years = 5
						}
					}
				}
			}
			prisoner = no
			is_incapable = no
		}
		effect = {
			clr_character_flag = abyss_demon_binding
			set_character_flag = abyss_demon_binding
			create_character = {
				age = 666
				trait = creature_fiend
				random_traits = yes
				female = random
				religion = abyssal_cult
				culture = tanarri
				dynasty = none
				immortal_age = 30
			}
			new_character = {
				spawn_random_tanarri = yes
			}
			character_event = { id = generalmisc.52 }
		}
		ai_will_do = {
			factor = 0.1

			mult_modifier = {
				factor = 0
				free_court_slots <= 5
			}
			mult_modifier = {
				factor = 4
				can_grant_title = title_commander
			}
		}
	}
	abyssal_summon_demons = { # Army
		only_playable = yes
		is_mercenary = yes
		ai_check_interval = 12
		potential = {
			OR = {
				religion = abyssal_cult
				has_character_modifier = syncretic_abyssal
			}
			not_casting = yes
		}
		allow = {
			war = yes
			custom_tooltip = {
				text = ANIMATEDEADCD
				hidden_tooltip = {
					NOT = { has_character_flag = abyss_summon_fiends }
				}
			}
			OR = {
				piety = 250
				AND = {
					OR = {
						trait = patron_orcus
						trait = patron_yeenoghu
					}
					piety = 125
				}
			}
		}
		effect = {
			if = {
				limit = {
					OR = {
						trait = patron_orcus
						trait = patron_yeenoghu
					}
				}
				piety = -125
			}
			else = {
				piety = -250
			}
			add_character_modifier = {
				name = summoned_dead_cooldown
				days = 666
			}
			hidden_tooltip = {
				set_character_flag = abyss_summon_fiends
				character_event = { id = wizinit.37 days = 666 }
			}
			location = {
				ROOT = {
					if = {
						limit = {
							OR = {
								trait = patron_orcus
								trait = patron_yeenoghu
							}
						}
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							leader = ROOT
							earmark = abysssummonedfiends
							troops = {
								undead_troops = { 1500 1500 }
							}
							attrition = 0
							maintenance_multiplier = 0
							cannot_inherit = yes
							disband_on_peace = yes
							can_toggle_looting = no
							is_looter = no
							reinforces = no
						}
					}
					else = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							leader = ROOT
							earmark = abysssummonedfiends
							troops = {
								light_infantry = { 1000 1000 }
								beast_troops = { 200 200 }
							}
							attrition = 0.5
							maintenance_multiplier = 0.1
							cannot_inherit = yes
							disband_on_peace = yes
							can_toggle_looting = no
							is_looter = no
							reinforces = no
						}
					}
				}
			}
		}
		ai_will_do = {
			factor = 0 # decisions with the "is_mercenary" will not be calculated from the script
		}
	}

	restore_magister = {
		ai_check_interval = 240
		only_playable = yes

		potential = {
			religion = arcane
			d_magister = {
				has_holder = no
			}
			is_adult = yes
			not_casting = yes
		}

		allow = {
			higher_tier_than = COUNT
			piety = 750
			OR = {
				trait = renowned_wizard
				trait = renowned_sorcerer
				trait = renowned_bard
				trait = renowned_warlock
				trait = legendary_wizard
				trait = legendary_sorcerer
				trait = legendary_bard
				trait = legendary_warlock
				AND = {
					z_cleric = yes
					OR = {
						trait = patron_mystra
						trait = patron_azuth
					}
				}
			}
			is_tribal = no
			is_republic = no
			capital_scope = {
				OR = {
					AND = {
						capital_holding = {
							NOT = { holding_type = temple }
						}
						OR = {
							has_temple = yes
							ROOT = { z_cleric = yes }
							ROOT = { z_paladin = yes }
						}
					}
					AND = {
						capital_holding = {
							holding_type = temple
						}
						any_province_holding = {
							count = 2
							holding_type = temple
						}
					}
				}
			}
			is_inaccessible_or_incapable_trigger = no
		}

		effect = {
			piety = -750
			activate_title = {
				title = d_magister
				status = yes
			}
			character_event = { id = generalmisc.20 }
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					trait = cynical
					has_secret_religion = yes
				}
			}
		}
	}

	restore_black_altar = {
		ai_check_interval = 240
		
		only_independent = yes

		potential = {
			religion = dead_three
			k_black_altar = {
				has_holder = no
			}
			is_adult = yes
			not_casting = yes
		}

		allow = {
			higher_tier_than = DUKE
			wealth = 1000
			is_tribal = no
			is_republic = no
			capital_scope = {
				OR = {
					AND = {
						capital_holding = {
							NOT = { holding_type = temple }
						}
						OR = {
							has_temple = yes
							ROOT = { z_cleric = yes }
							ROOT = { z_paladin = yes }
						}
					}
					AND = {
						capital_holding = {
							holding_type = temple
						}
						any_province_holding = {
							count = 2
							holding_type = temple
						}
					}
				}
			}
			independent = yes
			is_inaccessible_or_incapable_trigger = no
		}

		effect = {
			wealth = -1000
			activate_title = {
				title = k_black_altar
				status = yes
			}
			character_event = { id = generalmisc.19 }
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					trait = cynical
					has_secret_religion = yes
				}
			}
		}
	}
	
	restore_promenade_of_the_dark_maiden = {
		ai_check_interval = 240
		
		only_independent = yes

		potential = {
			religion = eilistraee
			d_promenade_of_the_dark_maiden = {
				has_holder = no
			}
			is_adult = yes
			not_casting = yes
		}

		allow = {
			higher_tier_than = DUKE
			wealth = 400
			is_tribal = no
			is_republic = no
			independent = yes
			is_inaccessible_or_incapable_trigger = no
		}

		effect = {
			wealth = -400
			piety = 300
			activate_title = {
				title = d_promenade_of_the_dark_maiden
				status = yes
			}
			create_random_priest = {
				female = 80
				attributes = {
					learning = 8
				}
				add_trait = creature_drow
				culture = drow
				religion = eilistraee
				random_traits = yes
				dynasty = culture
			}
			new_character = {
				hidden_tooltip = {
					add_trait = expert_cleric
				}
				grant_title_no_opinion = d_promenade_of_the_dark_maiden
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					trait = cynical
					has_secret_religion = yes
				}
			}
		}
	}

	ilsensine_awaken_psi = {
		ai_check_interval = 360

		potential = {
			OR = {
				religion = illithid_pantheon
				has_character_modifier = syncretic_illithid
				religion = laduguer
				has_character_modifier = syncretic_laduguer
				trait = patron_auppenser
			}
			NOR = {
				trait = psi_potential
				race_is_illithid = yes
				trait = creature_aboleth
				AND = {
					trait = creature_dragon
					gfx_culture_scope = {
						OR = {
							culture = amethyst_dragon
							culture = sapphire_dragon
							culture = topaz_dragon
							culture = emerald_dragon
							culture = crystal_dragon
							culture = ruby_dragon
						}
					}
				}
				z_psion = yes
			}
			is_adult = yes
		}
		allow = {
			piety = 300
			is_incapable = no
			is_dumb_congenital_trigger = no
			NOR = {
				z_monk = yes
				trait = inbred
			}
		}

		effect = {
			piety = -300
			character_event = { id = generalmisc.16 }
		}

		ai_will_do = {
			factor = 0.2
		}
	}

	# Religion Change Player Decision
	rlg_chg_player_dec = {
		ai = no

		potential = {
			not_casting = yes
			NOR = {
				mercenary = yes
				holy_order = yes
				controls_religion = yes
				has_society_landed_title = yes
				culture = monster
				religion = monster_pantheon
				has_character_flag = had_religion_change_event
			}
			has_game_rule = {
				name = diversity
				value = on
			}
		}

		allow = {
			age >= 18
			is_incapable = no
			prisoner = no
			NOT = { trait = zealous }
			can_change_faith_trigger = yes
			piety = 250
		}

		effect = {
			piety = -250
			character_event = { id = rlg_chg.1 }
		}
	}

	hire_helmite_bodyguards = {
		ai_check_interval = 48
		only_playable = yes

		potential = {
			OR = {
				religion = triadic
				religion = mercantile
				AND = {
					religion = muhjari
					OR = {
						has_character_modifier = syncretic_triadic
						has_character_modifier = syncretic_mercantile
					}
				}
			}
			not_casting = yes
		}

		allow = {
			NOT = { has_character_modifier = helmite_bodyguards }
			is_adult = yes
			NOT = { trait = infirm }
			is_inaccessible_or_incapable_trigger = no
			OR = {
				AND = {
					NOT = { trait = patron_helm }
					#wealth = 50
					scaled_wealth = {
						value = 0.4
						min = 25
						max = 100
					}
				}
				AND = {
					trait = patron_helm
					#wealth = 30
					scaled_wealth = {
						value = 0.2
						min = 15
						max = 60
					}
				}
			}
		}

		effect = {
			if = {
				limit = {
					trait = patron_helm
				}
				#wealth = -30
				scaled_wealth = { value = -0.25 min = -20 max = -65 }
			}
			else = {
				#wealth = -50
				scaled_wealth = { value = -0.45 min = -30 max = -110 }
			}
			add_character_modifier = {
				name = helmite_bodyguards
				years = 3
			}
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 0.5
				trait = trusting
			}
			modifier = {
				factor = 0.7
				intrigue = 10
			}
			modifier = {
				factor = 3
				trait = paranoid
			}
			modifier = {
				factor = 2
				trait = patron_helm
			}
		}
	}
	summon_spectator = {
		ai_check_interval = 48
		only_playable = yes

		potential = {
			trait = patron_helm
			not_casting = yes
		}

		allow = {
			NOT = { has_character_modifier = summoned_spectator }
			piety = 50
			is_adult = yes
			NOT = { trait = infirm }
			is_inaccessible_or_incapable_trigger = no
		}

		effect = {
			piety = -50
			add_character_modifier = {
				name = summoned_spectator
				months = 36
			}
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 0.5
				trait = trusting
			}
			modifier = {
				factor = 0.7
				intrigue = 10
			}
			modifier = {
				factor = 3
				trait = paranoid
			}
		}
	}
	recruit_helmite_commander = {
		ai = no

		potential = {
			not_casting = yes
			trait = patron_helm
		}
		allow = {
			piety = 40
			scaled_wealth = 0.25
			NOT = { trait = infirm }
			is_inaccessible_or_incapable_trigger = no
		}
		effect = {
			piety = -40
			scaled_wealth = -0.25
			hidden_tooltip = {
				if = {
					limit = { any_owned_bloodline = { has_bloodline_flag = bloodline_inspire_commanders bloodline_is_active_for = PREV } }
					random_list = {
						95 = {
							spawn_great_helm_commander_effect = yes
						}
						5 = {
							spawn_fantastic_helm_commander_effect = yes
							new_character = {
								opinion = {
			 						modifier = opinion_legendary_commander
			 						years = 50
			 		  				who = ROOT
			 					}
							}
						}
					}
				}
				else = {
					spawn_good_helm_commander_effect = yes
				}
			}
			custom_tooltip = { text = promoted_commander_TT }
			character_event = { id = NE.1 }
		}
		ai_will_do = {
			factor = 0
		}
	}
	ceremony_of_honor_to_helm = { #festival
		is_high_prio = yes
		ai_check_interval = 48
		only_playable = yes

		potential = {
			always = no
			trait = patron_helm
			not_casting = yes
		}

		allow = {
			month == 6
			custom_tooltip = {
				text = SHIELDMEET
				hidden_tooltip = { has_global_flag = shieldmeet_year }
			}
			custom_tooltip = {
				text = SHIELDMET
				hidden_tooltip = {
					NOT = { has_character_modifier = shieldmet }
				}
			}
			is_adult = yes
			NOT = { trait = infirm }
			is_inaccessible_or_incapable_trigger = no
		}

		effect = {
			hidden_tooltip = {
				add_character_modifier = {
					name = shieldmet
					months = 4
				}
			}
			character_event = { id = divrel.1 }
		}

		ai_will_do = {
			factor = 0.7
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.3
				trait = cynical
			}
			modifier = {
				factor = 1.3
				trait = diligent
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
		}
	}


	resplendent_youth = {
		ai_check_interval = 240
		only_playable = yes

		potential = {
			trait = patron_tyr
			
			age >= 50
			NOT = { trait = longevity }
			faerun_immortal_race_trigger = no
			not_casting = yes
		}

		allow = {
			piety = 800
			NOT = { trait = infirm }
			is_inaccessible_or_incapable_trigger = no
			custom_tooltip = {
				text = RESPYCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = respy }
						had_character_flag = {
							flag = respy
							years = 30
						}
					}
				}
			}
		}

		effect = {
			clr_character_flag = respy
			set_character_flag = respy
			piety = -800
			character_event = { id = divrel.2 }
		}

		ai_will_do = {
			factor = 0.05
		}
	}
	recruit_torm_paladin = {
		ai = no

		potential = {
			not_casting = yes
			OR = {
				religion = triadic
				religion = adama
			}
		}
		allow = {
			piety = 40
			scaled_wealth = 0.25
			NOT = { trait = infirm }
			is_inaccessible_or_incapable_trigger = no
		}
		effect = {
			piety = -40
			scaled_wealth = -0.25
			hidden_tooltip = {
				if = {
					limit = { any_owned_bloodline = { has_bloodline_flag = bloodline_inspire_commanders bloodline_is_active_for = PREV } }
					random_list = {
						95 = {
							spawn_great_paladin_effect = yes
						}
						5 = {
							spawn_fantastic_paladin_effect = yes
							new_character = {
								opinion = {
			 						modifier = opinion_legendary_commander
			 						years = 50
			 		  				who = ROOT
			 					}
							}
						}
					}
				}
				else = {
					spawn_good_paladin_effect = yes
				}
			}
			custom_tooltip = { text = promoted_commander_TT }
			character_event = { id = NE.1 }
		}
		ai_will_do = {
			factor = 0
		}
	}
	torm_tactics = {
		ai_check_interval = 60

		potential = {
			trait = patron_torm
			can_have_more_leadership_traits = yes
			NOR = {
				trait = shield_of_torm
				trait = sword_of_torm
			}
			not_casting = yes
			is_adult = yes
		}

		allow = {
			is_inaccessible_or_incapable_trigger = no
			NOT = { trait = infirm }
			piety = 40
		}

		effect = {
			piety = -40
			character_event = { id = divrel.3 }
		}

		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 2
				z_paladin = yes
			}
			modifier = {
				factor = 4
				OR = {
					trait = misguided_warrior
					trait = tough_soldier
					trait = skilled_tactician
					trait = brilliant_strategist
				}
			}
		}
	}

	dragonborn_transformation = {
		ai_check_interval = 360

		potential = {
			OR = {
				religion = bahamut
				trait = patron_bahamut
			}
			NOR = {
				faerun_immortal_race_trigger = yes
				trait = creature_kobold
				trait = creature_dragonborn
				race_is_aberrant = yes
			}
			not_casting = yes
		}

		allow = {
			piety = 800
			is_adult = yes
			is_inaccessible_or_incapable_trigger = no
			NOT = { trait = infirm }
		}

		effect = {
			piety = -800
			character_event = { id = divrel.9 }
		}

		ai_will_do = {
			factor = 0.05
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 2
				trait = brave
			}
		}
	}
	bahamut_attract_dragon = {
		only_playable = yes
		ai_check_interval = 252
		potential = {
			OR = {
				religion = bahamut
				has_character_modifier = syncretic_bahamut
				religion = tiamat
				has_character_modifier = syncretic_tiamat
				religion = draconic_pantheon
				has_character_modifier = syncretic_draconic
			}
			not_casting = yes
		}
		allow = {
			piety = 250
			prestige = 250
			scaled_wealth = 1
			NOT = { trait = infirm }
			is_inaccessible_or_incapable_trigger = no
			custom_tooltip = {
				text = BAHDRGCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = bahdrg }
						had_character_flag = {
							flag = bahdrg
							years = 20
						}
					}
				}
			}
		}
		effect = {
			clr_character_flag = bahdrg
			set_character_flag = bahdrg
			if = {
				limit = {
					OR = {
						religion = draconic_pantheon
						has_character_modifier = syncretic_draconic
					}
				}
				prestige = -250
			}
			piety = -250
			scaled_wealth = -1
			if = {
				limit = {
					OR = {
						religion = bahamut
						has_character_modifier = syncretic_bahamut
						trait = patron_bahamut
					}
				}
				hidden_tooltip = {
					create_character = {
						age = 50
						trait = creature_dragon
						random_traits = yes
						female = random
						culture = draconic
						religion = bahamut
						dynasty = none
						immortal_age = 30
					}
					new_character = {
						random_list = {
							3 = {
								add_age = 25
								add_trait = dragon_young
							}
							2 = {
								add_age = 50
								add_trait = dragon_adult
							}
							1 = {
								add_age = 100
								add_trait = dragon_adult
							}
							1 = {
								add_age = 150
								add_trait = dragon_adult
							}
							1 = {
								add_age = 200
								add_trait = dragon_adult
							}
							1 = {
								add_age = 275
								add_trait = dragon_adult
							}
							1 = {
								add_age = 350
								add_trait = dragon_adult
							}
						}
						random_list = {
							10 = {
								culture = brass_dragon
								set_graphical_culture = brass_dragon
							}
							10 = {
								culture = bronze_dragon
								set_graphical_culture = bronze_dragon
							}
							10 = {
								culture = copper_dragon
								set_graphical_culture = copper_dragon
							}
							3 = {
								culture = silver_dragon
								set_graphical_culture = silver_dragon
							}
							2 = {
								culture = song_dragon
								set_graphical_culture = song_dragon
							}
							1 = {
								culture = gold_dragon
								set_graphical_culture = gold_dragon
							}
							1 = {
								culture = mercury_dragon
								set_graphical_culture = mercury_dragon
							}
						}
						religion = ROOT
						if = {
							limit = {
								NOT = { religion = bahamut }
							}
							add_trait = patron_bahamut
						}
						opinion = {
							modifier = servant_of_bahamut
							who = ROOT
							years = 10
						}
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						religion = tiamat
						has_character_modifier = syncretic_tiamat
						trait = patron_tiamat
					}
				}
				hidden_tooltip = {
					create_character = {
						age = 50
						trait = creature_dragon
						random_traits = yes
						female = random
						culture = draconic
						religion = tiamat
						dynasty = none
						immortal_age = 30
					}
					new_character = {
						random_list = {
							3 = {
								add_age = 25
								add_trait = dragon_young
							}
							2 = {
								add_age = 50
								add_trait = dragon_adult
							}
							1 = {
								add_age = 100
								add_trait = dragon_adult
							}
							1 = {
								add_age = 150
								add_trait = dragon_adult
							}
							1 = {
								add_age = 200
								add_trait = dragon_adult
							}
							1 = {
								add_age = 275
								add_trait = dragon_adult
							}
							1 = {
								add_age = 350
								add_trait = dragon_adult
							}
						}
						random_list = {
							10 = {
								culture = white_dragon
								set_graphical_culture = white_dragon
							}
							10 = {
								culture = green_dragon
								set_graphical_culture = green_dragon
							}
							10 = {
								culture = black_dragon
								set_graphical_culture = black_dragon
							}
							3 = {
								culture = blue_dragon
								set_graphical_culture = blue_dragon
							}
							2 = {
								culture = brown_dragon
								set_graphical_culture = brown_dragon
							}
							1 = {
								culture = red_dragon
								set_graphical_culture = red_dragon
							}
						}
						religion = ROOT
						if = {
							limit = {
								NOT = { religion = tiamat }
							}
							add_trait = patron_tiamat
						}
						opinion = {
							modifier = servant_of_tiamat
							who = ROOT
							years = 10
						}
					}
				}
			}
			else = {
				hidden_tooltip = {
					create_character = {
						age = 50
						trait = creature_dragon
						random_traits = yes
						female = random
						culture = draconic
						religion = draconic_pantheon
						dynasty = none
						immortal_age = 30
					}
					new_character = {
						random_list = {
							3 = {
								add_age = 25
								add_trait = dragon_young
							}
							2 = {
								add_age = 50
								add_trait = dragon_adult
							}
							1 = {
								add_age = 100
								add_trait = dragon_adult
							}
							1 = {
								add_age = 150
								add_trait = dragon_adult
							}
							1 = {
								add_age = 200
								add_trait = dragon_adult
							}
							1 = {
								add_age = 275
								add_trait = dragon_adult
							}
							1 = {
								add_age = 350
								add_trait = dragon_adult
							}
						}
						if = {
							limit = {
								ROOT = { trait = creature_dragon }
							}
							culture = ROOT
							set_graphical_culture = ROOT
						}
						else = {
							random_list = {
								10 = {
									culture = white_dragon
									set_graphical_culture = white_dragon
								}
								10 = {
									culture = green_dragon
									set_graphical_culture = green_dragon
								}
								10 = {
									culture = black_dragon
									set_graphical_culture = black_dragon
								}
								3 = {
									culture = blue_dragon
									set_graphical_culture = blue_dragon
								}
								2 = {
									culture = brown_dragon
									set_graphical_culture = brown_dragon
								}
								1 = {
									culture = red_dragon
									set_graphical_culture = red_dragon
								}
								10 = {
									culture = brass_dragon
									set_graphical_culture = brass_dragon
								}
								10 = {
									culture = bronze_dragon
									set_graphical_culture = bronze_dragon
								}
								10 = {
									culture = copper_dragon
									set_graphical_culture = copper_dragon
								}
								3 = {
									culture = silver_dragon
									set_graphical_culture = silver_dragon
								}
								2 = {
									culture = song_dragon
									set_graphical_culture = song_dragon
								}
								1 = {
									culture = gold_dragon
									set_graphical_culture = gold_dragon
								}
								3 = {
									culture = amethyst_dragon
									set_graphical_culture = amethyst_dragon
								}
								3 = {
									culture = emerald_dragon
									set_graphical_culture = emerald_dragon
								}
								3 = {
									culture = sapphire_dragon
									set_graphical_culture = sapphire_dragon
								}
								3 = {
									culture = topaz_dragon
									set_graphical_culture = topaz_dragon
								}
								3 = {
									culture = crystal_dragon
									set_graphical_culture = crystal_dragon
								}
								1 = {
									culture = ruby_dragon
									set_graphical_culture = ruby_dragon
								}
								3 = {
									culture = steel_dragon
									set_graphical_culture = steel_dragon
								}
								1 = {
									culture = mercury_dragon
									set_graphical_culture = mercury_dragon
								}
							}
						}
						religion = ROOT
					}
				}
			}
			custom_tooltip = { text = BAHDRG }
			character_event = { id = generalmisc.52 }
		}
		ai_will_do = {
			factor = 0.1
		}
	}

	ilmater_health = {
		only_playable = yes
		ai_check_interval = 36

		potential = {
			OR = {
				religion = triadic
				has_character_modifier = syncretic_triadic
				religion = mercantile
				has_character_modifier = syncretic_mercantile
				religion = calishite_faith
				has_character_modifier = syncretic_calishite
				religion = lapal_faith
				has_character_modifier = syncretic_lapal
			}
			not_casting = yes
		}

		allow = {
			NOT = { has_character_modifier = ilmater_health_mod }
			piety = 80
			is_inaccessible_or_incapable_trigger = no
		}

		effect = {
			piety = -80
			add_character_modifier = {
				name = ilmater_health_mod
				years = 2
			}
		}

		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 3
				NOT = { health = 3 }
			}
			modifier = {
				factor = 0.4
				health = 6
			}
		}
	}

	hoar_penultimate_thunder = { #festival
		only_playable = yes
		ai_check_interval = 48

		potential = {
			always = no # disabled for now
			trait = patron_hoar
			has_global_flag = tot_ended
			not_casting = yes
		}

		allow = {
			month == 8
			is_inaccessible_or_incapable_trigger = no
			is_adult = yes
			NOT = { trait = infirm }
			custom_tooltip = {
				text = TORMCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = penultimate_thunder }
						had_character_flag = {
							flag = penultimate_thunder
							years = 3
						}
					}
				}
			}
		}

		effect = {
			clr_character_flag = penultimate_thunder
			set_character_flag = penultimate_thunder
			character_event = { id = divrel.14 }
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = cynical
			}
		}
	}
	hoar_impending_doom = { #festival
		only_playable = yes
		ai_check_interval = 48

		potential = {
			always = no
			trait = patron_hoar
			not_casting = yes
		}

		allow = {
			month == 9
			is_inaccessible_or_incapable_trigger = no
			is_adult = yes
			NOT = { trait = infirm }
			custom_tooltip = {
				text = TORMCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = impending_doom }
						had_character_flag = {
							flag = impending_doom
							years = 3
						}
					}
				}
			}
		}

		effect = {
			clr_character_flag = impending_doom
			set_character_flag = impending_doom
			character_event = { id = divrel.15 }
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = cynical
			}
		}
	}

	employ_siamorphe_steward = {
		ai = no

		potential = {
			OR = {
				religion = triadic
				religion = solar
			}
			not_casting = yes
		}
		allow = {
			scaled_wealth = 0.25
			piety = 35
			is_inaccessible_or_incapable_trigger = no
		}
		effect = {
			piety = -35
			scaled_wealth = -0.25
			if = {
				limit = {
					NOR = {
						has_religion_feature = religion_matriarchal
						has_religion_feature = religion_patriarchal
						#religion = loviatar
						religion = lolth_cult
						NOT = { has_law = status_of_women_4 }
					}
				}
				create_random_steward = {
					random_traits = yes
					dynasty = none
					female = 50
					attributes = {
						diplomacy = 2
						learning = 2
						stewardship = 8
						intrigue = 2
						martial = 2
					}
				}
				new_character = {
					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull

					remove_trait = mystic
					remove_trait = socializer
					remove_trait = gamer
					remove_trait = hedonist
					remove_trait = duelist
					remove_trait = hunter
					remove_trait = strategist
					remove_trait = administrator
					remove_trait = architect
					remove_trait = gardener
					remove_trait = schemer
					remove_trait = impaler
					remove_trait = seducer
					remove_trait = seductress
					remove_trait = theologian
					remove_trait = scholar
					add_trait = patron_siamorphe
					random_list = { # Flavor Randomization
						#35 = {
							# Nothing
						#}
						15 = {
							change_stewardship = 2
						}
						10 = {
							add_trait = gardener
						}
						10 = {
							add_trait = architect
						}
						10 = {
							add_trait = administrator
						}
						10 = {
							change_stewardship = 4
						}
						5 = {
							change_stewardship = 6
						}
						5 = {
							add_trait = shrewd
						}
					}
					save_event_target_as = invited_character
				}
				character_event = { id = NE.1 }
			}
			if = {
				limit = {
					OR = {
						has_religion_feature = religion_matriarchal
						#religion = loviatar
						religion = lolth_cult
						#religion = kiaransalee
					}
				}
				create_random_steward = {
					random_traits = yes
					dynasty = none
					female = yes
					attributes = {
						diplomacy = 2
						learning = 2
						stewardship = 8
						intrigue = 2
						martial = 2
					}
				}
				new_character = {
					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull

					remove_trait = mystic
					remove_trait = socializer
					remove_trait = gamer
					remove_trait = hedonist
					remove_trait = duelist
					remove_trait = hunter
					remove_trait = strategist
					remove_trait = administrator
					remove_trait = architect
					remove_trait = gardener
					remove_trait = schemer
					remove_trait = impaler
					remove_trait = seducer
					remove_trait = seductress
					remove_trait = theologian
					remove_trait = scholar
					add_trait = patron_siamorphe
					random_list = { # Flavor Randomization
						#35 = {
							# Nothing
						#}
						15 = {
							change_stewardship = 2
						}
						10 = {
							add_trait = gardener
						}
						10 = {
							add_trait = architect
						}
						10 = {
							add_trait = administrator
						}
						10 = {
							change_stewardship = 4
						}
						5 = {
							change_stewardship = 6
						}
						5 = {
							add_trait = shrewd
						}
					}
					save_event_target_as = invited_character
				}
				character_event = { id = NE.1 }
			}
			if = {
				limit = {
					OR = {
						has_religion_feature = religion_patriarchal
						#religion = vhaeraun
						NOT = { has_law = status_of_women_4 }
					}
				}
				create_random_steward = {
					random_traits = yes
					dynasty = none
					female = no
					attributes = {
						diplomacy = 2
						learning = 2
						stewardship = 8
						intrigue = 2
						martial = 2
					}
				}
				new_character = {
					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull

					remove_trait = mystic
					remove_trait = socializer
					remove_trait = gamer
					remove_trait = hedonist
					remove_trait = duelist
					remove_trait = hunter
					remove_trait = strategist
					remove_trait = administrator
					remove_trait = architect
					remove_trait = gardener
					remove_trait = schemer
					remove_trait = impaler
					remove_trait = seducer
					remove_trait = seductress
					remove_trait = theologian
					remove_trait = scholar
					add_trait = patron_siamorphe
					random_list = { # Flavor Randomization
						#35 = {
							# Nothing
						#}
						15 = {
							change_stewardship = 2
						}
						10 = {
							add_trait = gardener
						}
						10 = {
							add_trait = architect
						}
						10 = {
							add_trait = administrator
						}
						10 = {
							change_stewardship = 4
						}
						5 = {
							change_stewardship = 6
						}
						5 = {
							add_trait = shrewd
						}
					}
					save_event_target_as = invited_character
				}
				character_event = { id = NE.1 }
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	loyal_vassalage = {
		ai_check_interval = 60
		only_playable = yes

		potential = {
			trait = patron_siamorphe
			not_casting = yes
		}

		allow = {
			piety >= 100
			custom_tooltip = {
				text = VASSCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = loyvass }
						had_character_flag = {
							flag = loyvass
							years = 3
						}
					}
				}
			}
			is_inaccessible_or_incapable_trigger = no
		}

		effect = {
			clr_character_flag = loyvass
			piety = -100
			set_character_flag = loyvass
			add_character_modifier = {
				name = loyal_vassals
				years = 2
			}
		}

		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 1.5
				trait = just
			}
			modifier = {
				factor = 0.5
				trait = arbitrary
			}
		}
	}
	divine_bloodline = {
		ai_check_interval = 240
		only_playable = yes

		potential = {
			trait = patron_siamorphe
			NOT = {
				any_owned_bloodline = {
					OR = {
						has_bloodline_flag = historical_bloodline
						has_bloodline_flag = created_bloodline
						has_bloodline_flag = saintly_bloodline
					}
				}
			}
			NOT = {
				any_dynasty_member = { # No active created bloodline in dynasty
					any_owned_bloodline = {
						OR = {
							has_bloodline_flag = historical_bloodline
							has_bloodline_flag = created_bloodline
							has_bloodline_flag = saintly_bloodline
						}
					}
				}
			}
			not_casting = yes
		}
		allow = {
			piety = 350
			NOT = { trait = infirm }
			is_inaccessible_or_incapable_trigger = no
		}
		effect = {
			piety = -350
			character_event = { id = divrel.17 }
		}
		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 0.5
				trait = content
			}
			modifier = {
				factor = 0.7
				trait = humble
			}
		}
	}
	auril_embrace = {
		ai_check_interval = 240

		potential = {
			trait = patron_auril
			NOR = {
				has_character_modifier = embraced_by_auril
				has_character_flag = embraced_by_auril
			}
			not_casting = yes
		}

		allow = {
			is_inaccessible_or_incapable_trigger = no
			character_disease_trigger = no
			has_symptom_trigger = no
			has_injury_trigger = no
			NOT = { trait = infirm }
		}

		effect = {
			set_character_flag = embraced_by_auril
			hidden_tooltip = {
				random = {
					chance = 35
					modifier = {
						factor = 0.7
						trait = zealous
					}
					modifier = {
						factor = 1.3
						trait = cynical
					}
					modifier = {
						factor = 0.5
						is_strong_trigger = yes
					}
					modifier = {
						factor = 2
						is_weak_trigger = yes
					}
					modifier = {
						factor = 1.5
						has_injury_trigger = yes
					}
					modifier = {
						factor = 2
						is_maimed_trigger = yes
					}
					modifier = {
						factor = 4
						has_severe_disability_trigger = yes
					}
					modifier = {
						factor = 2.5
						has_medium_disability_trigger = yes
					}
					modifier = {
						factor = 1.5
						has_minor_disability_trigger = yes
					}
					modifier = {
						factor = 1.5
						has_mental_disorder_trigger = yes
					}
					modifier = {
						factor = 1.5
						has_negative_congenital_trigger = yes
					}
					modifier = {
						factor = 0.7
						trait = brave
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 0.5
						OR = {
							z_cleric = yes
							z_paladin = yes
							z_druid = yes
						}
					}
					modifier = {
						factor = 0.8
						OR = {
							z_barbarian = yes
							z_monk = yes
							z_ranger = yes
							z_fighter = yes
						}
					}
					modifier = {
						factor = 0.5
						trait = winter_soldier
					}
					set_character_flag = died_to_embrace
				}
			}
			character_event = { id = divrel.20 }
		}

		ai_will_do = {
			factor = 0.05
			modifier = {
				factor = 0.1
				trait = cynical
			}
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.2
				trait = craven
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
		}
	}

	garagos_tactics = {
		ai_check_interval = 120

		potential = {
			trait = patron_garagos
			NOT = { trait = slaughterer }
			not_casting = yes
			can_have_more_leadership_traits = yes
			is_adult = yes
		}

		allow = {
			piety = 40
			NOT = { trait = infirm }
			is_inaccessible_or_incapable_trigger = no
		}

		effect = {
			piety = -40
			add_trait = slaughterer
		}

		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 2
				z_fighter = yes
			}
			modifier = {
				factor = 2
				z_barbarian = yes
			}
			modifier = {
				factor = 4
				OR = {
					trait = misguided_warrior
					trait = tough_soldier
					trait = skilled_tactician
					trait = brilliant_strategist
				}
			}
		}
	}

	malar_become_werebeast = {
		ai_check_interval = 240

		potential = {
			trait = patron_malar
			is_lycanthrope_compatible = yes
			is_adult = yes
			not_casting = yes
		}

		allow = {
			piety = 50
			NOT = { trait = infirm }
			is_inaccessible_or_incapable_trigger = no
		}

		effect = {
			piety = -50
			add_trait = afflicted_lycanthrope
			random_list = {
				1 = {
					add_trait = werewolf
				}
				1 = {
					add_trait = wererat
				}
				1 = {
					add_trait = weretiger
				}
			}
			update_hidden_modifiers = yes
		}

		ai_will_do = {
			factor = 0.3
		}
	}

	patrons_fae_cf = {
		is_high_prio = yes
		ai = no
		potential = {
			not_casting = yes
			OR = {
				is_ruler = yes
				has_job_title = yes
				has_minor_title = yes
				z_cleric = yes
				z_druid = yes
				z_paladin = yes
			}
			age = 16
			NOR = {
				trait = incapable
				trait = possessed
				trait = avatar
			}
			has_patron_god = no
			religion_has_patrons = yes
		}
		effect = {
			select_patron_effect = yes
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}
			modifier = {
				factor = 0.2
				trait = slothful
			}
			modifier = {
				factor = 0.1
				trait = cynical
			}
			modifier = {
				factor = 1.1
				trait = zealous
			}
			modifier = {
				factor = 100
				OR = {
					z_cleric = yes
					z_druid = yes
					z_paladin = yes
				}
			}
		}
	}

	find_runecaster = {
		only_playable = yes
		ai_check_interval = 60
		potential = {
			OR = {
				religion = giant_pantheon
				has_character_modifier = syncretic_giant
			}
			NOR = {
				has_assigned_minor_title = title_runecaster
				has_character_flag = looking_for_guru
				has_character_flag = found_guru
			}
			is_adult = yes
			not_casting = yes
		}
		allow = {
			prestige = 300
			wealth = 50
			is_inaccessible_or_incapable_trigger = no
		}
		effect = {
			wealth = -50
			set_character_flag = looking_for_guru
			character_event = { id = Ordning.0001 }
		}
		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0
				trait = cynical
			}
			modifier = {
				factor = 0
				NOT = { wealth = 200 }
			}
		}
	}

	# restore_delzoun = {
		# ai_check_interval = 50
		# only_playable = yes
		# potential = {
			# OR = {
				# religion = dwarven_pantheon
				# religion = laduguer
			# }
			# #culture_group = dwarf_group
			# any_realm_province = {
				# region = silver_marches_region
			# }
			# e_utter_north = {
				# has_holder = no
			# }
			# not_casting = yes
		# }
		# allow = {
			# independent = yes
			# higher_tier_than = DUKE
			# wealth = 600
			# piety = 400
			# custom_tooltip = {
				# text = DELZOUN_CONDITIONS
				# c_adbarrim = {
					# owner = {
						# OR = {
							# character = ROOT
							# any_liege = {
								# character = ROOT
							# }
						# }
					# }
					# location = {
						# religion = ROOT
					# }
				# }
				# c_sundabar = {
					# owner = {
						# OR = {
							# character = ROOT
							# any_liege = {
								# character = ROOT
							# }
						# }
					# }
					# location = {
						# religion = ROOT
					# }
				# }
				# c_felbarr = {
					# owner = {
						# OR = {
							# character = ROOT
							# any_liege = {
								# character = ROOT
							# }
						# }
					# }
					# location = {
						# religion = ROOT
					# }
				# }
				# c_the_fork = {
					# owner = {
						# OR = {
							# character = ROOT
							# any_liege = {
								# character = ROOT
							# }
						# }
					# }
					# location = {
						# religion = ROOT
					# }
				# }
				# c_arn_forest = {
					# owner = {
						# OR = {
							# character = ROOT
							# any_liege = {
								# character = ROOT
							# }
						# }
					# }
					# location = {
						# religion = ROOT
					# }
				# }
			# }
		# }
		# effect = {
			# piety = -400
			# wealth = -600
			# grant_title = e_utter_north
		# }
		# ai_will_do = {
			# factor = 0.8
			# modifier = {
				# factor = 2
				# trait = ambitious
			# }
			# modifier = {
				# factor = 0.5
				# trait = content
			# }
		# }
	# }
	restore_ammarindar = {
		ai_check_interval = 120
		only_independent = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			k_ammarindar = {
				has_holder = no
			}
			is_landed = yes
			any_realm_province = {
				region = northern_heartlands_region
			}
			not_casting = yes
		}
		allow = {
			higher_tier_than = COUNT
			wealth = 400
			piety = 200
			custom_tooltip = {
				text = AMMARINDAR_CONDITIONS
				d_ammarindar = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
				}
				d_greypeaks = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
				}
			}
			independent = yes
		}
		effect = {
			piety = -200
			wealth = -400
			grant_title = k_ammarindar
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}
	restore_besilmer = {
		ai_check_interval = 120
		only_independent = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			k_besilmer = {
				has_holder = no
			}
			is_landed = yes
			any_realm_province = {
				region = sword_coast_north_region
			}
			not_casting = yes
		}
		allow = {
			higher_tier_than = COUNT
			wealth = 400
			piety = 200
			custom_tooltip = {
				text = BESILMER_CONDITIONS
				c_beliard = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_red_larch = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_sumber_hills = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_forlorn_hills = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_westwood = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
			}
			independent = yes
		}
		effect = {
			piety = -200
			wealth = -400
			grant_title = k_besilmer
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}
	restore_dareth = {
		ai_check_interval = 120
		only_independent = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			k_dareth = {
				has_holder = no
			}
			is_landed = yes
			any_realm_province = {
				OR = {
					region = sossal_region
					region = pelvuria_region
				}
			}
			not_casting = yes
		}
		allow = {
			higher_tier_than = COUNT
			wealth = 400
			piety = 200
			custom_tooltip = { # NOTE: Rework this when underdark provinces are around!
				text = DARETH_CONDITIONS
				d_ushar = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
				}
				c_dharvil = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
			}
			independent = yes
		}
		effect = {
			piety = -200
			wealth = -400
			grant_title = k_dareth
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}
	restore_gharraghaur = {
		ai_check_interval = 120
		only_independent = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			k_gharraghaur = {
				has_holder = no
			}
			is_landed = yes
			any_realm_province = {
				region = savage_frontier_region
			}
			not_casting = yes
		}
		allow = {
			higher_tier_than = COUNT
			wealth = 400
			piety = 200
			custom_tooltip = {
				text = GHARRAGHAUR_CONDITIONS
				d_mirabar = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
				}
				c_mirabar = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_starmetal_hills = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_mt_hotenow = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_lyntara = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_khedrun_valley = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
			}
			independent = yes
		}
		effect = {
			piety = -200
			wealth = -400
			grant_title = k_gharraghaur
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}
	restore_haunghdannar = {
		ai_check_interval = 120
		only_independent = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			d_haunghdannar = {
				has_holder = no
			}
			is_landed = yes
			any_realm_province = {
				region = sword_coast_north_region
			}
			not_casting = yes
		}
		allow = {
			higher_tier_than = BARON
			wealth = 250
			custom_tooltip = {
				text = HAUNGHDANNAR_CONDITIONS
				c_leilon = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_kryptgarden_forest = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_cony_gap = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
			}
			independent = yes
		}
		effect = {
			wealth = -250
			grant_title = d_haunghdannar
			c_leilon = {
				de_jure_liege = d_haunghdannar
			}
			c_kryptgarden_forest = {
				de_jure_liege = d_haunghdannar
			}
			c_cony_gap = {
				de_jure_liege = d_haunghdannar
			}
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}
	restore_ironstar = {
		ai_check_interval = 120
		only_independent = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			d_ironstar = {
				has_holder = no
			}
			is_landed = yes
			any_realm_province = {
				region = savage_frontier_region
			}
			
			not_casting = yes
		}
		allow = {
			higher_tier_than = BARON
			wealth = 250
			custom_tooltip = {
				text = IRONSTAR_CONDITIONS
				c_valley_of_klaidson = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_dark_arrow = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_fell_pass = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
			}
			independent = yes
		}
		effect = {
			wealth = -250
			grant_title = d_ironstar
			c_fell_pass = {
				de_jure_liege = d_ironstar
			}
			c_dark_arrow = {
				de_jure_liege = d_ironstar
			}
			c_valley_of_klaidson = {
				de_jure_liege = d_ironstar
			}
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}
	restore_oghrann = {
		ai_check_interval = 120
		only_independent = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			k_oghrann = {
				has_holder = no
			}
			is_landed = yes
			any_realm_province = {
				region = western_heartlands_region
			}
			not_casting = yes
		}
		allow = {
			higher_tier_than = COUNT
			wealth = 400
			piety = 200
			custom_tooltip = {
				text = OGHRANN_CONDITIONS
				c_darkhold = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_veilstone = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_tun = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_marsh_of_tun = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_storm_horns = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
			}
			independent = yes
		}
		effect = {
			piety = -200
			wealth = -400
			grant_title = k_oghrann
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
			modifier = {
				factor = 4
				dynasty = 4953 # The Iron House
			}
		}
	}
	restore_sarphil = {
		ai_check_interval = 120
		only_independent = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			k_sarphil = {
				has_holder = no
			}
			is_landed = yes
			any_realm_province = {
				region = moonsea_region
			}
			
			not_casting = yes
		}
		allow = {
			higher_tier_than = COUNT
			wealth = 400
			piety = 200
			custom_tooltip = {
				text = SARPHIL_CONDITIONS
				c_hulburg = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_galenarr = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_hillsfar = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_mulmaster = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
			}
			independent = yes
		}
		effect = {
			piety = -200
			wealth = -400
			grant_title = k_sarphil
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}
	restore_tethyamar = {
		ai_check_interval = 120
		only_independent = yes
		potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			k_tethyamar = {
				has_holder = no
			}
			is_landed = yes
			any_realm_province = {
				region = anauroch_region
			}
			
			not_casting = yes
		}
		allow = {
			higher_tier_than = COUNT
			wealth = 400
			piety = 200
			custom_tooltip = {
				text = TETHYAMAR_CONDITIONS
				c_tethyamar = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				c_miir = {
					owner = {
						OR = {
							character = ROOT
							any_liege = {
								character = ROOT
							}
						}
					}
					location = {
						religion = ROOT
					}
				}
				OR = {
					c_lost_vale = {
						owner = {
							OR = {
								character = ROOT
								any_liege = {
									character = ROOT
								}
							}
						}
						location = {
							religion = ROOT
						}
					}
					c_mhaelos = {
						owner = {
							OR = {
								character = ROOT
								any_liege = {
									character = ROOT
								}
							}
						}
						location = {
							religion = ROOT
						}
					}
				}
			}
			independent = yes
		}
		effect = {
			piety = -200
			wealth = -400
			grant_title = k_tethyamar
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
			modifier = {
				factor = 4
				dynasty = 4953 # The Iron House
			}
		}
	}
	restore_lotus_throne = {
		ai_check_interval = 240
		
		only_independent = yes

		potential = {
			has_global_flag = lotus_throne_abolished
			trait = creature_yikarian
			religion = faceless_god
			culture = yikarian
			is_adult = yes
			is_landed = yes
			k_lotus_throne = {
				has_holder = no
			}
			not_casting = yes
		}

		allow = {
			higher_tier_than = DUKE
			wealth = 1000
			is_tribal = no
			is_republic = no
			capital_scope = {
				OR = {
					AND = {
						capital_holding = {
							NOT = { holding_type = temple }
						}
						OR = {
							has_temple = yes
							ROOT = { z_cleric = yes }
							ROOT = { z_paladin = yes }
						}
					}
					AND = {
						capital_holding = {
							holding_type = temple
						}
						any_province_holding = {
							count = 2
							holding_type = temple
						}
					}
				}
			}
			independent = yes
		}

		effect = {
			wealth = -1000
			activate_title = {
				title = k_lotus_throne
				status = yes
			}
			clr_global_flag = lotus_throne_abolished
			character_event = { id = generalmisc.51 }
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					trait = cynical
					has_secret_religion = yes
				}
			}
		}
	}
	cure_wound_decision = {
		only_playable = yes # performance reasons
		ai_check_interval = 12
		potential = {
			OR = {
				has_injury_trigger = yes
				trait = mangled
			}
			prisoner = no
			NOR = {
				religion = faithless
				religion = blue_flame
			}
			not_casting = yes
		}
		allow = {
			OR = {
				AND = {
					wealth = 50
					piety = 50
				}
				AND = {
					OR = {
						has_character_modifier = rel_diversity_mod
						has_character_modifier = total_diversity_mod
					}
					wealth = 25
					piety = 25
				}
			}
			NOT = { has_character_modifier = took_wounds }
		}
		effect = {
			if = {
				limit = {
					OR = {
						has_character_modifier = rel_diversity_mod
						has_character_modifier = total_diversity_mod
					}
				}
				wealth = -25
				piety = -25
			}
			else = {
				wealth = -50
				piety = -50
			}
			remove_character_modifier = badly_bruised
			remove_character_modifier = black_eye
			remove_character_modifier = swollen_ankle
			remove_character_modifier = swollen_wrist
			remove_character_modifier = sore_muscles
			remove_character_modifier = cracked_ribs
			remove_character_modifier = concussion
			if = {
				limit = {
					trait = mangled
				}
				remove_trait = mangled
				break = yes
			}
			else_if = {
				limit = {
					trait = severely_injured
				}
				remove_trait = severely_injured
				add_trait = wounded
				break = yes
			}
			remove_trait = wounded
		}
	}
	regenerate_decision = {
		only_playable = yes # performance reasons
		ai_check_interval = 36
		potential = {
			OR = {
				has_character_modifier = rel_diversity_mod
				has_character_modifier = total_diversity_mod
			}
			is_maimed_trigger = yes
			NOT = { trait = mangled }
			prisoner = no
			NOR = {
				religion = faithless
				religion = blue_flame
			}
			not_casting = yes
		}
		allow = {
			wealth = 100
			piety = 50
			NOT = { has_character_modifier = took_wounds }
		}
		effect = {
			wealth = -100
			piety = -50
			custom_tooltip = {
				text = ALLREGENERATED
				hidden_tooltip = {
					remove_trait = wounded
					remove_trait = mangled
					remove_trait = severely_injured
					remove_trait = disfigured
					remove_trait = one_legged
					remove_trait = one_handed
					remove_trait = eunuch
					remove_character_modifier = phantom_pain
					remove_character_modifier = badly_bruised
					remove_character_modifier = black_eye
					remove_character_modifier = swollen_ankle
					remove_character_modifier = swollen_wrist
					remove_character_modifier = sore_muscles
					remove_character_modifier = cracked_ribs
					remove_character_modifier = concussion
					if = {
						limit = {
							trait = creature_beholder
							OR = {
								z_wizard = yes
								z_bard = yes
								z_warlock = yes
							}
						}
						remove_trait = blinded
						add_trait = one_eyed
					}
					else = {
						remove_trait = one_eyed
						remove_trait = blinded
					}
				}
			}
		}
	}
	cure_disease_decision = {
		only_playable = yes # performance reasons
		ai_check_interval = 12
		potential = {
			OR = {
				character_disease_trigger = yes
				trait = ill
				trait = sickly
			}
			prisoner = no
			NOR = {
				religion = faithless
				religion = blue_flame
			}
			not_casting = yes
		}
		allow = {
			OR = {
				AND = {
					wealth = 100
					piety = 50
				}
				AND = {
					OR = {
						has_character_modifier = rel_diversity_mod
						has_character_modifier = total_diversity_mod
						trait = patron_eldath
					}
					wealth = 50
					piety = 25
				}
			}
		}
		effect = {
			if = {
				limit = {
					OR = {
						has_character_modifier = rel_diversity_mod
						has_character_modifier = total_diversity_mod
						trait = patron_eldath
					}
				}
				wealth = -50
				piety = -25
			}
			else = {
				wealth = -100
				piety = -50
			}
			custom_tooltip = {
				text = ONEDISEASECURED
				hidden_tooltip = {
					remove_symptoms_effect = yes
					remove_trait = sickly
					remove_character_modifier = mild_illness
					remove_character_modifier = severe_illness
					remove_character_modifier = bedridden_illness
					#remove treatments
					remove_character_modifier = mystic_treatment_decent
					remove_character_modifier = mystic_treatment_poor
					remove_character_modifier = mystic_treatment_terrible
					remove_character_modifier = symptom_treatment_1
					remove_character_modifier = symptom_treatment_2
					remove_character_modifier = symptom_treatment_3
					remove_character_modifier = symptom_treatment_4
					remove_character_modifier = successful_treatment_1
					remove_character_modifier = successful_treatment_2
					remove_character_modifier = successful_treatment_3
					remove_character_modifier = failed_treatment_1
					remove_character_modifier = failed_treatment_2
					#to avoid unintended permanent regency
					remove_trait = sick_incapable
					if = {
						limit = {
							NOT = { has_dlc = "Reapers" }
						}
						remove_trait = ill
					}
					else_if = {
						limit = {
							has_dlc = "Reapers"
						}
						random_list = {
							40 = {
								modifier = {
									NOT = { trait = flu }
									factor = 0
								}
								remove_trait = flu
								clr_character_flag = manifest_flu
							}
							20 = {
								modifier = {
									NOT = { trait = dysentery }
									factor = 0
								}
								remove_trait = dysentery
							}
							10 = {
								modifier = {
									NOT = { trait = rabies }
									factor = 0
								}
								remove_trait = rabies
							}
							20 = {
								modifier = {
									NOT = { trait = has_measles }
									factor = 0
								}
								remove_trait = has_measles
							}
							40 = {
								modifier = {
									NOT = {
										trait = food_poisoning
									}
									factor = 0
								}
								remove_trait = food_poisoning
							}
							20 = {
								modifier = {
									NOT = { trait = gout }
									factor = 0
								}
								remove_trait = gout
							}
							40 = {
								modifier = {
									NOT = { trait = scurvy }
									factor = 0
								}
								remove_trait = scurvy
							}
							20 = {
								modifier = {
									NOT = { trait = lovers_pox }
									factor = 0
								}
								remove_trait = lovers_pox
							}
							5 = {
								modifier = {
									NOT = { trait = cancer }
									factor = 0
								}
								remove_trait = cancer
								clr_character_flag = manifest_cancer
							}
							10 = {
								modifier = {
									NOT = { trait = pneumonic }
									factor = 0
								}
								remove_trait = pneumonic
							}
							10 = {
								modifier = {
									NOT = { trait = syphilitic }
									factor = 0
								}
								remove_trait = syphilitic
							}
							5 = {
								modifier = {
									NOT = { trait = leper }
									factor = 0
								}
								remove_trait = leper
							}
							10 = {
								modifier = {
									NOT = { trait = has_tuberculosis}
									factor = 0
								}
								remove_trait = has_tuberculosis
							}
							10 = {
								modifier = {
									NOT = { trait = has_aztec_disease}
									factor = 0
								}
								remove_trait = has_aztec_disease
							}
							10 = {
								modifier = {
									NOT = { trait = has_small_pox}
									factor = 0
								}
								remove_trait = has_small_pox
							}
							10 = {
								modifier = {
									NOT = { trait = has_bubonic_plague}
									factor = 0
								}
								remove_trait = has_bubonic_plague
							}
							10 = {
								modifier = {
									NOT = { trait = has_typhus}
									factor = 0
								}
								remove_trait = has_typhus
							}
							10 = {
								modifier = {
									NOT = { trait = has_typhoid_fever}
									factor = 0
								}
								remove_trait = has_typhoid_fever
							}
						}
					}
				}
			}
		}
	}

	money_to_piety = {
		only_playable = yes
		ai_check_interval = 60
		potential = {
			NOR = {
				religion = adama
				religion = padhran
				religion = monster_pantheon
				religion = pagan
				religion = faithless
				religion = qukoku
			}
			not_casting = yes
		}
		allow = {
			scaled_wealth = { value = 0.25 min = 10 max = 250 }
			custom_tooltip = {
				text = MtPCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = money_to_piety }
						had_character_flag = {
							flag = money_to_piety
							months = 6
						}
					}
				}
			}
		}
		effect = {
			set_character_flag = money_to_piety
			character_event = { id = divrel.18 }
		}
		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 0.5
				NOT = { wealth = 75 }
			}
			modifier = {
				factor = 3
				trait = zealous
			}
			modifier = {
				factor = 0.1
				trait = cynical
			}
		}
	}

	dof_weak_abdicate = {
		ai_check_interval = 60

		only_playable = yes

		potential = {
			religion = deities_of_fury
			hidden_tooltip = {
				OR = {
					ai = no
					age = 35
				}
			}
			dof_is_weak_ruler = yes
			not_casting = yes
		}

		allow = {
			is_incapable = no
			player_heir = {
				dof_is_weak_ruler = no
			}
		}

		effect = {
			if = {
				limit = {
					tier = COUNT
				}
				player_heir = {
					piety = 50
				}
			}
			else_if = {
				limit = {
					tier = DUKE
				}
				player_heir = {
					piety = 100
				}
			}
			else_if = {
				limit = {
					tier = KING
				}
				player_heir = {
					piety = 200
				}
			}
			else_if = {
				limit = {
					tier = EMPEROR
				}
				player_heir = {
					piety = 300
				}
			}
			player_heir = {
				add_character_modifier = {
					name = dof_abdicated
					years = 2
				}
			}
			player_heir = {
				ROOT = {
					transfer_scaled_wealth = {
						from = THIS
						to = PREV
						value = all
					}
					any_artifact = {
						transfer_artifact = {
							from = PREV
							to = PREVPREV
						}
					}
					abdicate_to = PREV
					move_character = PREV
				}
			}
		}

		ai_will_do = {
			factor = 0.1
			modifier = {
				factor = 2
				trait = craven
			}
			modifier = {
				factor = 2
				trait = content
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 0.5
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 0.3
				player_heir = {
					NOT = { dynasty = ROOT }
				}
			}
		}
	}

	highmagic_celestial_army = {
		only_playable = yes
		is_mercenary = yes
		ai_check_interval = 100
		potential = {
			has_character_flag = has_high_mage
			is_inaccessible_or_incapable_trigger = no
			is_adult = yes
			trigger_if = {
				limit = { ai = no }

				has_character_flag = rituals_open
			}
		}
		allow = {
			piety = 400
			scaled_wealth = {
				value = 0.05
				min = 100
			}
			custom_tooltip = {
				text = CELESTIALARMY_CD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = celestial_army }
						had_character_flag = { flag = celestial_army years = 5 }
					}
				}
			}
			OR = {
				is_primary_war_defender = yes
				AND = {
					is_primary_war_attacker = yes
					any_current_enemy = {
						is_primary_war_defender = yes
						custom_tooltip = {
							text = enemy_of_seldarine
							OR = {
								trait = patron_malar
								trait = patron_ghaunadaur
								religion = ghaunadaur
								religion = vhaeraun
								religion = kiaransalee
								trait = patron_talos
								trait = patron_auppenser
								trait = patron_lolth
								religion = lolth_cult
								orc_religion_trigger = yes
								goblin_religion_trigger = yes
								religion = vaprak
								religion = infernal
								religion = abyssal_cult
								religion = entropy
								religion = faithless
								trait = unseelie_court
							}
						}
					}
				}
			}
		}
		effect = {
			clr_character_flag = celestial_army
			set_character_flag = celestial_army
			piety = -400
			scaled_wealth = {
				value = -0.05
				min = -100
			}
			set_character_flag = celestial_army_roll_flag
			high_magic_haywire_roll = yes
			if = {
				limit = {
					has_character_flag = high_magic_success
				}
				capital_scope = {
					ROOT = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							earmark = celestial_army
							troops = {
								warpriests = { 100 100 }
								mages_troops = { 100 100 }
								light_infantry = { 1250 1250 }
								heavy_infantry = { 500 500 }
								archers = { 500 500 }
							}
							disband_on_peace = yes
							attrition = 0
							maintenance_multiplier = 0
							can_toggle_looting = no
							cannot_inherit = yes
							reinforces = no
						}
					}
				}
				hidden_tooltip = {
					character_event = { id = seldarine.1 months = 12 }
				}
			}
			clr_character_flag = high_magic_success
		}
		ai_will_do = {
			factor = 0 # decisions with the "is_mercenary" will not be calculated from the script
		}
	}
	highmagic_reverend_one = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 24
		potential = {
			has_character_flag = has_high_mage
			OR = {
				is_primary_war_defender = yes
				AND = {
					is_primary_war_attacker = yes
					any_current_enemy = {
						is_primary_war_defender = yes
						custom_tooltip = {
							text = enemy_of_seldarine
							OR = {
								trait = patron_malar
								trait = patron_ghaunadaur
								religion = ghaunadaur
								religion = vhaeraun
								religion = kiaransalee
								trait = patron_talos
								trait = patron_auppenser
								trait = patron_lolth
								religion = lolth_cult
								orc_religion_trigger = yes
								goblin_religion_trigger = yes
								religion = vaprak
								religion = infernal
								religion = abyssal_cult
								religion = entropy
								religion = faithless
								trait = unseelie_court
							}
						}
					}
				}
			}
			is_inaccessible_or_incapable_trigger = no
			is_adult = yes
			OR = {
				ai = yes
				AND = {
					NOT = { not_casting = yes }
					has_character_flag = rituals_open
				}
			}
		}
		allow = {
			piety = 100
			scaled_wealth = {
				value = 0.01
				min = 50
			}
			custom_tooltip = {
				text = CELESTIALARMY_CD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = reverend_one_cd }
						had_character_flag = { flag = reverend_one_cd years = 5 }
					}
				}
			}
		}
		effect = {
			clr_character_flag = reverend_one_cd
			set_character_flag = reverend_one_cd
			piety = -100
			scaled_wealth = {
				value = -0.01
				min = -50
			}
			high_magic_haywire_roll = yes
			if = {
				limit = {
					has_character_flag = high_magic_success
				}
				create_character = {
					age = 500
					attributes = {
						martial = 7
					}
					trait = creature_elf
					trait = skilled_tactician
					trait = celibate
					trait = tb_sterile # Just in case
					trait = duelist
					random_traits = yes
					female = random
					religion = elven_pantheon
					culture = ROOT
					dynasty = none
					immortal_age = 30
				}
				new_character = {
					set_character_flag = reverend_one
					culture = einheriar
					add_character_modifier = {
						name = reverend_one_mod
						duration = -1
					}
					random_list = {
						1 = {
							remove_trait = skilled_tactician
							add_trait = brilliant_strategist
						}
						5 = {
						}
					}
					random_list = {
						1 = {
							add_trait = master_fighter
						}
						1 = {
							add_trait = master_ranger
						}
						1 = {
							add_trait = master_paladin
						}
						5 = {
							add_trait = expert_fighter
						}
						5 = {
							add_trait = expert_ranger
						}
						5 = {
							add_trait = expert_paladin
						}
						9 = {
							add_trait = journeyman_fighter
						}
						9 = {
							add_trait = journeyman_ranger
						}
						9 = {
							add_trait = journeyman_paladin
						}
					}
					random_list = {
						1 = {
							add_trait = aggressive_leader
						}
						1 = {
							add_trait = narrow_flank_leader
						}
						1 = {
							add_trait = defensive_leader
						}
						1 = {
							add_trait = experimenter
						}
						1 = {
							add_trait = flanker
						}
						1 = {
							add_trait = holy_warrior
						}
						1 = {
							add_trait = inspiring_leader
						}
						1 = {
							add_trait = trickster
						}
						1 = {
							add_trait = unyielding_leader
						}
						1 = {
							add_trait = winter_soldier
						}
						1 = {
							add_trait = light_foot_leader
						}
					}
					give_minor_title = title_commander
				}
			}
			hidden_tooltip = {
				character_event = { id = seldarine.6 months = 12 }
			}
			clr_character_flag = high_magic_success
		}
		ai_will_do = {
			factor = 0.5

			mult_modifier = {
				factor = 0
				free_court_slots <= 5
			}
			mult_modifier = {
				factor = 2
				can_grant_title = title_commander
			}
			mult_modifier = {
				factor = 0.02

				NOT = { can_grant_title = title_commander }
			}
		}
	}
	highmagic_nymphs_aura = {
		only_playable = yes
		ai_check_interval = 12
		potential = {
			has_character_flag = has_high_mage
			is_adult = yes
			is_inaccessible_or_incapable_trigger = no
			OR = {
				ai = yes
				AND = {
					NOT = { not_casting = yes }
					has_character_flag = rituals_open
				}
			}
		}
		allow = {
			piety = 50
			scaled_wealth = {
				value = 0.01
				min = 50
				max = 150
			}
			custom_tooltip = {
				text = CELESTIALARMY_CD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = nymph_aura_cd }
						had_character_flag = { flag = nymph_aura_cd years = 5 }
					}
				}
			}
			NOR = {
				trait = creature_hag
				trait = beautiful
			}
		}
		effect = {
			clr_character_flag = nymph_aura_cd
			set_character_flag = nymph_aura_cd
			piety = -50
			scaled_wealth = {
				value = -0.01
				min = -50
				max = -150
			}
			high_magic_haywire_roll = yes
			if = {
				limit = {
					has_character_flag = high_magic_success
					is_fair_congenital_trait_upgradeable_trigger = yes
				}
				upgrade_fair_congenital_trait_effect = yes
			}
			clr_character_flag = high_magic_success
		}
	}
	highmagic_baelnorn = {
		only_playable = yes
		ai_check_interval = 240
		potential = {
			has_character_flag = has_high_mage
			is_adult = yes
			is_inaccessible_or_incapable_trigger = no
			OR = {
				ai = yes
				AND = {
					NOT = { not_casting = yes }
					has_character_flag = rituals_open
				}
			}
		}
		allow = {
			piety = 250
			scaled_wealth = {
				value = 0.05
				min = 50
				max = 300
			}
			age = 500
			learning = 7
			trait = creature_elf
			is_undead = no
			NOR = {
				trait = immortal
				trait = avatar
			}
			custom_tooltip = {
				text = HIGHCLASSLEVEL
				OR = {
					trait = master_bard
					trait = master_wizard
					trait = master_sorcerer
					trait = master_warlock
					trait = master_cleric
					trait = master_druid
					trait = master_ranger
					trait = master_monk
					trait = master_fighter
					trait = master_barbarian
					trait = master_rogue
					trait = master_shadow
					trait = master_paladin
					trait = renowned_bard
					trait = renowned_wizard
					trait = renowned_sorcerer
					trait = renowned_warlock
					trait = renowned_cleric
					trait = renowned_druid
					trait = renowned_ranger
					trait = renowned_monk
					trait = renowned_fighter
					trait = renowned_barbarian
					trait = renowned_rogue
					trait = renowned_shadow
					trait = renowned_paladin
					trait = legendary_bard
					trait = legendary_wizard
					trait = legendary_sorcerer
					trait = legendary_warlock
					trait = legendary_cleric
					trait = legendary_druid
					trait = legendary_ranger
					trait = legendary_monk
					trait = legendary_fighter
					trait = legendary_barbarian
					trait = legendary_rogue
					trait = legendary_shadow
					trait = legendary_paladin
				}
			}
			is_pregnant = no
		}
		effect = {
			piety = -250
			scaled_wealth = {
				value = -0.05
				min = -50
				max = -300
			}
			high_magic_haywire_roll = yes
			if = {
				limit = {
					has_character_flag = high_magic_success
				}
				add_trait = lich_baelnorn
				add_trait = disinherited
				set_graphical_culture = lichelf
				player_heir = {
					if = {
						limit = {
							OR = {
								dynasty = ROOT
								is_close_relative = ROOT
							}
						}
						add_character_modifier = {
							name = mod_baelnorn_predecessor
							years = 10
						}
					}
				}
				abdicate = { move = no }
			}
			clr_character_flag = high_magic_success
		}
		ai_will_do = {
			factor = 0.01
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 2
				trait = charitable
			}
			modifier = {
				factor = 2
				trait = content
			}
		}
	}
	highmagic_worldweave = {
		only_playable = yes
		ai_check_interval = 60
		potential = {
			has_character_flag = has_high_mage
			is_adult = yes
			is_inaccessible_or_incapable_trigger = no
			OR = {
				ai = yes
				AND = {
					NOT = { not_casting = yes }
					has_character_flag = rituals_open
				}
			}
		}
		allow = {
			piety = 500
			scaled_wealth = {
				value = 0.1
				min = 300
			}
			custom_tooltip = {
				text = CELESTIALARMY_CD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = worldweave }
						had_character_flag = { flag = worldweave years = 5 }
					}
				}
			}
			custom_tooltip = {
				text = WORLDWEAVE_NUM
				any_demesne_province = {
					num_of_max_settlements < 7
				}
			}
		}
		effect = {
			piety = -500
			scaled_wealth = {
				value = -0.1
				min = -300
			}
			clr_character_flag = worldweave
			set_character_flag = worldweave
			high_magic_haywire_roll = yes
			if = {
				limit = {
					has_character_flag = high_magic_success
				}
				random_demesne_province = {
					limit = {
						num_of_max_settlements < 7
					}
					province_event = { id = seldarine.8 }
				}
			}
			clr_character_flag = high_magic_success
		}
		ai_will_do = {
			factor = 0.33
			modifier = {
				factor = 2
				trait = diligent
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}
	highmagic_mythal = {
		only_playable = yes
		ai_check_interval = 120
		potential = {
			has_character_flag = has_high_mage
			is_adult = yes
			is_inaccessible_or_incapable_trigger = no
			OR = {
				ai = yes
				AND = {
					NOT = { not_casting = yes }
					has_character_flag = rituals_open
				}
			}
		}
		allow = {
			piety = 350
			scaled_wealth = {
				value = 0.07
				min = 150
			}
			custom_tooltip = {
				text = CELESTIALARMY_CD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = mythal }
						had_character_flag = { flag = mythal years = 5 }
					}
				}
			}
			any_demesne_province = {
				NOT = {
					has_province_modifier = mythal_mod
				}
			}
		}
		effect = {
			piety = -350
			scaled_wealth = {
				value = -0.07
				min = -150
			}
			clr_character_flag = mythal
			set_character_flag = mythal
			high_magic_haywire_roll = yes
			if = {
				limit = {
					has_character_flag = high_magic_success
				}
				capital_scope = {
					add_province_modifier = {
						name = mythal_mod
						duration = -1
					}
				}
			}
			clr_character_flag = high_magic_success
		}
		ai_will_do = {
			factor = 0.1
			modifier = {
				factor = 2
				trait = diligent
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}
	seld_invite_fey = {
		ai_check_interval = 60
		only_playable = yes

		potential = {
			OR = {
				religion = elven_pantheon
				has_character_modifier = syncretic_elf
				religion = sylvan
				has_character_modifier = syncretic_sylvan
			}
			is_inaccessible_or_incapable_trigger = no
			not_casting = yes
		}

		allow = {
			piety = 30
			custom_tooltip = {
				text = INVITEFEY_CD
				OR = {
					NOT = { has_character_flag = invitefey }
					had_character_flag = { flag = invitefey years = 3 }
				}
			}
		}
		effect = {
			clr_character_flag = invitefey
			set_character_flag = invitefey
			piety = -30
			random_list = {
				1 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = sylvan
						culture = satyr
						female = random
						age = 35
						trait = creature_satyr
					}
				}
				1 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = sylvan
						culture = treant
						female = random
						age = 150
						trait = creature_treant
						immortal_age = 30
					}
				}
				1 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = sylvan
						culture = centaur
						female = random
						age = 35
						trait = creature_centaur
						immortal_age = 30
					}
				}
				1 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = sylvan
						culture = eladrin
						female = random
						age = 150
						trait = creature_elf
						trait = feytouched
						immortal_age = 30
					}
				}
				1 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = sylvan
						culture = hengeyokai
						female = random
						age = 35
						trait = creature_hengeyokai
						immortal_age = 30
					}
				}
			}
			new_character = {
				random_list = {
					1 = {
						religion = elven_pantheon
					}
					1 = {
						# empty!
					}
				}
				opinion = {
					modifier = invited_fey
					who = ROOT
					years = 5
				}
				character_event = { id = seldarine.11 }
			}
		}
		ai_will_do = {
			factor = 0.1

			mult_modifier = {
				factor = 0
				free_court_slots <= 5
			}
			mult_modifier = {
				factor = 4
				can_grant_title = title_commander
			}
		}
	}
	invite_high_mage = {
		ai_check_interval = 60
		only_playable = yes

		potential = {
			OR = {
				religion = elven_pantheon
				religion = eilistraee
			}
			higher_tier_than = DUKE
			NOT = { has_assigned_minor_title = title_high_mage }
			is_inaccessible_or_incapable_trigger = no
		}

		allow = {
			piety = 100
			scaled_wealth = {
				value = 0.2
				min = 250
				max = 1000
			}
			custom_tooltip = {
				text = NOHIGHMAGE
				any_courtier_or_vassal = {
					NOT = { has_character_flag = invited_selutaar }
				}
			}
		}
		effect = {
			piety = -100
			scaled_wealth = {
				value = -0.2
				min = -250
				max = -1000
			}
			random_list = {
				10 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = elven_pantheon
						culture = sun_elf
						female = random
						age = 550
						trait = creature_elf
						trait = scholarly_theologian
						attributes = { learning = 8 }
						immortal_age = 30
					}
				}
				10 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = elven_pantheon
						culture = moon_elf
						female = random
						age = 550
						trait = creature_elf
						trait = scholarly_theologian
						attributes = { learning = 8 }
						immortal_age = 30
					}
				}
				1 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = eilistraee
						culture = drow
						female = random
						age = 550
						trait = creature_drow
						trait = scholarly_theologian
						attributes = { learning = 8 }
						immortal_age = 30
					}
				}
			}
			new_character = {
				set_character_flag = invited_selutaar
				give_minor_title = title_high_mage
				random = {
					chance = 20
					remove_trait = scholarly_theologian
					add_trait = mastermind_theologian
				}
				random_list = {
					1 = {
						add_trait = legendary_sorcerer
					}
					3 = {
						add_trait = legendary_wizard
					}
					10 = {
						add_trait = renowned_sorcerer
					}
					30 = {
						add_trait = renowned_wizard
					}
					50 = {
						add_trait = master_sorcerer
					}
					150 = {
						add_trait = master_wizard
					}
				}
				ROOT = {
					character_event = { id = seldarine.10 }
				}
			}
		}
		ai_will_do = {
			factor = 0.05
		}
	}
	join_retreat = {
		only_playable = yes
		ai_check_interval = 120
		potential = {
			religion = elven_pantheon
			war = no
			NOT = {
				location = {
					region = evermeet_region
				}
			}
			NOT = { trait = lich }
			is_adult = yes
			is_inaccessible_or_incapable_trigger = no
			not_casting = yes
		}
		allow = {
			trait = creature_elf
			custom_tooltip = {
				text = ELVENEVERMEET
				e_evermeet = { # to avoid any_title
					any_de_jure_vassal_title = {
						region = evermeet_region
						holder_scope = {
							religion = elven_pantheon
							OR = {
								culture_group = high_elf_group
								culture_group = sylvan_elf_group
								culture_group = eladrin_group
							}
						}
					}
				}
			}
		}
		effect = {
			player_heir = {
				prestige = 30
				piety = 30
			}
			abdicate = yes
			add_trait = disinherited
			random_landed_title = {
				limit = {
					has_holder = yes
					capital_scope = { region = evermeet_region }
					holder_scope = {
						religion = elven_pantheon
						OR = {
							culture_group = high_elf_group
							culture_group = sylvan_elf_group
							culture_group = eladrin_group
						}
					}
				}
				holder_scope = {
					ROOT = { move_character = PREV }
				}
			}
		}
		ai_will_do = {
			factor = 0.05
			modifier = {
				factor = 3
				trait = content
			}
			modifier = {
				factor = 10
				trait = depressed
			}
			modifier = {
				factor = 3
				age = 700
			}
		}
	}

	take_vow_of_poverty = {
		ai_check_interval = 60
		only_playable = yes

		potential = {
			OR = {
				religion = triadic
				has_character_modifier = syncretic_triadic
			}
			NOT = { has_character_modifier = vow_of_poverty }
			not_casting = yes
		}

		allow = {
			is_adult = yes
			NOT = { trait = greedy }
			is_inaccessible_or_incapable_trigger = no
		}

		effect = {
			add_character_modifier = {
				name = vow_of_poverty
				duration = -1
			}
		}

		ai_will_do = {
			factor = 0.4
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 1.5
				trait = charitable
			}
			modifier = {
				factor = 0.5
				trait = cynical
			}
		}
	}
	remove_vow_of_poverty = {
		ai_check_interval = 60
		only_playable = yes

		potential = {
			has_character_modifier = vow_of_poverty
			OR = {
				religion = triadic
				has_character_modifier = syncretic_triadic
			}
			not_casting = yes
		}

		allow = {
			piety = 50
		}

		effect = {
			piety = -50
			remove_character_modifier =  vow_of_poverty
		}

		ai_will_do = {
			factor = 0.4
			modifier = {
				factor = 0.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = charitable
			}
			modifier = {
				factor = 2
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = cynical
			}
		}
	}

	pick_beast_totem = {
		ai_check_interval = 60
		is_high_prio = yes

		potential = {
			uthgardt_faith_trigger = yes
			NOT = { has_uthgardt_totem = yes }
			OR = {
				ai = no
				AND = {
					ai = yes
					OR = {
						independent = yes
						NOT = {
							any_liege = {
								uthgardt_faith_trigger = yes
							}
						}
						any_liege = {
							uthgardt_faith_trigger = yes
							has_uthgardt_totem = yes
						}
					}
				}
			}
			not_casting = yes
		}
		allow = {
			always = yes
		}
		effect = {
			character_event = { id = uthgar.1 }
		}
		ai_will_do = {
			factor = 1
		}
	}
	uthgar_emulate_beast = {
		ai_check_interval = 60
		only_playable = yes

		potential = {
			uthgardt_faith_trigger = yes
			has_uthgardt_totem = yes
			not_casting = yes
		}
		allow = {
			custom_tooltip = {
				text = EMUBEASTCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = emulated_beast }
						had_character_flag = {
							flag = emulated_beast
							years = 3
						}
					}
				}
			}
			piety = 30
		}
		effect = {
			piety = -30
			trigger_switch = {
				on_trigger = trait
				uthgar_black_lion = {
					add_character_modifier = {
						name = emulate_black_lion
						months = 18
					}
				}
				uthgar_black_raven = {
					add_character_modifier = {
						name = emulate_black_raven
						months = 18
					}
				}
				uthgar_blue_bear = {
					add_character_modifier = {
						name = emulate_blue_bear
						months = 18
					}
				}
				uthgar_elk = {
					add_character_modifier = {
						name = emulate_elk
						months = 18
					}
				}
				uthgar_gray_wolf = {
					add_character_modifier = {
						name = emulate_gray_wolf
						months = 18
					}
				}
				uthgar_great_worm = {
					add_character_modifier = {
						name = emulate_great_worm
						months = 18
					}
				}
				uthgar_griffon = {
					add_character_modifier = {
						name = emulate_griffon
						months = 18
					}
				}
				uthgar_red_tiger = {
					add_character_modifier = {
						name = emulate_red_tiger
						months = 18
					}
				}
				uthgar_sky_pony = {
					add_character_modifier = {
						name = emulate_sky_pony
						months = 18
					}
				}
				uthgar_thunderbeast = {
					add_character_modifier = {
						name = emulate_thunderbeast
						months = 18
					}
				}
				uthgar_tree_ghost = {
					add_character_modifier = {
						name = emulate_tree_ghost
						months = 18
					}
				}
			}
		}
	}
	uthgar_runemeet = { #festival
		ai_check_interval = 60
		only_playable = yes # for optimization
		potential = {
			uthgardt_faith_trigger = yes
			is_adult = yes
			not_casting = yes
		}
		allow = {
			custom_tooltip = {
				text = MUSTBEELEINT
				hidden_tooltip = {
					month == 9
				}
			}
			custom_tooltip = {
				text = UTHOBSRUNE
				hidden_tooltip = {
					NOT = { has_character_flag = attending_runemeet }
				}
			}
			custom_tooltip = {
				text = TORMCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = uth_runemeet }
						had_character_flag = {
							flag = uth_runemeet
							years = 3
						}
					}
				}
			}
		}
		effect = {
			clr_character_flag = uth_runemeet
			set_character_flag = uth_runemeet
			character_event = {
				id = uthgar.11
			}
			character_event = { # to purge the flags after a little bit
				id = uthgar.10 months = 2
			}
		}
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 0.25
				trait = cynical
			}
		}
	}
	mound_burial_decision = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 12
		potential = {
			has_character_flag = mound_burial
			NOT = { has_character_flag = performed_mound_burial }
			OR = {
				uthgardt_faith_trigger = yes
				has_character_modifier = syncretic_uthgardt
			}
			not_casting = yes
		}
		allow = {
			is_adult = yes
			in_command = no
			NOT = { trait = infirm }
			is_inaccessible_or_incapable_trigger = no
		}
		effect = {
			custom_tooltip = { text = mound_burial_custom_tooltip }
			hidden_tooltip = {
				character_event = { id = uthgar.28 }
				clr_character_flag = mound_burial
				set_character_flag = performed_mound_burial
			}
		}
		ai_will_do = {
			factor = 0.75
			modifier = {
				factor = 0.5
				trait = cynical
			}
			modifier = {
				factor = 2
				trait = zealous
			}
		}
	}
	uthgardt_ancestral_host = {
		only_playable = yes
		is_high_prio = yes
		is_mercenary = yes
		ai_check_interval = 10
		potential = {
			is_primary_war_defender = yes
			OR = {
				uthgardt_faith_trigger = yes
				has_character_modifier = syncretic_uthgardt
			}
			is_adult = yes
			not_casting = yes
		}
		allow = {
			piety = 70
			custom_tooltip = {
				text = ANCESTRALHOST_CD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = uthgardt_ancestral_host }
						had_character_flag = { flag = uthgardt_ancestral_host years = 3 }
					}
				}
			}
			is_inaccessible_or_incapable_trigger = no
		}
		effect = {
			clr_character_flag = uthgardt_ancestral_host
			set_character_flag = uthgardt_ancestral_host
			piety = -70
			capital_scope = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						earmark = ancestral_host
						troops = {
							undead_troops = { 1000 1000 }
						}
						disband_on_peace = yes
						attrition = 0
						maintenance_multiplier = 0
						can_toggle_looting = no
						cannot_inherit = yes
						reinforces = no
					}
				}
			}
			hidden_tooltip = {
				character_event = { id = uthgar.30 months = 12 }
			}
		}
		ai_will_do = {
			factor = 0 # decisions with the "is_mercenary" will not be calculated from the script
		}
	}
	uthgardt_ancestral_champion = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 24
		potential = {
			is_primary_war_defender = yes
			OR = {
				uthgardt_faith_trigger = yes
				has_character_modifier = syncretic_uthgardt
			}
			is_adult = yes
			not_casting = yes
		}
		allow = {
			piety = 35
			custom_tooltip = {
				text = ANCESTRALHOST_CD
				hidden_tooltip = {
					NOT = { had_character_flag = { flag = uthgardt_ancestral_champ years = 3 } }
				}
			}
			is_inaccessible_or_incapable_trigger = no
		}
		effect = {
			set_character_flag = uthgardt_ancestral_champ
			piety = -35
			create_character = {
				age = 50
				attributes = {
					martial = 7
				}
				trait = creature_human
				trait = undead
				trait = skilled_tactician
				random_traits = yes
				female = random
				religion = uthgardt_faith
				culture = undead_human
				dynasty = none
			}
			new_character = {
				set_character_flag = uthgar_champ
				culture = uthgardt
				add_character_modifier = {
					name = sacred_uthgar_ancestor
					duration = -1
				}
				random_list = {
					1 = {
						remove_trait = skilled_tactician
						add_trait = brilliant_strategist
					}
					10 = {
					}
				}
				random_list = {
					1 = {
						add_trait = expert_fighter
					}
					1 = {
						add_trait = expert_barbarian
					}
					5 = {
						add_trait = journeyman_fighter
					}
					5 = {
						add_trait = journeyman_barbarian
					}
					9 = {
						add_trait = trained_fighter
					}
					9 = {
						add_trait = trained_barbarian
					}
				}
				random_list = {
					1 = {
						add_trait = aggressive_leader
					}
					1 = {
						add_trait = narrow_flank_leader
					}
					1 = {
						add_trait = defensive_leader
					}
					1 = {
						add_trait = experimenter
					}
					1 = {
						add_trait = flanker
					}
					1 = {
						add_trait = holy_warrior
					}
					1 = {
						add_trait = inspiring_leader
					}
					1 = {
						add_trait = trickster
					}
					1 = {
						add_trait = unyielding_leader
					}
					1 = {
						add_trait = winter_soldier
					}
					1 = {
						add_trait = light_foot_leader
					}
				}
				give_minor_title = title_commander
				hidden_tooltip = {
					character_event = { id = uthgar.31 months = 16 }
				}
			}
		}
		ai_will_do = {
			factor = 0.5

			mult_modifier = {
				factor = 0
				free_court_slots <= 5
			}
			mult_modifier = {
				factor = 2
				can_grant_title = title_commander
			}
			mult_modifier = {
				factor = 0.02

				NOT = { can_grant_title = title_commander }
			}
		}
	}
	uthgardt_great_beast = {
		only_playable = yes
		ai_check_interval = 60
		potential = {
			uthgardt_faith_trigger = yes
			is_adult = yes
			not_casting = yes
		}
		allow = {
			piety = 450
			NOT = { trait = cynical }
			NOT = { trait = avatar }
			custom_tooltip = {
				text = GREATBEASTCD
				hidden_tooltip = {
					NOT = { has_character_flag = uthgreatbeast }
				}
			}
			has_uthgardt_totem = yes
			is_inaccessible_or_incapable_trigger = no
		}
		effect = {
			piety = -450
			set_character_flag = uthgreatbeast
			character_event = { id = uthgar.34 days = 10 }
		}
		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = humble
			}
		}
	}
	hold_uthgar_season_feast = { #festival
		only_playable = yes
		ai_check_interval = 3
		potential = {
			uthgardt_faith_trigger = yes
			NOR = {
				has_character_modifier = held_uthfeast_timer
				has_character_flag = holding_uthfeast
			}
			is_adult = yes
			has_dlc = "The Old Gods"
			not_casting = yes
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		allow = {
			war = no
			OR = {
				month == 3
				month == 6
				month == 12
			}
			wealth = 50
			custom_tooltip = {
				text = TORMCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = uth_seasonfest }
						had_character_flag = {
							flag = uth_seasonfest
							years = 3
						}
					}
				}
			}
			is_inaccessible_or_incapable_trigger = no
			custom_tooltip = {
				text = UNOCCUPIED_DEMESNE_TITLE
				hidden_tooltip = {
					any_demesne_title = {
						NOT = { higher_tier_than = count }
						is_occupied = no
					}
				}
			}
		}
		effect = {
			wealth = -50
			clr_character_flag = uth_seasonfest
			set_character_flag = uth_seasonfest
			set_character_flag = holding_uthfeast
			set_character_flag = recent_minor_decision
			set_character_flag = do_not_disturb
			hidden_tooltip = { character_event = { id = uthgar.36 days = 150 } } # Safety catch flag clearing
			custom_tooltip = {
				text = prepare_uthfeast
				hidden_tooltip = {
					character_event = { id = uthgar.37 }
				}
			}
			if = {
				limit = {
					has_dlc = "Reapers"
				}
				random = {
					chance = 40
					custom_tooltip = {
						text = capital_prospers_custom_tooltip
						hidden_tooltip = {
							capital_scope = {
								change_variable = { which = prosperity_value value = 8 }
							}
						}
					}
				}
			}
		}
		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0
				NOT = {
					wealth = 300
				}
			}
			modifier = {
				factor = 0
				trait = shy
			}
			modifier = {
				factor = 0
				NOT = { diplomacy = 10 }
			}
			modifier = {
				factor = 0
				has_character_flag = recent_minor_decision
				NOT = {
					had_character_flag = {
						flag = recent_minor_decision
						days = 730
					}
				}
			}
		}
	}

	raise_undead_units = {
		only_playable = yes
		is_high_prio = yes
		is_mercenary = yes
		ai_check_interval = 12

		potential = {
			OR = {
				AND = {
					is_undead = yes
					has_character_modifier = undead_realm_lord
					NOT = {
						has_dlc = "Legacy of Rome"
					}
				}
				religion = kiaransalee
				has_character_modifier = syncretic_kiaransalee
				religion = thasmudyanic
				has_character_modifier = syncretic_thasmudyanic
			}
			is_landed = yes
			not_casting = yes
		}
		allow = {
			war = yes
			piety = 125
		}
		effect = {
			piety = -125
			capital_scope = {
				PREV = {
					spawn_unit = {
						owner = ROOT
						province = PREV
						home = PREV
						troops = {
							undead_troops = { 1500 1500 }
						}
						attrition = 0
						disband_on_peace = yes
						maintenance_multiplier = 0
						can_toggle_looting = no
						is_looter = no
						reinforces = no
						cannot_inherit = yes
					}
				}
			}
		}
		ai_will_do = {
			factor = 0 # decisions with the "is_mercenary" will not be calculated from the script
		}
	}

	faithless_hard_work = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 132
		potential = {
			religion = faithless
			OR = {
				NOT = { has_character_flag = faithless_training }
				had_character_flag = {
					flag = faithless_training
					years = 10
				}
			}
			not_casting = yes
		}
		allow = {
			NOR = {
				trait = diligent
				has_severe_disability_trigger = yes
				is_sick_or_injured_trigger = yes
				AND = {
					trait = stressed
					trait = depressed
				}
			}
		}
		effect = {
			set_character_flag = faithless_training
			random_list = {
				1 = { #ideal outcome
					#nothing
				}
				1 = { #stress
					if = {
						limit = {
							NOT = { trait = stressed }
						}
						add_trait = stressed
					}
				}
				1 = { #depression
					if = {
						limit = {
							NOT = { trait = depressed }
						}
						add_trait = depressed
					}
				}
			}
			if = {
				limit = {
					trait = slothful
				}
				remove_trait = slothful
			}
			else = {
				add_trait = diligent
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.5
				trait = stressed
			}
			modifier = {
				factor = 0.5
				trait = depressed
			}
			modifier = {
				factor = 0.5
				health <= 4
			}
		}
	}
	form_mage_hunters = {
		is_high_prio = yes
		ai_check_interval = 50
		potential = {
			religion = entropy
			d_mage_hunters = {
				has_holder = no
			}
		}
		allow = {
			wealth = 500
			piety = 500
			higher_tier_than = DUKE
		}
		effect = {
			wealth = -500
			piety = -500
			create_character = {
				random_traits = yes
				dynasty = random
				female = random
				religion = entropy
				culture = ROOT
				age = 30
				trait = zealous
			}
			new_character = {
				random_list = {
					5 = {
						add_trait = trained_fighter
					}
					1 = {
						add_trait = journeyman_fighter
					}
					5 = {
						add_trait = trained_paladin
					}
					1 = {
						add_trait = journeyman_paladin
					}
					5 = {
						add_trait = trained_cleric
					}
					1 = {
						add_trait = journeyman_cleric
					}
				}
				grant_title = d_mage_hunters
				set_defacto_liege = ROOT
				any_player = {
					limit = {
						NOT = { character = ROOT }
					}
					narrative_event = { id = divrel.30 }
				}
			}
		}
		ai_will_do = {
			factor = 0.3
		}
	}
	
	create_direguard = {
		ai_check_interval = 40
		
		potential = {
			not_casting = yes
			OR = {
				religion = church_of_cyric
				has_character_modifier = syncretic_cyric
			}
			is_inaccessible_or_incapable_trigger = no
			NOT = { trait = infirm }
			is_adult = yes
			NOT = {
				any_artifact = {
					artifact_type = direguard_artf
				}
			}
		}
		allow = {
			piety = 90
			wealth = 80
		}
		effect = {
			add_artifact = direguard_artf
			piety = -90
			wealth = -80
		}
		ai_will_do = {
			factor = 0.3
		}
	}
	
	akadian_adaptability_decision = {
		ai_check_interval = 150
		
		potential = {
			trait = patron_akadi
			not_casting = yes
			is_inaccessible_or_incapable_trigger = no
		}
		
		allow = {
			piety = 35
			NOT = { has_character_modifier = akadian_adaptability }
		}
		
		effect = {
			piety = -35
			add_character_modifier = {
				name = akadian_adaptability
				years = 2 # too much?
			}
		}
	}
	
	primordial_summon_genie = {
		ai_check_interval = 48
		ai = no

		potential = {
			OR = {
				religion = primordial
				has_character_modifier = syncretic_primordial
			}
			not_casting = yes
		}

		allow = {
			NOT = { has_character_modifier = summoned_genie }
			piety = 110
			wealth = 30
			is_adult = yes
			NOT = { trait = infirm }
			is_inaccessible_or_incapable_trigger = no
		}

		effect = {
			hidden_tooltip = {
				if = {
					limit = {
						OR = {
							trait = patron_grumbar
							culture = dao
						}
					}
					set_character_flag = binding_dao
				}
				else_if = {
					limit = {
						OR = {
							trait = patron_istishia
							culture = marid
						}
					}
					set_character_flag = binding_marid
				}
				else_if = {
					limit = {
						OR = {
							trait = patron_akadi
							culture = djinn
						}
					}
					set_character_flag = binding_djinn
				}
				else_if = {
					limit = {
						OR = {
							culture = efreet
							trait = patron_kossuth
							trait = patron_bazim_gorag
							trait = patron_achazar
							trait = patron_rorn
						}
					}
					set_character_flag = binding_efreet
				}
				else = {
					random_list = {
						1 = {
							set_character_flag = binding_dao
						}
						1 = {
							set_character_flag = binding_marid
						}
						1 = {
							set_character_flag = binding_djinn
						}
						1 = {
							set_character_flag = binding_efreet
						}
					}
				}
			}
			piety = -110
			wealth = -30
			add_character_modifier = {
				name = summoned_genie
				months = 60
			}
			character_event = { id = wizinit.13 }
		}

		ai_will_do = {
			factor = 0.5
		}
	}
	
	create_treant = {
		ai = no

		potential = {
			not_casting = yes
			trait = patron_mielikki
			prisoner = no
		}
		allow = {
			piety = 60
			scaled_wealth = 0.25
			is_inaccessible_or_incapable_trigger = no
			NOT = { trait = infirm }
		}
		effect = {
			piety = -40
			scaled_wealth = -0.25
			hidden_tooltip = {
				spawn_mielikki_treant_effect = yes
			}
			character_event = { id = frmaint.54 }
		}
		ai_will_do = {
			factor = 0
		}
	}
	
	grumbar_earth_stability_decision = {
		ai_check_interval = 150
		
		potential = {
			OR = {
				trait = patron_grumbar
				religion = geomancy
			}
			not_casting = yes
			is_inaccessible_or_incapable_trigger = no
		}
		
		allow = {
			piety = 35
			NOT = { has_character_modifier = earth_stability }
		}
		
		effect = {
			piety = -35
			add_character_modifier = {
				name = earth_stability
				years = 2 # too much?
			}
		}
	}
	
	kossuth_burn_away_illness = {
		ai_check_interval = 150
		only_playable = yes
		
		potential = {
			prisoner = no
			OR = {
				trait = patron_kossuth
				religion = kossuth
			}
			NOR = {
				trait = wounded
				trait = severely_injured
			}
			not_casting = yes
		}
		
		allow = {
			OR = {
				character_disease_trigger = yes
				trait = ill
				trait = sickly
			}
			piety = 70
		}
		
		effect = {
			custom_tooltip = {
				text = ONEDISEASECURED
				hidden_tooltip = {
					remove_symptoms_effect = yes
					remove_trait = sickly
					remove_character_modifier = mild_illness
					remove_character_modifier = severe_illness
					remove_character_modifier = bedridden_illness
					#remove treatments
					remove_character_modifier = mystic_treatment_decent
					remove_character_modifier = mystic_treatment_poor
					remove_character_modifier = mystic_treatment_terrible
					remove_character_modifier = symptom_treatment_1
					remove_character_modifier = symptom_treatment_2
					remove_character_modifier = symptom_treatment_3
					remove_character_modifier = symptom_treatment_4
					remove_character_modifier = successful_treatment_1
					remove_character_modifier = successful_treatment_2
					remove_character_modifier = successful_treatment_3
					remove_character_modifier = failed_treatment_1
					remove_character_modifier = failed_treatment_2
					#to avoid unintended permanent regency
					remove_trait = sick_incapable
					if = {
						limit = {
							NOT = { has_dlc = "Reapers" }
						}
						remove_trait = ill
					}
					else_if = {
						limit = {
							has_dlc = "Reapers"
						}
						random_list = {
							40 = {
								modifier = {
									NOT = { trait = flu }
									factor = 0
								}
								remove_trait = flu
								clr_character_flag = manifest_flu
							}
							20 = {
								modifier = {
									NOT = { trait = dysentery }
									factor = 0
								}
								remove_trait = dysentery
							}
							10 = {
								modifier = {
									NOT = { trait = rabies }
									factor = 0
								}
								remove_trait = rabies
							}
							20 = {
								modifier = {
									NOT = { trait = has_measles }
									factor = 0
								}
								remove_trait = has_measles
							}
							40 = {
								modifier = {
									NOT = {
										trait = food_poisoning
									}
									factor = 0
								}
								remove_trait = food_poisoning
							}
							20 = {
								modifier = {
									NOT = { trait = gout }
									factor = 0
								}
								remove_trait = gout
							}
							40 = {
								modifier = {
									NOT = { trait = scurvy }
									factor = 0
								}
								remove_trait = scurvy
							}
							20 = {
								modifier = {
									NOT = { trait = lovers_pox }
									factor = 0
								}
								remove_trait = lovers_pox
							}
							5 = {
								modifier = {
									NOT = { trait = cancer }
									factor = 0
								}
								remove_trait = cancer
								clr_character_flag = manifest_cancer
							}
							10 = {
								modifier = {
									NOT = { trait = pneumonic }
									factor = 0
								}
								remove_trait = pneumonic
							}
							10 = {
								modifier = {
									NOT = { trait = syphilitic }
									factor = 0
								}
								remove_trait = syphilitic
							}
							5 = {
								modifier = {
									NOT = { trait = leper }
									factor = 0
								}
								remove_trait = leper
							}
							10 = {
								modifier = {
									NOT = { trait = has_tuberculosis}
									factor = 0
								}
								remove_trait = has_tuberculosis
							}
							10 = {
								modifier = {
									NOT = { trait = has_aztec_disease}
									factor = 0
								}
								remove_trait = has_aztec_disease
							}
							10 = {
								modifier = {
									NOT = { trait = has_small_pox}
									factor = 0
								}
								remove_trait = has_small_pox
							}
							10 = {
								modifier = {
									NOT = { trait = has_bubonic_plague}
									factor = 0
								}
								remove_trait = has_bubonic_plague
							}
							10 = {
								modifier = {
									NOT = { trait = has_typhus}
									factor = 0
								}
								remove_trait = has_typhus
							}
							10 = {
								modifier = {
									NOT = { trait = has_typhoid_fever}
									factor = 0
								}
								remove_trait = has_typhoid_fever
							}
						}
					}
				}
			}
			add_trait = wounded
		}
		ai_will_do = {
			factor = 0.5
		}
	}
	
	vecna_forbidden_knowledge = {
		ai_check_interval = 300
		only_playable = yes
		
		potential = {
			trait = patron_vecna
			prisoner = no
			is_inaccessible_or_incapable_trigger = no
		}
		
		allow = {
			NOR = {
				health < 2
				has_character_modifier = vecna_forbidden_knowledge_mod
			}
			piety = 50
		}
		
		effect = {
			piety = 50
			add_character_modifier = {
				name = vecna_forbidden_knowledge_mod
				years = 3
			}
		}
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	summon_divine_minion = { # Character
		only_playable = yes
		ai_check_interval = 48
		potential = {
			religion = mulhorandi_faith
			not_casting = yes
		}
		allow = {
			piety = 150
			custom_tooltip = {
				text = DIVINEMINIONCD
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = divine_minion_cd }
						had_character_flag = {
							flag = divine_minion_cd
							years = 5
						}
					}
				}
			}
			prisoner = no
			is_incapable = no
		}
		effect = {
			clr_character_flag = divine_minion_cd
			set_character_flag = divine_minion_cd
			create_character = {
				age = 450
				trait = creature_celestial
				trait = brave
				trait = zealous
				trait = holy_warrior
				random_traits = yes
				female = random
				religion = mulhorandi_faith
				culture = neter
				dynasty = culture
				immortal_age = 30
			}
			new_character = {
				if = {
					limit = {
						PREV = { trait = patron_horus_re }
					}
					add_trait = patron_horus_re
				}
				else_if = {
					limit = {
						PREV = { trait = patron_isis }
					}
					add_trait = patron_isis
				}
				else_if = {
					limit = {
						PREV = { trait = patron_anhur }
					}
					add_trait = patron_anhur
				}
				else_if = {
					limit = {
						PREV = { trait = patron_sharess }
					}
					add_trait = patron_sharess
				}
				else_if = {
					limit = {
						PREV = { trait = patron_vergadain }
					}
					add_trait = patron_vergadain
				}
				else_if = {
					limit = {
						PREV = { trait = patron_geb }
					}
					add_trait = patron_geb
				}
				else_if = {
					limit = {
						PREV = { trait = patron_hathor }
					}
					add_trait = patron_hathor
				}
				else_if = {
					limit = {
						PREV = { trait = patron_nephthys }
					}
					add_trait = patron_nephthys
				}
				else_if = {
					limit = {
						PREV = { trait = patron_osiris }
					}
					add_trait = patron_osiris
				}
				else_if = {
					limit = {
						PREV = { trait = patron_thoth }
					}
					add_trait = patron_thoth
				}
			}
			character_event = { id = generalmisc.52 }
		}
		ai_will_do = {
			factor = 0.1

			mult_modifier = {
				factor = 0
				free_court_slots <= 5
			}
			mult_modifier = {
				factor = 4
				can_grant_title = title_commander
			}
		}
	}

	hire_planewalker = { # sic
		ai = no

		potential = {
			not_casting = yes
			religion = interloper
		}
		allow = {
			piety = 40
			scaled_wealth = 0.25
			is_inaccessible_or_incapable_trigger = no
			NOT = { trait = infirm }
		}
		effect = {
			piety = -40
			scaled_wealth = -0.25
			hidden_tooltip = {
				spawn_good_planewalker_effect = yes
			}
			character_event = { id = frmaint.54 }
		}
		ai_will_do = {
			factor = 0
		}
	}
}

targeted_decisions = {

	

	possess_prisoner = {
		ai_target_filter = home_court
		only_playable = yes
		ai_check_interval = 360

		from_potential = {
			OR = {
				religion = abyssal_cult
				has_character_modifier = syncretic_abyssal
			}
			is_adult = yes
			is_dumb_trigger = no
		}

		potential = {
			prisoner = yes
			host = { character = FROM }
			NOR = {
				trait = creature_fiend
				trait = creature_construct
				trait = creature_celestial
				trait = creature_genie
				is_undead = yes
				trait = construct
				trait = creature_monster
			}
			hidden_tooltip = {
				ai = yes
			}
		}

		allow = {
			NOT = { trait = possessed }
			FROM = {
				piety = 70
				is_inaccessible_or_incapable_trigger = no
			}
		}

		effect = {
			FROM = {
				piety = -70
				if = {
					limit = {
						trait = kind
					}
					remove_trait = kind
				}
				random = {
					chance = 65
					add_trait = cruel
				}
			}
			add_trait = possessed
			opinion = {
				modifier = opinion_tortured_me
				who = FROM
			}
			imprison = no
		}
		ai_will_do = {
			factor = 0.3
		}
	}

	steal_knowledge = {
		ai_target_filter = home_court
		only_playable = yes
		ai_check_interval = 360

		from_potential = {
			OR = {
				religion = illithid_pantheon
				has_character_modifier = syncretic_illithid
			}
			is_adult = yes
			is_dumb_trigger = no
		}

		potential = {
			prisoner = yes
			host = { character = FROM }
			NOR = {
				race_is_illithid = yes
				trait = creature_construct
				is_undead = yes
				trait = construct
				trait = creature_monster
				custom_tooltip = {
					text = is_derro
					AND = {
						trait = creature_dwarf
						gfx_culture_scope = {
							culture = derro
						}
					}
				}
			}
			hidden_tooltip = {
				ai = yes
			}
		}

		allow = {
			FROM = {
				piety = 200
				NOR = {
					has_character_modifier = stolen_thoughts_diplo
					has_character_modifier = stolen_thoughts_intrigue
					has_character_modifier = stolen_thoughts_learn
					has_character_modifier = stolen_thoughts_martial
					has_character_modifier = stolen_thoughts_steward
				}
				is_inaccessible_or_incapable_trigger = no
			}
		}

		effect = {
			FROM = {
				piety = -200
				if = {
					limit = {
						trait = kind
					}
					remove_trait = kind
				}
				random = {
					chance = 65
					add_trait = cruel
				}
				random_list = {
					1 = {
						add_character_modifier = {
							name = stolen_thoughts_diplo
							years = 2
						}
					}
					1 = {
						add_character_modifier = {
							name = stolen_thoughts_martial
							years = 2
						}
					}
					1 = {
						add_character_modifier = {
							name = stolen_thoughts_steward
							years = 2
						}
					}
					1 = {
						add_character_modifier = {
							name = stolen_thoughts_intrigue
							years = 2
						}
					}
					1 = {
						add_character_modifier = {
							name = stolen_thoughts_learn
							years = 2
						}
					}
				}
			}
			opinion = {
				modifier = opinion_invaded_my_mind
				who = FROM
			}
		}
		ai_will_do = {
			factor = 0.3
		}
	}

	shatter_mind = {
		ai_target_filter = home_court
		only_playable = yes
		ai_check_interval = 360

		from_potential = {
			religion = illithid_pantheon
			age = 16
			is_dumb_trigger = no
		}

		potential = {
			prisoner = yes
			host = { character = FROM }
			NOR = {
				race_is_illithid = yes
				trait = creature_construct
				is_undead = yes
				trait = construct
				trait = creature_monster
				custom_tooltip = {
					text = is_derro
					AND = {
						trait = creature_dwarf
						gfx_culture_scope = {
							culture = derro
						}
					}
				}
			}
			hidden_tooltip = {
				ai = yes
			}
		}

		allow = {
			NOT = { trait = lunatic }
			FROM = { 
				piety = 70
				is_inaccessible_or_incapable_trigger = no
			}
		}

		effect = {
			FROM = {
				piety = -70
				if = {
					limit = {
						trait = kind
					}
					remove_trait = kind
				}
				random = {
					chance = 65
					add_trait = cruel
				}
			}
			random_list = {
				1 = {
					modifier = {
						factor = 0
						is_smart_congenital_trigger = no
					}
					downgrade_smart_congenital_trait_effect = yes
				}
				10 = {
					modifier = {
						factor = 0
						NOT = { trait = diligent }
					}
					remove_trait = diligent
				}
				10 = {
					modifier = {
						factor = 0
						NOT = { trait = just }
					}
					remove_trait = just
				}
				20 = {
					modifier = {
						factor = 0
						NOR = {
							trait = just
							trait = arbitrary
						}
					}
					add_trait = arbitrary
				}
				15 = {
					modifier = {
						factor = 0
						NOT = { trait = brave }
					}
					remove_trait = brave
				}
				20 = {
					modifier = {
						factor = 0
						NOR = {
							trait = brave
							trait = craven
						}
					}
					add_trait = craven
				}
				20 = {
					modifier = {
						factor = 0
						NOR = {
							trait = trusting
							trait = paranoid
						}
					}
					add_trait = paranoid
				}
				5 = {
					add_trait = lunatic
				}
				1 = {
					change_diplomacy = -1
				}
				1 = {
					change_martial = -1
				}
				1 = {
					change_stewardship = -1
				}
				1 = {
					change_learning = -1
				}
			}
			opinion = {
				modifier = opinion_invaded_my_mind
				who = FROM
			}
		}
		ai_will_do = {
			factor = 0.3
		}
	}
	
	spread_madness = {
		ai_target_filter = home_court
		only_playable = yes
		ai_check_interval = 360

		from_potential = {
			OR = {
				religion = church_of_cyric
				has_character_modifier = syncretic_cyric
			}
			age = 16
		}

		potential = {
			prisoner = yes
			host = { character = FROM }
			NOR = {
				trait = lunatic
				trait = creature_construct
				is_undead = yes
				trait = construct
				trait = creature_monster
				custom_tooltip = {
					text = is_derro
					AND = {
						trait = creature_dwarf
						gfx_culture_scope = {
							culture = derro
						}
					}
				}
			}
			hidden_tooltip = {
				ai = yes
			}
		}

		allow = {
			NOT = { trait = lunatic }
			FROM = { 
				piety = 70
				is_inaccessible_or_incapable_trigger = no
			}
		}

		effect = {
			FROM = {
				piety = -70
				if = {
					limit = {
						trait = kind
					}
					remove_trait = kind
				}
				random = {
					chance = 65
					add_trait = cruel
				}
			}
			add_trait = lunatic
			opinion = {
				modifier = opinion_tortured_me
				who = FROM
			}
		}
		ai_will_do = {
			factor = 0.3
		}
	}

	extract_secret = {
		ai_target_filter = home_court
		only_playable = yes
		ai_check_interval = 360

		from_potential = {
			OR = {
				religion = illithid_pantheon
				has_character_modifier = syncretic_illithid
			}
			age = 16
			is_dumb_trigger = no
		}

		potential = {
			prisoner = yes
			host = { character = FROM }
			NOR = {
				race_is_illithid = yes
				trait = creature_construct
				is_undead = yes
				trait = construct
				trait = creature_monster
			}
			hidden_tooltip = {
				ai = yes
			}
		}

		allow = {
			NOT = { owes_favor_to = FROM }
			FROM = { 
				piety = 150 
				is_inaccessible_or_incapable_trigger = no
			}
		}

		effect = {
			FROM = {
				piety = -150
				if = {
					limit = {
						trait = kind
					}
					remove_trait = kind
				}
				random = {
					chance = 25
					add_trait = cruel
				}
			}
			FROM = { add_favor = ROOT }
			imprison = no
			opinion = {
				modifier = opinion_invaded_my_mind
				who = FROM
			}
		}
		ai_will_do = {
			factor = 0.3
		}
	}

	take_on_pain = {
		ai_check_interval = 120
		filter = realm
		ai_target_filter = home_court

		from_potential = {
			trait = patron_ilmater
		}

		potential = {
			has_injury_trigger = yes
		}

		allow = {
			FROM = {
				custom_tooltip = {
					text = ILMWOUND1
					hidden_tooltip = {
						has_injury_trigger = no
					}
				}
			}
		}

		effect = {
			custom_tooltip = {
				text = ILMWOUND2
				hidden_tooltip = {
					FROM = {
						add_character_modifier = {
							name = took_wounds
							months = 16
						}
					}
					if = {
						limit = {
							trait = severely_injured
						}
						remove_trait = severely_injured
						remove_character_modifier = badly_bruised
						remove_character_modifier = black_eye
						remove_character_modifier = swollen_ankle
						remove_character_modifier = swollen_wrist
						remove_character_modifier = sore_muscles
						remove_character_modifier = cracked_ribs
						remove_character_modifier = concussion
						FROM = {
							add_trait_severely_injured_effect = yes
							piety = 75
						}
					}
					else_if = {
						limit = {
							trait = wounded
						}
						remove_trait = wounded
						remove_character_modifier = badly_bruised
						remove_character_modifier = black_eye
						remove_character_modifier = swollen_ankle
						remove_character_modifier = swollen_wrist
						remove_character_modifier = sore_muscles
						remove_character_modifier = cracked_ribs
						remove_character_modifier = concussion
						FROM = {
							add_trait_wounded_effect = yes
							piety = 30
						}
					}
					opinion = {
						modifier = healed_me
						who = FROM
						years = 2
					}
					character_event = { id = divrel.10 }
				}
			}
		}

		ai_will_do = {
			factor = 0.05
			modifier = {
				factor = 2
				FROM = { trait = kind }
			}
			modifier = {
				factor = 2
				FROM = { is_friend = ROOT }
			}
			modifier = {
				factor = 0
				FROM = { is_foe = ROOT }
			}
		}

	}

	hoar_declare_rival = {
		ai_check_interval = 240
		ai_target_filter = independent_rulers
		filter = all
		only_playable = yes

		from_potential = {
			trait = patron_hoar
			OR = {
				opinion = {
					who = ROOT
					value <= 50
				}
				ai = no
			}
			not_casting = yes
		}

		potential = {
			is_within_diplo_range = FROM
			NOT = { ROOT = { is_rival = FROM } }
			OR = {
				ai = yes
				opinion = {
					who = FROM
					value <= 50
				}
			}
		}

		allow = {
			FROM = {
				piety = 35
				custom_tooltip = {
					text = HOARRIVCD
					hidden_tooltip = {
						NOT = { has_character_modifier = hoarriv }
					}
				}
				is_adult = yes
				prisoner = no
				NOT = { trait = incapable }
				NOT = { trait = infirm }
				NOT = { is_inaccessible_trigger = yes }
			}
			is_adult = yes
			NOT = { trait = infirm }
			is_inaccessible_or_incapable_trigger = no
		}

		effect = {
			FROM = { piety = -30 }
			FROM = { add_rival = ROOT }
			FROM = {
				add_character_modifier = {
					name = hoarriv
					years = 3
				}
			}
			character_event = { id = divrel.11 }
		}

		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 0.5
				FROM = { trait = kind }
			}
			modifier = {
				factor = 2
				FROM = { trait = wroth }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = trusting }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = content }
			}
		}
	}

	revenance = {
		ai_check_interval = 240
		filter = rivals
		ai_target_filter = rivals
		only_playable = yes

		from_potential = {
			trait = patron_hoar
			not_casting = yes
		}

		potential = {
			any_kill_list_character = {
				count = 1
			}
		}

		allow = {
			FROM = {
				piety = 350
				is_adult = yes
				NOT = { trait = infirm }
				is_inaccessible_or_incapable_trigger = no
			}
			is_adult = yes
			NOT = { trait = infirm }
			is_inaccessible_or_incapable_trigger = no
			custom_tooltip = {
				text = REVENANCED
				hidden_tooltip = {
					NOT = { has_character_modifier = revenanced }
				}
			}
		}

		effect = {
			FROM = { piety = -350 }
			FROM = {
				add_character_modifier = {
					name = revenanced
					years = 10
				}
			}
			character_event = { id = divrel.12 }
		}

		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 2
				FROM = { trait = wroth }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = kind }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = content }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = slothful }
			}
			modifier = {
				factor = 2
				FROM = { trait = zealous }
			}
		}
	}

	# "Demand Religious Conversion"
	# Note: need to disable DEMAND_RELIGIOUS_CONVERSION_INTERACTION_ENABLED in defines.lua
	# - Split in 2 decisions as there is no ai_target_filter for both direct vassals and courtiers.

	demand_courtier_religious_conversion = {
		ai_target_filter = home_court
		ai_check_interval = 48
		filter = home_court
		only_playable = yes
		from_potential = {
			trait = zealous
			NOR = {
				government = democratic_feudal_government
				government = celestial_government
				government = celestial_bureaucracy
				government = nomadic_tribal_government
			}
			is_landed = yes
			OR = {
				is_evil_religion = yes
				religion = ten_thousand_gods
				religion = qisma
				religion = pantheist_league
				religion = kahin
			}
		}
		potential = {
			NOT = { religion = FROM }
			vassal_of = FROM
			is_ruler = no
		}
		allow = {
			# opinion = { who = FROM value = 5 }
			NOT = { controls_religion = yes }
			NOT = { trait = zealous }
			OR = {
				FROM = { is_reformed_religion = PREV }
				can_change_faith_trigger = yes
			}
			NOT = { has_character_flag = ai_flag_refuse_conversion }
			is_incapable = no
			is_adult = yes
		}
		effect = {
			# Fire any event that would normally be fired by the on_action on_vassal_accepts_religious_conversion
			custom_tooltip = {
				text = "demand_religious_conversion_tooltip"
				hidden_tooltip = {
					FROM = {
						character_event = { id = conv.1 }
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_acceptance = {
			factor = 0	# The base score
			yes_threshold = 0
			show_maybe_for_human = yes

			additive_modifier = {			# Custom localizations are located in traits_religious
				value = -20
				localisation_key = AIREASON_BASE_RELUCTANCE
				always = yes
				}
			additive_modifier = {
				value = 25
				trait = cynical
				}
			additive_modifier = {
				value = 5
				trait = arbitrary
				}
			additive_modifier = {
				value = 5
				trait = cruel
				}
			additive_modifier = {
				value = 5
				trait = lunatic
				}
			additive_modifier = {
				value = 5
				trait = content
				}
			additive_modifier = {
				value = 5
				trait = trusting
				}
			additive_modifier = {
				value = 5
				trait = craven
				}
			additive_modifier = {
				value = 5
				trait = deceitful
				}
			additive_modifier = {
				value = 5
				trait = envious
				}
			additive_modifier = {
				value = 5
				trait = greedy
				}
			additive_modifier = {
				value = 5
				trait = slothful
				}
			additive_modifier = {
				value = 5
				is_dumb_non_congenital_trigger = yes
				}
			additive_modifier = {
				value = 5
				trait = dim
				}
			additive_modifier = {
				value = 10
				trait = dumb
				}
			additive_modifier = {
				value = 15
				trait = slow
				}
			additive_modifier = {
				value = 20
				trait = idiot
				}
			additive_modifier = {
				value = 25
				trait = imbecile
				}
			additive_modifier = {
				value = 5
				trait = pagan_branch_1
				}
			additive_modifier = {
				value = 10
				trait = cannibal_trait
				}
			additive_modifier = {
				value = 10
				trait = impaler
				}
			additive_modifier = {
				value = -20
				trait = brave
				}
			additive_modifier = {
				value = -5
				trait = paranoid
				}
			additive_modifier = {
				value = -5
				trait = just
				}
			additive_modifier = {
				value = -5
				trait = proud
				}
			additive_modifier = {
				value = -5
				trait = wroth
				}
			additive_modifier = {
				value = -5
				trait = stubborn
				}
			additive_modifier = {
				value = -5
				trait = kind
				}
			additive_modifier = {
				value = -5
				trait = humble
				}
			additive_modifier = {
				value = -5
				trait = patient
				}
			additive_modifier = {
				value = -5
				trait = charitable
				}
			additive_modifier = {
				value = -5
				trait = diligent
				}
			additive_modifier = {
				value = -5
				trait = temperate
				}
			additive_modifier = {
				value = -5
				trait = pagan_branch_3
				}
			additive_modifier = {
				value = -10
				trait = monk
				}
			additive_modifier = {
				value = -10
				trait = nun
				}
			additive_modifier = {
				value = -5
				trait = warlock
				}
			additive_modifier = {
				value = -10
				trait = trained_warlock
				}
			additive_modifier = {
				value = -15
				trait = journeyman_warlock
				}
			additive_modifier = {
				value = -20
				trait = expert_warlock
				}
			additive_modifier = {
				value = -25
				trait = master_warlock
				}
			additive_modifier = {
				value = -30
				trait = renowned_warlock
				}
			additive_modifier = {
				value = -35
				trait = legendary_warlock
				}
			additive_modifier = {
				value = -5
				trait = cleric
				}
			additive_modifier = {
				value = -10
				trait = trained_cleric
				}
			additive_modifier = {
				value = -15
				trait = journeyman_cleric
				}
			additive_modifier = {
				value = -20
				trait = expert_cleric
				}
			additive_modifier = {
				value = -25
				trait = master_cleric
				}
			additive_modifier = {
				value = -30
				trait = renowned_cleric
				}
			additive_modifier = {
				value = -35
				trait = legendary_cleric
				}
			additive_modifier = {
				value = -5
				trait = paladin
				}
			additive_modifier = {
				value = -10
				trait = trained_paladin
				}
			additive_modifier = {
				value = -15
				trait = journeyman_paladin
				}
			additive_modifier = {
				value = -20
				trait = expert_paladin
				}
			additive_modifier = {
				value = -25
				trait = master_paladin
				}
			additive_modifier = {
				value = -30
				trait = renowned_paladin
				}
			additive_modifier = {
				value = -35
				trait = legendary_paladin
				}
			additive_modifier = {
				value = -5
				trait = druid
				}
			additive_modifier = {
				value = -10
				trait = trained_druid
				}
			additive_modifier = {
				value = -15
				trait = journeyman_druid
				}
			additive_modifier = {
				value = -20
				trait = expert_druid
				}
			additive_modifier = {
				value = -25
				trait = master_druid
				}
			additive_modifier = {
				value = -30
				trait = renowned_druid
				}
			additive_modifier = {
				value = -35
				trait = legendary_druid
				}
			additive_modifier = {
				value = -5
				trait = class_monk
				}
			additive_modifier = {
				value = -10
				trait = trained_monk
				}
			additive_modifier = {
				value = -15
				trait = journeyman_monk
				}
			additive_modifier = {
				value = -20
				trait = expert_monk
				}
			additive_modifier = {
				value = -25
				trait = master_monk
				}
			additive_modifier = {
				value = -30
				trait = renowned_monk
				}
			additive_modifier = {
				value = -35
				trait = legendary_monk
				}
			additive_modifier = {
				value = -20
				trait = sympathy_many
				}
			additive_modifier = {
				value = -5
				localisation_key = sympathy_for_good_alignment_reason
				OR = {
				trait = sympathy_good_human_pantheon_group
				trait = sympathy_wild_human_pantheon_group
				trait = sympathy_qismaite_group
				trait = sympathy_karaturan_group
				trait = sympathy_elven_pantheon_group
				trait = sympathy_dwarven_pantheon_group
					}
				}
			additive_modifier = {
				value = 5
				localisation_key = sympathy_for_evil_alignment_reason
				OR = {
				trait = sympathy_evil_human_pantheon_group
				trait = sympathy_drow_pantheon
					}
				}
			additive_modifier = {
				value = -10
				trait = theologian
				}
			additive_modifier = {
				value = -10
				trait = lich_baelnorn
				}
			additive_modifier = {
				value = -10
				localisation_key = opposing_religious_alignment_reason
				OR = {
					religion_group = good_human_pantheon_group
					religion_group = qismaite_group
					religion_group = karaturan_group
					religion_group = elven_pantheon_group
					religion = dwarven_pantheon
					religion = gnome_pantheon
					religion_group = humanoid_group
					religion = adama
					religion = faithless
					religion = vhaeraun
					religion = kiaransalee
					}
				}
			additive_modifier = {
				value = -20
				trait = creature_dragon
				}
			additive_modifier = {
				value = -20
				trait = creature_fiend
			}
			additive_modifier = {
				value = -20
				trait = greater_fiend
				}
			additive_modifier = {
				value = -20
				trait = creature_genie
				}
			additive_modifier = {
				value = -20
				trait = creature_celestial
				}
			additive_modifier = {
				value = -1000
				localisation_key = chosen_reason
				evilcat_is_chosen = yes
				}
			additive_modifier = {
				value = -1000
				trait = avatar
				}
			additive_modifier = {
				value = -70
				localisation_key = resilient_worshipper_reason
				has_character_flag = ai_flag_refuse_conversion
				}
			additive_modifier = {
				value = -5
				localisation_key = different_culture_reason
				NOT = { culture = FROM }
				}
			additive_modifier = {
				value = 5
				localisation_key = same_culture_reason
				culture = FROM
				}
			additive_modifier = {
				localisation_key = opinion_of_liege_reason
				value = 5
				opinion = {
					value = 25
					who = FROM
				}
				NOT = {
					opinion = {
						value = 50
						who = FROM
					}
				}
			}
			additive_modifier = {
				localisation_key = opinion_of_liege_reason
				value = 10
				opinion = {
					value = 50
					who = FROM
				}
				NOT = {
					opinion = {
						value = 75
						who = FROM
					}
				}
			}
			additive_modifier = {
				localisation_key = opinion_of_liege_reason
				value = 15
				opinion = {
					value = 75
					who = FROM
				}
				NOT = {
					opinion = {
						value = 100
						who = FROM
					}
				}
			}
			additive_modifier = {
				localisation_key = opinion_of_liege_reason
				value = 20
				opinion = {
					value = 100
					who = FROM
				}
			}
			additive_modifier = {
				value = -15
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 0
					hidden_trigger = {
						NOT = { diplomacy = 3 }
					}
				}
			}
			additive_modifier = {
				value = -10
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 3
					hidden_trigger = {
						NOT = { diplomacy = 8 }
					}
				}
			}
			additive_modifier = {
				value = -5
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 8
					hidden_trigger = {
						NOT = { diplomacy = 12 }
					}
				}
			}
			additive_modifier = {
				value = 1
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 10
					hidden_trigger = {
						NOT = { diplomacy = 12 }
					}
				}
			}
			additive_modifier = {
				value = 5
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 12
					hidden_trigger = {
						NOT = { diplomacy = 16 }
					}
				}
			}
			additive_modifier = {
				value = 10
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 16
					hidden_trigger = {
						NOT = { diplomacy = 20 }
					}
				}
			}
			additive_modifier = {
				value = 15
				localisation_key = liege_diplomacy_reason
				FROM = {
					show_scope_change = no
					diplomacy = 20
				}
			}
			additive_modifier = {
				value = -20
				ROOT = { is_powerful_vassal = yes }
			}
			additive_modifier = {
				value = -20
				ROOT = { is_hard_to_convert = yes }
			}
			additive_modifier = {
				value = -20
				ROOT = {
					society_member_of = lord_alliance
				}
			}
			additive_modifier = {
				value = 5
				localisation_key = POPE_AIREASON_MODIFIER_CLOSE_RELATIVE
				ROOT = { is_close_relative = FROM }
				}
			additive_modifier = {
				value = 15
				localisation_key = POPE_AIREASON_MODIFIER_MY_FRIEND
				ROOT = { is_friend = FROM }
			}
			additive_modifier = {
				value = 10
				localisation_key = POPE_AIREASON_MODIFIER_MY_LOVER
				ROOT = { is_lover = FROM }
			}
			additive_modifier = {
				value = -100
				localisation_key = POPE_AIREASON_MODIFIER_MY_RIVAL_TARGET
				ROOT = { is_rival = FROM }
			}
			additive_modifier = {
				value = -100
				localisation_key = foe_reason
				ROOT = { is_foe = FROM }
			}
		}
	}
	demand_vassal_religious_conversion = {
		ai_target_filter = vassals
		ai_check_interval = 48
		filter = vassals
		only_playable = yes
		from_potential = {
			trait = zealous
			NOR = {
				government = democratic_feudal_government
				#government = magocratic_feudal_government
				government = celestial_government
				government = celestial_bureaucracy
				government = nomadic_tribal_government
			}
			is_landed = yes
			OR = {
				is_evil_religion = yes
				religion = ten_thousand_gods
				religion = qisma
				religion = pantheist_league
				religion = kahin
			}
		}
		potential = {
			NOT = { religion = FROM }
			vassal_of = FROM
			is_ruler = yes
		}
		allow = {
			# opinion = { who = FROM value = 5 }
			NOT = { controls_religion = yes }
			NOT = { trait = zealous }
			OR = {
				FROM = { is_reformed_religion = PREV }
				can_change_faith_trigger = yes
			}
			NOT = { has_character_flag = ai_flag_refuse_conversion }
			is_incapable = no
			is_adult = yes
		}
		effect = {
			# Fire any event that would normally be fired by the on_action on_vassal_accepts_religious_conversion
			custom_tooltip = {
				text = "demand_religious_conversion_tooltip"
				hidden_tooltip = {
					FROM = {
						character_event = { id = conv.1 }
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_acceptance = {
			factor = 0	# The base score
			yes_threshold = 0
			show_maybe_for_human = yes

			additive_modifier = {			# Custom localizations are located in traits_religious
				value = -20
				localisation_key = AIREASON_BASE_RELUCTANCE
				always = yes
				}
			additive_modifier = {
				value = 25
				trait = cynical
				}
			additive_modifier = {
				value = 5
				trait = arbitrary
				}
			additive_modifier = {
				value = 5
				trait = cruel
				}
			additive_modifier = {
				value = 5
				trait = lunatic
				}
			additive_modifier = {
				value = 5
				trait = content
				}
			additive_modifier = {
				value = 5
				trait = trusting
				}
			additive_modifier = {
				value = 5
				trait = craven
				}
			additive_modifier = {
				value = 5
				trait = deceitful
				}
			additive_modifier = {
				value = 5
				trait = envious
				}
			additive_modifier = {
				value = 5
				trait = greedy
				}
			additive_modifier = {
				value = 5
				trait = slothful
				}
			additive_modifier = {
				value = 5
				is_dumb_non_congenital_trigger = yes
				}
			additive_modifier = {
				value = 5
				trait = dim
				}
			additive_modifier = {
				value = 10
				trait = dumb
				}
			additive_modifier = {
				value = 15
				trait = slow
				}
			additive_modifier = {
				value = 20
				trait = idiot
				}
			additive_modifier = {
				value = 25
				trait = imbecile
				}
			additive_modifier = {
				value = 5
				trait = pagan_branch_1
				}
			additive_modifier = {
				value = 10
				trait = cannibal_trait
				}
			additive_modifier = {
				value = 10
				trait = impaler
				}
			additive_modifier = {
				value = -20
				trait = brave
				}
			additive_modifier = {
				value = -5
				trait = paranoid
				}
			additive_modifier = {
				value = -5
				trait = just
				}
			additive_modifier = {
				value = -5
				trait = proud
				}
			additive_modifier = {
				value = -5
				trait = wroth
				}
			additive_modifier = {
				value = -5
				trait = stubborn
				}
			additive_modifier = {
				value = -5
				trait = kind
				}
			additive_modifier = {
				value = -5
				trait = humble
				}
			additive_modifier = {
				value = -5
				trait = patient
				}
			additive_modifier = {
				value = -5
				trait = charitable
				}
			additive_modifier = {
				value = -5
				trait = diligent
				}
			additive_modifier = {
				value = -5
				trait = temperate
				}
			additive_modifier = {
				value = -5
				trait = pagan_branch_3
				}
			additive_modifier = {
				value = -10
				trait = monk
				}
			additive_modifier = {
				value = -10
				trait = nun
				}
			additive_modifier = {
				value = -5
				trait = warlock
				}
			additive_modifier = {
				value = -10
				trait = trained_warlock
				}
			additive_modifier = {
				value = -15
				trait = journeyman_warlock
				}
			additive_modifier = {
				value = -20
				trait = expert_warlock
				}
			additive_modifier = {
				value = -25
				trait = master_warlock
				}
			additive_modifier = {
				value = -30
				trait = renowned_warlock
				}
			additive_modifier = {
				value = -35
				trait = legendary_warlock
				}
			additive_modifier = {
				value = -5
				trait = cleric
				}
			additive_modifier = {
				value = -10
				trait = trained_cleric
				}
			additive_modifier = {
				value = -15
				trait = journeyman_cleric
				}
			additive_modifier = {
				value = -20
				trait = expert_cleric
				}
			additive_modifier = {
				value = -25
				trait = master_cleric
				}
			additive_modifier = {
				value = -30
				trait = renowned_cleric
				}
			additive_modifier = {
				value = -35
				trait = legendary_cleric
				}
			additive_modifier = {
				value = -5
				trait = paladin
				}
			additive_modifier = {
				value = -10
				trait = trained_paladin
				}
			additive_modifier = {
				value = -15
				trait = journeyman_paladin
				}
			additive_modifier = {
				value = -20
				trait = expert_paladin
				}
			additive_modifier = {
				value = -25
				trait = master_paladin
				}
			additive_modifier = {
				value = -30
				trait = renowned_paladin
				}
			additive_modifier = {
				value = -35
				trait = legendary_paladin
				}
			additive_modifier = {
				value = -5
				trait = druid
				}
			additive_modifier = {
				value = -10
				trait = trained_druid
				}
			additive_modifier = {
				value = -15
				trait = journeyman_druid
				}
			additive_modifier = {
				value = -20
				trait = expert_druid
				}
			additive_modifier = {
				value = -25
				trait = master_druid
				}
			additive_modifier = {
				value = -30
				trait = renowned_druid
				}
			additive_modifier = {
				value = -35
				trait = legendary_druid
				}
			additive_modifier = {
				value = -5
				trait = class_monk
				}
			additive_modifier = {
				value = -10
				trait = trained_monk
				}
			additive_modifier = {
				value = -15
				trait = journeyman_monk
				}
			additive_modifier = {
				value = -20
				trait = expert_monk
				}
			additive_modifier = {
				value = -25
				trait = master_monk
				}
			additive_modifier = {
				value = -30
				trait = renowned_monk
				}
			additive_modifier = {
				value = -35
				trait = legendary_monk
				}
			additive_modifier = {
				value = -20
				trait = sympathy_many
				}
			additive_modifier = {
				value = -5
				localisation_key = sympathy_for_good_alignment_reason
				OR = {
				trait = sympathy_good_human_pantheon_group
				trait = sympathy_wild_human_pantheon_group
				trait = sympathy_qismaite_group
				trait = sympathy_karaturan_group
				trait = sympathy_elven_pantheon_group
				trait = sympathy_dwarven_pantheon_group
				trait = sympathy_giant_pantheon_group
					}
				}
			additive_modifier = {
				value = 5
				localisation_key = sympathy_for_evil_alignment_reason
				OR = {
				trait = sympathy_evil_human_pantheon_group
				trait = sympathy_drow_pantheon
					}
				}
			additive_modifier = {
				value = -10
				trait = theologian
				}
			additive_modifier = {
				value = -10
				trait = lich_baelnorn
				}
			additive_modifier = {
				value = -10
				localisation_key = opposing_religious_alignment_reason
				OR = {
					religion_group = good_human_pantheon_group
					religion_group = qismaite_group
					religion_group = karaturan_group
					religion_group = elven_pantheon_group
					religion = dwarven_pantheon
					religion = gnome_pantheon
					religion_group = humanoid_group
					religion = adama
					religion = faithless
					religion = vhaeraun
					religion = kiaransalee
					}
				}
			additive_modifier = {
				value = -20
				trait = creature_dragon
				}
			additive_modifier = {
				value = -20
				trait = creature_fiend
				}
			additive_modifier = {
				value = -20
				trait = greater_fiend
				}
			additive_modifier = {
				value = -20
				trait = creature_genie
				}
			additive_modifier = {
				value = -20
				trait = creature_celestial
				}
			additive_modifier = {
				value = -1000
				localisation_key = chosen_reason
				evilcat_is_chosen = yes
				}
			additive_modifier = {
				value = -1000
				trait = avatar
				}
			additive_modifier = {
				value = -70
				localisation_key = resilient_worshipper_reason
				has_character_flag = ai_flag_refuse_conversion
				}
			additive_modifier = {
				value = -5
				localisation_key = different_culture_reason
				NOT = { culture = FROM }
				}
			additive_modifier = {
				value = 5
				localisation_key = same_culture_reason
				culture = FROM
				}
			additive_modifier = {
				localisation_key = opinion_of_liege_reason
				value = 5
				opinion = {
					value = 25
					who = FROM
				}
				NOT = {
					opinion = {
						value = 50
						who = FROM
					}
				}
			}
			additive_modifier = {
				localisation_key = opinion_of_liege_reason
				value = 10
				opinion = {
					value = 50
					who = FROM
				}
				NOT = {
					opinion = {
						value = 75
						who = FROM
					}
				}
			}
			additive_modifier = {
				localisation_key = opinion_of_liege_reason
				value = 15
				opinion = {
					value = 75
					who = FROM
				}
				NOT = {
					opinion = {
						value = 100
						who = FROM
					}
				}
			}
			additive_modifier = {
				localisation_key = opinion_of_liege_reason
				value = 20
				opinion = {
					value = 100
					who = FROM
				}
			}
			additive_modifier = {
				value = -15
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 0
					hidden_trigger = {
						NOT = { diplomacy = 3 }
					}
				}
			}
			additive_modifier = {
				value = -10
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 3
					hidden_trigger = {
						NOT = { diplomacy = 8 }
					}
				}
			}
			additive_modifier = {
				value = -5
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 8
					hidden_trigger = {
						NOT = { diplomacy = 10 }
					}
				}
			}
			additive_modifier = {
				value = 1
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 10
					hidden_trigger = {
						NOT = { diplomacy = 12 }
					}
				}
			}
			additive_modifier = {
				value = 5
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 12
					hidden_trigger = {
						NOT = { diplomacy = 16 }
					}
				}
			}
			additive_modifier = {
				value = 10
				localisation_key = liege_diplomacy_reason
				FROM = {
					diplomacy = 16
					hidden_trigger = {
						NOT = { diplomacy = 20 }
					}
				}
			}
			additive_modifier = {
				value = 15
				localisation_key = liege_diplomacy_reason
				FROM = {
					show_scope_change = no
					diplomacy = 20
				}
			}
			additive_modifier = {
				value = -20
				ROOT = { is_powerful_vassal = yes }
			}
			additive_modifier = {
				value = -20
				ROOT = { is_hard_to_convert = yes }
			}
			additive_modifier = {
				value = -20
				ROOT = {
					society_member_of = lord_alliance
				}
			}
			additive_modifier = {
				value = 5
				localisation_key = POPE_AIREASON_MODIFIER_CLOSE_RELATIVE
				ROOT = { is_close_relative = FROM }
				}
			additive_modifier = {
				value = 15
				localisation_key = POPE_AIREASON_MODIFIER_MY_FRIEND
				ROOT = { is_friend = FROM }
			}
			additive_modifier = {
				value = 10
				localisation_key = POPE_AIREASON_MODIFIER_MY_LOVER
				ROOT = { is_lover = FROM }
			}
			additive_modifier = {
				value = -100
				localisation_key = POPE_AIREASON_MODIFIER_MY_RIVAL_TARGET
				ROOT = { is_rival = FROM }
			}
			additive_modifier = {
				value = -100
				localisation_key = foe_reason
				ROOT = { is_foe = FROM }
			}
		}
	}

	vassal_evil_sacrifice_decision = {
		only_playable = yes
		ai_check_interval = 12 #check only once every 12 months.
		diplomacy_icon = GFX_sacrifice_decision

		ai_target_filter = home_court

		from_potential = {
			NOT = { has_religion_feature = religion_peaceful } # Keeping this in case reformations affect this
			is_generic_sacrifice_religion = yes
		}

		potential = {
			prisoner = yes
			host = { character = FROM }
			NOT = { trait = avatar } #so AI doesn't sacrifice Xvim in the dungeon
		}

		allow = {
			ROOT = {
				NOT = { diplomatic_immunity = yes }
				trigger_if = {
					limit = { FROM = { is_allowed_to_sacrifice_true_believers = no } }
					NOT = { religion = FROM }
				}
			}
		}

		effect = {
			save_event_target_as = human_sacrifice
			FROM = { save_event_target_as = jailer }
			character_event = { id = sacrifice.1000 }
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.5
				trait = cynical
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 1.5
				trait = cruel
			}
			modifier = {
				factor = 1.5
				trait = impaler
			}
		}
	}
	
	cyric_make_rival = {
		ai_check_interval = 80
		filter = all
		ai_target_filter = independent_rulers
		
		from_potential = {
			NOT = { character = ROOT }
			religion = church_of_cyric
			is_adult = yes
			is_inaccessible_or_incapable_trigger = no
			NOT = { trait = infirm }
			not_casting = yes
		}
		
		potential = {
			religion = church_of_cyric
			is_adult = yes
			is_inaccessible_or_incapable_trigger = no
			NOT = { trait = infirm }
		}
		
		allow = {
			FROM = { piety = 70 }
			NOR = {
				is_foe = FROM
				is_friend = FROM
				is_lover = FROM
				any_spouse = { # a good chunk of this list is to prevent this from being too strong as a way to remove characters
					character = FROM
				}
				any_consort = {
					character = FROM
				}
				any_liege = {
					character = FROM
				}
				any_vassal = {
					character = FROM
				}
				FROM = {
					any_child = {
						character = ROOT
					}
				}
			}
		}
		
		effect = {
			FROM = {
				piety = -70
				character_event = { id = divrel.31 }
			}
		}
	}

}

settlement_decisions = {

	chauntea_favor = {
		ai_check_interval = 36
		only_playable = yes
		filter = owned
		ai_target_filter = owned

		from_potential = {
			OR = {
				trait = patron_chauntea
				religion = chauntean_faith
				has_character_modifier = syncretic_chauntea
			}
		}

		potential = {
			always = yes
		}

		allow = {
			location = {
				owner = {
					OR = {
						character = FROM
						is_vassal_or_below_of = FROM
					}
				}
				NOT = { has_province_modifier = chauntea_prov_buff_mod } 
			}
			FROM = { piety = 70 }
		}

		effect = {
			FROM = { piety = -70 }
			location = {
				add_province_modifier = {
					name = chauntea_prov_buff_mod
					years = 2
				}
			}
		}

		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 3
				FROM = { trait = kind }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = slothful }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = cruel }
			}
			modifier = {
				factor = 0.8
				FROM = {
					any_demesne_province = {
						has_province_modifier = chauntea_prov_buff_mod
					}
				}
			}
		}
	}

	muhjari_cultivate_gardens = {
		only_playable = yes
		ai_check_interval = 240
		filter = owned
		ai_target_filter = owned

		from_potential = {
			religion = muhjari
		}

		potential = {
			location = {
				holder_scope = {
					character = FROM
				}
			}
		}

		allow = {
			FROM = {
				piety = 50
				scaled_wealth = 0.08
				is_inaccessible_or_incapable_trigger = no
			}
			location = {
				NOT = {
					has_province_modifier = muhjari_gardens
				}
			}
		}

		effect = {
			FROM = {
				piety = -50
				scaled_wealth = -0.08
			}
			location = {
				add_province_modifier = {
					name = muhjari_gardens
					years = 10
				}
			}
		}

		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 4
				FROM = { trait = gardener }
			}
		}
	}

	ilsensine_force_efficiency = {
		only_playable = yes
		ai_check_interval = 120
		filter = owned
		ai_target_filter = owned

		from_potential = {
			OR = {
				religion = illithid_pantheon
				has_character_modifier = syncretic_illithid
			}
			age = 16
			is_dumb_trigger = no
		}

		potential = {
			location = {
				holder_scope = {
					character = FROM
				}
			}
		}

		allow = {
			FROM = {
				piety = 130
				is_inaccessible_or_incapable_trigger = no
			}
			location = {
				NOR = {
					has_province_modifier = undead_province
					has_province_modifier = forced_efficiency
					culture = illithid
					culture = thoon
					culture = aboleth
				}
			}
		}
		effect = {
			FROM = {
				piety = -130
				if = {
					limit = {
						trait = kind
					}
					remove_trait = kind
				}
				random = {
					chance = 40
					add_trait = cruel
				}
			}
			location = {
				add_province_modifier = {
					name = forced_efficiency
					months = 18
				}
			}
		}
		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 0.5
				FROM = {
					war = yes
				}
			}
			modifier = {
				factor = 3
				FROM = { wealth = 100 }
			}
			modifier = {
				factor = 0.1
				FROM = {
					trait = kind
				}
			}
		}
	}

	ilsensine_dominate_mob = {
		only_rulers = yes
		ai_check_interval = 120
		filter = owned
		ai_target_filter = owned

		from_potential = {
			OR = {
				religion = illithid_pantheon
				has_character_modifier = syncretic_illithid
			}
			age = 16
			is_dumb_trigger = no
			hidden_tooltip = {
				OR = {
					ai = no
					war = yes
				}
			}
		}

		potential = {
			location = {
				holder_scope = {
					character = FROM
				}
			}
		}

		allow = {
			FROM = {
				piety = 200
				is_inaccessible_or_incapable_trigger = no
			}
			location = {
				NOR = {
					has_province_modifier = undead_province
					has_province_modifier = depopulated_3
					has_province_modifier = population_missing
					culture = illithid
					culture = thoon
					culture = aboleth
				}
			}
		}
		effect = {
			FROM = {
				piety = -200
				if = {
					limit = {
						trait = kind
					}
					remove_trait = kind
				}
				random = {
					chance = 40
					add_trait = cruel
				}
			}
			location = {
				if = {
					limit = {
						has_province_modifier = prosperity_modifier_3
					}
					FROM = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = THIS
							troops = {
								mob_troops = { 15 15 }
								light_infantry = { 1 1 }
							}
							match_settlement = ROOT
							match_mult = 3
							cannot_inherit = yes
							attrition = 1.5
							maintenance_multiplier = 0.5
							can_toggle_looting = no
							reinforces = no
						}
					}
				}
				else_if = {
					limit = {
						has_province_modifier = prosperity_modifier_2
					}
					FROM = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = THIS
							troops = {
								mob_troops = { 15 15 }
								light_infantry = { 1 1 }
							}
							match_settlement = ROOT
							match_mult = 2
							cannot_inherit = yes
							attrition = 1.5
							maintenance_multiplier = 0.5
							can_toggle_looting = no
							reinforces = no
						}
					}
				}
				else_if = {
					limit = {
						has_province_modifier = prosperity_modifier_1
					}
					FROM = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = THIS
							troops = {
								mob_troops = { 15 15 }
								light_infantry = { 1 1 }
							}
							match_settlement = ROOT
							match_mult = 2
							cannot_inherit = yes
							attrition = 1
							maintenance_multiplier = 0.5
							can_toggle_looting = no
							reinforces = no
						}
					}
				}
				else_if = {
					limit = {
						NOR = {
							has_province_modifier = prosperity_modifier_3
							has_province_modifier = prosperity_modifier_2
							has_province_modifier = prosperity_modifier_1
						}
					}
					FROM = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = THIS
							troops = {
								mob_troops = { 15 15 }
								light_infantry = { 1 1 }
							}
							match_settlement = ROOT
							match_mult = 2
							cannot_inherit = yes
							attrition = 0.65
							maintenance_multiplier = 0.5
							can_toggle_looting = no
							reinforces = no
						}
					}
				}
				if = {
					limit = {
						has_dlc = "Reapers"
					}
					increase_depopulation_effect = yes
				}
				else = {
					add_province_modifier = {
						name = population_missing
						years = 5
					}
				}
			}
		}
		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 0.1
				FROM = {
					trait = kind
				}
			}
		}
	}

	ilmater_prov_health = {
		ai_check_interval = 36
		only_playable = yes
		filter = owned
		ai_target_filter = owned

		from_potential = {
			OR = {
				religion = triadic
				has_character_modifier = syncretic_triadic
				religion = mercantile
				has_character_modifier = syncretic_mercantile
				religion = calishite_faith
				has_character_modifier = syncretic_calishite
				religion = lapal_faith
				has_character_modifier = syncretic_lapal
			}
		}

		potential = {
			location = {
				owner = {
					OR = {
						character = FROM
						is_vassal_or_below_of = FROM
					}
				}
			}
		}

		allow = {
			location = { NOT = { has_province_modifier = ilmater_prov_health_mod } }
			FROM = {
				piety = 70
				hidden_tooltip = {
					OR = {
						ai = no
						AND = {
							ai = yes
							ROOT = {
								location = {
									any_neighbor_province = {
										has_disease = yes
									}
								}
							}
						}
					}
				}
			}
		}

		effect = {
			FROM = { piety = -70 }
			location = {
				add_province_modifier = {
					name = ilmater_prov_health_mod
					years = 2
				}
			}
		}

		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 3
				FROM = { trait = kind }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = slothful }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = cruel }
			}
			modifier = {
				factor = 0.8
				FROM = {
					any_demesne_province = {
						has_province_modifier = ilmater_prov_health_mod
					}
				}
			}
		}
	}

	auril_winter_protection = {
		ai_check_interval = 60
		only_playable = yes
		filter = owned
		ai_target_filter = owned

		from_potential = {
			religion = deities_of_fury
		}

		potential = {
			location = {
				NOT = { has_province_modifier = auril_winter_protection_mod }
				OR = {
					climate = mild_winter
					climate = normal_winter
					climate = severe_winter
				}
			}
		}

		allow = {
			location = {
				is_winter = yes
				owner = {
					OR = {
						character = FROM
						is_vassal_or_below_of = FROM
					}
				}
			}
			FROM = { piety = 50 }
		}

		effect = {
			location = {
				add_province_modifier = {
					name = auril_winter_protection_mod
					years = 2
				}
			}
			FROM = {
				piety = -50
			}
		}

		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 2
				location = { climate = severe_winter }
			}
			modifier = {
				factor = 2
				FROM = { trait = diligent }
			}
			modifier = {
				factor = 2
				FROM = { trait = kind }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = slothful }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = cynical }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = cruel }
			}
		}
	}

	establish_dwarfhold = {
		ai_check_interval = 120
		only_playable = yes
		filter = sub_realm_owned
		ai_target_filter = sub_realm_owned
		from_potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			#culture_group = dwarf_group
		}
		potential = {
			location = {
				owner = {
					OR = {
						character = FROM
						is_vassal_or_below_of = FROM
					}
				}
			}
			NOT = {
				location = {
					OR = {
						has_province_modifier = ruined_dwarfhold
						has_province_modifier = dwarfhold_mod
					}
				}
			}
			location = {
				OR = {
					terrain = mountain
					terrain = subterranean
				}
				religion = FROM
			}
		}
		allow = {
			FROM = {
				scaled_wealth = {
					value = 0.05
					min = 150
				}
			}
			is_tribal = no
		}
		effect = {
			FROM = {
				scaled_wealth = {
					value = -0.05
					min = -150
				}
			}
			location = {
				add_province_modifier = {
					name = dwarfhold_mod
					duration = -1
				}
			}
		}
		ai_will_do = {
			factor = 0.4
			modifier = {
				factor = 0.5
				FROM = { trait = slothful }
			}
			modifier = {
				factor = 2
				FROM = { trait = diligent }
			}
			modifier = {
				factor = 0.3
				FROM = { tier = COUNT }
			}
			modifier = {
				factor = 2
				FROM = {
					higher_tier_than = DUKE
				}
			}
		}
	}

	restore_dwarfhold = {
		is_high_prio = yes
		ai_check_interval = 120
		only_playable = yes
		filter = sub_realm_owned
		ai_target_filter = sub_realm_owned
		from_potential = {
			OR = {
				religion = dwarven_pantheon
				religion = laduguer
			}
			#culture_group = dwarf_group
		}
		potential = {
			location = {
				owner = {
					OR = {
						character = FROM
						is_vassal_or_below_of = FROM
					}
				}
				has_province_modifier = ruined_dwarfhold
			}
		}
		allow = {
			location = {
				OR = {
					AND = {
						any_province_holding = {
							OR = {
								holding_type = castle
								holding_type = city
								holding_type = temple
							}
						}
						FROM = {
							scaled_wealth = {
								value = 0.03
								min = 75
							}
						}
					}
					FROM = {
						scaled_wealth = {
							value = 0.1
							min = 250
						}
					}
				}
			}
			is_tribal = no
		}
		effect = {
			location = {
				if = {
					limit = {
						any_province_holding = {
							OR = {
								holding_type = castle
								holding_type = city
								holding_type = temple
							}
						}
					}
					FROM = {
						scaled_wealth = {
							value = -0.03
							min = -75
						}
					}
				}
				else = {
					FROM = {
						scaled_wealth = {
							value = -0.1
							min = -250
						}
					}
				}
				remove_province_modifier = ruined_dwarfhold
				add_province_modifier = {
					name = dwarfhold_mod
					duration = -1
				}
				if = {
					limit = {
						any_province_holding = {
							NOR = {
								holding_type = castle
								holding_type = city
								holding_type = temple
							}
						}
					}
					any_province_holding = {
						limit = {
							tier = baron
							holding_type = tribal
						}
						convert_to = castle
					}
				}
			}
		}
		ai_will_do = {
			factor = 0.4
			modifier = {
				factor = 0.5
				FROM = { trait = slothful }
			}
			modifier = {
				factor = 2
				FROM = { trait = diligent }
			}
			modifier = {
				factor = 0.3
				FROM = { tier = COUNT }
			}
			modifier = {
				factor = 2
				FROM = {
					higher_tier_than = DUKE
				}
			}
		}
	}

	dof_ravage_territory = {
		only_playable = yes
		ai_check_interval = 360

		filter = owned
		ai_target_filter = owned

		from_potential = {
			religion = deities_of_fury
		}

		potential = {
			location = {
				NOT = { religion = deities_of_fury }
				holder_scope = {
					character = FROM
				}
			}
		}

		allow = {
			location = {
				any_province_holding = {
					NOT = { holding_type = tribal }
				}
			}
		}

		effect = {
			location = {
				any_province_holding = {
					limit = {
						is_capital = no
					}
					destroy_settlement = THIS
					FROM = { piety = 50 }
				}
				capital_holding = {
					FROM = { piety = 100 }
					convert_to = tribal
				}
				religion = deities_of_fury
			}
		}

		ai_will_do = {
			factor = 0.05
			modifier = {
				factor = 2
				FROM = { trait = zealous }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = cynical }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = greedy }
			}
			modifier = {
				factor = 0.2
				location = {
					culture = FROM
				}
			}
		}
	}
	
	ritual_of_the_border = {
		only_playable = yes
		ai_check_interval = 360
		
		filter = owned
		ai_target_filter = owned
		
		from_potential = {
			religion = blue_flame
		}
		
		potential = {
			location = {
				NOR = {
					has_province_modifier = plaguelands
					has_province_modifier = plaguelands_nerf
				}
				holder_scope = {
					character = FROM
				}
			}
		}
		
		allow = {
			location = {
				religion = blue_flame
				any_neighbor_province = {
					OR = {
						has_province_modifier = plaguelands
						has_province_modifier = plaguelands_nerf
					}
				}
			}
			FROM = {
				NOT = {
					had_character_flag = {
						flag = ritual_of_the_border_flag
						years = 3
					}
				}
				piety = 200
				wealth = 150
			}
		}
		
		effect = {
			location = {
				plaguelands_effect = yes
			}
			FROM = {
				character_event = { id = divrel.33 }
				piety = -200
				wealth = -150
				clr_character_flag = ritual_of_the_border_flag
				set_character_flag = ritual_of_the_border_flag
			}
		}

		ai_will_do = {
			factor = 0.1
			modifier = {
				factor = 0
				trait = cynical
			}
			modifier = {
				factor = 3
				trait = zealous
			}
			modifier = {
				factor = 0.5
				OR = {
					trait = craven
					trait = slothful
				}
			}
			modifier = {
				factor = 1.2
				trait = lunatic
			}
		}
	}
	
	purge_spellplague = {
		only_playable = yes
		ai_check_interval = 360
		is_high_prio = yes
		
		filter = owned
		ai_target_filter = owned
		
		from_potential = {
			NOT = { religion = blue_flame }
		}
		
		potential = {
			location = {
				OR = {
					has_province_modifier = plaguelands
					has_province_modifier = plaguelands_nerf
				}
				holder_scope = {
					character = FROM
				}
			}
		}
		
		allow = {
			custom_tooltip = {
				text = NOTWAILINGYEARS
				hidden_tooltip = {
					NOT = { has_global_flag = wailing_years }
				}
			}
			NOT = { religion = blue_flame }
			FROM = {
				NOT = {
					had_character_flag = {
						flag = purge_spellplague_flag
						years = 3
					}
				}
				OR = {
					AND = {
						NOT = { religion = arcane }
						piety = 200
						wealth = 150
					}
					AND = {
						religion = arcane
						piety = 180
						wealth = 130
					}
				}
			}
		}
		
		effect = {
			location = {
				remove_province_modifier = plaguelands
				remove_province_modifier = plaguelands_nerf
			}
			FROM = {
				character_event = { id = divrel.34 }
				if = {
					limit = {
						religion = arcane
					}
					piety = -180
					wealth = -130
				}
				else = {
					piety = -200
					wealth = -150
				}
				clr_character_flag = purge_spellplague_flag
				set_character_flag = purge_spellplague_flag
			}
		}

		ai_will_do = {
			factor = 0.1
			modifier = {
				factor = 3
				FROM = {
					trait = zealous
				}
				
			}
			modifier = {
				factor = 0.5
				FROM = {
					OR = {
						trait = craven
						trait = slothful
					}
				}
				
			}
			modifier = {
				factor = 0.8
				FROM = {
					trait = lunatic
				}
			}
		}
	}

	hathor_tend_poor = {
		only_playable = yes
		ai_check_interval = 240
		filter = owned
		ai_target_filter = owned

		from_potential = {
			trait = patron_hathor
		}

		potential = {
			location = {
				holder_scope = {
					character = FROM
				}
			}
		}

		allow = {
			FROM = {
				piety = 100
				wealth = 15
				is_inaccessible_or_incapable_trigger = no
			}
			location = {
				NOT = {
					has_province_modifier = hathor_aid
				}
			}
		}

		effect = {
			FROM = {
				piety = -100
				wealth = -15
			}
			location = {
				add_province_modifier = {
					name = hathor_aid
					years = 5
				}
			}
		}

		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 4
				FROM = { trait = kind }
			}
		}
	}
}

title_decisions = {

	muhjari_syncretise = {
		ai_check_interval = 240
		only_playable = yes
		filter = sub_realm_owned
		ai_target_filter = sub_realm_owned

		from_potential = {
			religion = muhjari
			muhjari_has_syncretism = no
			age = 16
		}

		potential = {
			location = {
				NOT = { religion = muhjari }
				NOT = { religion = faithless }
			}
		}

		allow = {
			FROM = {
				is_inaccessible_or_incapable_trigger = no
			}
		}

		effect = {
			location = {
				trigger_switch = {
					on_trigger = religion
					triadic = {
						FROM = {
							add_character_modifier = {
								name = syncretic_triadic
								duration = -1
							}
						}
					}
					arcane = {
						FROM = {
							add_character_modifier = {
								name = syncretic_arcane
								duration = -1
							}
						}
					}
					rasallesian = {
						FROM = {
							add_character_modifier = {
								name = syncretic_rashemen
								duration = -1
							}
						}
					}
					chessic = {
						FROM = {
							add_character_modifier = {
								name = syncretic_chessic
								duration = -1
							}
						}
					}
					mercantile = {
						FROM = {
							add_character_modifier = {
								name = syncretic_mercantile
								duration = -1
							}
						}
					}
					inventive = {
						FROM = {
							add_character_modifier = {
								name = syncretic_inventive
								duration = -1
							}
						}
					}
					joyful = {
						FROM = {
							add_character_modifier = {
								name = syncretic_joyful
								duration = -1
							}
						}
					}
					calishite_faith = {
						FROM = {
							add_character_modifier = {
								name = syncretic_calishite
								duration = -1
							}
						}
					}
					lapal_faith = {
						FROM = {
							add_character_modifier = {
								name = syncretic_lapal
								duration = -1
							}
						}
					}
					chauntean_faith = {
						FROM = {
							add_character_modifier = {
								name = syncretic_chauntea
								duration = -1
							}
						}
					}
					mulhorandi_faith = {
						FROM = {
							add_character_modifier = {
								name = syncretic_mulhorandi
								duration = -1
							}
						}
					}
					untheric_faith = {
						FROM = {
							add_character_modifier = {
								name = syncretic_untheric
								duration = -1
							}
						}
					}
					enlil = {
						FROM = {
							add_character_modifier = {
								name = syncretic_enlil
								duration = -1
							}
						}
					}
					halfling_pantheon = {
						FROM = {
							add_character_modifier = {
								name = syncretic_halfling
								duration = -1
							}
						}
					}
					solar = {
						FROM = {
							add_character_modifier = {
								name = syncretic_solar
								duration = -1
							}
						}
					}
					deities_of_fury = {
						FROM = {
							add_character_modifier = {
								name = syncretic_fury
								duration = -1
							}
						}
					}
					natural = {
						FROM = {
							add_character_modifier = {
								name = syncretic_natural
								duration = -1
							}
						}
					}
					kossuth = {
						FROM = {
							add_character_modifier = {
								name = syncretic_kossuth
								duration = -1
							}
						}
					}
					geomancy = {
						FROM = {
							add_character_modifier = {
								name = syncretic_geomancy
								duration = -1
							}
						}
					}
					primordial = {
						FROM = {
							add_character_modifier = {
								name = syncretic_primordial
								duration = -1
							}
						}
					}
					tuigan_shamanism = {
						FROM = {
							add_character_modifier = {
								name = syncretic_tuigan
								duration = -1
							}
						}
					}
					uthgardt_faith = {
						FROM = {
							add_character_modifier = {
								name = syncretic_uthgardt
								duration = -1
							}
						}
					}
					uthgardt_reformed = {
						FROM = {
							add_character_modifier = {
								name = syncretic_uthgardt
								duration = -1
							}
						}
					}
					martial_faith = {
						FROM = {
							add_character_modifier = {
								name = syncretic_martial
								duration = -1
							}
						}
					}
					ubtao_worship = {
						FROM = {
							add_character_modifier = {
								name = syncretic_ubtao
								duration = -1
							}
						}
					}
					earthmother = {
						FROM = {
							add_character_modifier = {
								name = syncretic_earthmother
								duration = -1
							}
						}
					}
					earthmother_reformed = {
						FROM = {
							add_character_modifier = {
								name = syncretic_earthmother
								duration = -1
							}
						}
					}
					toteteohuan = {
						FROM = {
							add_character_modifier = {
								name = syncretic_maztica
								duration = -1
							}
						}
					}
					qotal = {
						FROM = {
							add_character_modifier = {
								name = syncretic_qotal
								duration = -1
							}
						}
					}
					qotal_reformed = {
						FROM = {
							add_character_modifier = {
								name = syncretic_qotal
								duration = -1
							}
						}
					}
					interloper = {
						FROM = {
							add_character_modifier = {
								name = syncretic_interloper
								duration = -1
							}
						}
					}
					dead_three = {
						FROM = {
							add_character_modifier = {
								name = syncretic_deadthree
								duration = -1
							}
						}
					}
					shadow_gods = {
						FROM = {
							add_character_modifier = {
								name = syncretic_shadow
								duration = -1
							}
						}
					}
					ghaunadaur = {
						FROM = {
							add_character_modifier = {
								name = syncretic_ghaunadaur
								duration = -1
							}
						}
					}
					loviatar = {
						FROM = {
							add_character_modifier = {
								name = syncretic_loviatar
								duration = -1
							}
						}
					}
					church_of_cyric = {
						FROM = {
							add_character_modifier = {
								name = syncretic_cyric
								duration = -1
							}
						}
					}
					abyssal_cult = {
						FROM = {
							add_character_modifier = {
								name = syncretic_abyssal
								duration = -1
							}
						}
					}
					infernal = {
						FROM = {
							add_character_modifier = {
								name = syncretic_infernal
								duration = -1
							}
						}
					}
					scale_cult = {
						FROM = {
							add_character_modifier = {
								name = syncretic_scale
								duration = -1
							}
						}
					}
					sekolah = {
						FROM = {
							add_character_modifier = {
								name = syncretic_sekolah
								duration = -1
							}
						}
					}
					ten_thousand_gods = {
						FROM = {
							add_character_modifier = {
								name = syncretic_10k
								duration = -1
							}
						}
					}
					qisma = {
						FROM = {
							add_character_modifier = {
								name = syncretic_qisma
								duration = -1
							}
						}
					}
					pantheist_league = {
						FROM = {
							add_character_modifier = {
								name = syncretic_pantheist
								duration = -1
							}
						}
					}
					kahin = {
						FROM = {
							add_character_modifier = {
								name = syncretic_kahin
								duration = -1
							}
						}
					}
					thasmudyanic = {
						FROM = {
							add_character_modifier = {
								name = syncretic_thasmudyanic
								duration = -1
							}
						}
					}
					nogari = {
						FROM = {
							add_character_modifier = {
								name = syncretic_nogari
								duration = -1
							}
						}
					}
					nogari_reformed = {
						FROM = {
							add_character_modifier = {
								name = syncretic_nogari
								duration = -1
							}
						}
					}
					jaziri = {
						FROM = {
							add_character_modifier = {
								name = syncretic_jaziri
								duration = -1
							}
						}
					}
					jaziri_reformed = {
						FROM = {
							add_character_modifier = {
								name = syncretic_jaziri
								duration = -1
							}
						}
					}
					padhran = {
						FROM = {
							add_character_modifier = {
								name = syncretic_padhran
								duration = -1
							}
						}
					}
					the_path = {
						FROM = {
							add_character_modifier = {
								name = syncretic_shou
								duration = -1
							}
						}
					}
					chung_tao = {
						FROM = {
							add_character_modifier = {
								name = syncretic_chung
								duration = -1
							}
						}
					}
					nine_travelers = {
						FROM = {
							add_character_modifier = {
								name = syncretic_9t
								duration = -1
							}
						}
					}
					adama = {
						FROM = {
							add_character_modifier = {
								name = syncretic_adama
								duration = -1
							}
						}
					}
					animist = {
						FROM = {
							add_character_modifier = {
								name = syncretic_animist
								duration = -1
							}
						}
					}
					elven_pantheon = {
						FROM = {
							add_character_modifier = {
								name = syncretic_elf
								duration = -1
							}
						}
					}
					asathalfinare = {
						FROM = {
							add_character_modifier = {
								name = syncretic_asathalfinare
								duration = -1
							}
						}
					}
					sylvan = {
						FROM = {
							add_character_modifier = {
								name = syncretic_sylvan
								duration = -1
							}
						}
					}
					eilistraee = {
						FROM = {
							add_character_modifier = {
								name = syncretic_eilistraee
								duration = -1
							}
						}
					}
					yuir = {
						FROM = {
							add_character_modifier = {
								name = syncretic_yuir
								duration = -1
							}
						}
					}
					yuir_reformed = {
						FROM = {
							add_character_modifier = {
								name = syncretic_yuir
								duration = -1
							}
						}
					}
					lolth_cult = {
						FROM = {
							add_character_modifier = {
								name = syncretic_lolth
								duration = -1
							}
						}
					}
					vhaeraun = {
						FROM = {
							add_character_modifier = {
								name = syncretic_vhaeraun
								duration = -1
							}
						}
					}
					kiaransalee = {
						FROM = {
							add_character_modifier = {
								name = syncretic_kiaransalee
								duration = -1
							}
						}
					}
					dwarven_pantheon = {
						FROM = {
							add_character_modifier = {
								name = syncretic_dwarf
								duration = -1
							}
						}
					}
					laduguer = {
						FROM = {
							add_character_modifier = {
								name = syncretic_laduguer
								duration = -1
							}
						}
					}
					gnome_pantheon = {
						FROM = {
							add_character_modifier = {
								name = syncretic_gnome
								duration = -1
							}
						}
					}
					urdlen = {
						FROM = {
							add_character_modifier = {
								name = syncretic_urdlen
								duration = -1
							}
						}
					}
					giant_pantheon = {
						FROM = {
							add_character_modifier = {
								name = syncretic_giant
								duration = -1
							}
						}
					}
					vaprak = {
						FROM = {
							add_character_modifier = {
								name = syncretic_vaprak
								duration = -1
							}
						}
					}
					karontor = {
						FROM = {
							add_character_modifier = {
								name = syncretic_karontor
								duration = -1
							}
						}
					}
					ulutiuan = {
						FROM = {
							add_character_modifier = {
								name = syncretic_ulutiuan
								duration = -1
							}
						}
					}
					ulutiuan_reformed = {
						FROM = {
							add_character_modifier = {
								name = syncretic_ulutiuan
								duration = -1
							}
						}
					}
					draconic_pantheon = {
						FROM = {
							add_character_modifier = {
								name = syncretic_draconic
								duration = -1
							}
						}
					}
					tiamat = {
						FROM = {
							add_character_modifier = {
								name = syncretic_tiamat
								duration = -1
							}
						}
					}
					bahamut = {
						FROM = {
							add_character_modifier = {
								name = syncretic_bahamut
								duration = -1
							}
						}
					}
					goblin_pantheon = {
						FROM = {
							add_character_modifier = {
								name = syncretic_goblin
								duration = -1
							}
						}
					}
					goblin_reformed = {
						FROM = {
							add_character_modifier = {
								name = syncretic_goblin
								duration = -1
							}
						}
					}
					orc_pantheon = {
						FROM = {
							add_character_modifier = {
								name = syncretic_orc
								duration = -1
							}
						}
					}
					orc_reformed = {
						FROM = {
							add_character_modifier = {
								name = syncretic_orc
								duration = -1
							}
						}
					}
					entropy = {
						FROM = {
							add_character_modifier = {
								name = syncretic_entropy
								duration = -1
							}
						}
					}
					blue_flame = {
						FROM = {
							add_character_modifier = {
								name = syncretic_blue_flame
								duration = -1
							}
						}
					}
					ancestral_cult = {
						FROM = {
							add_character_modifier = {
								name = syncretic_ancestral
								duration = -1
							}
						}
					}
					qukoku = {
						FROM = {
							add_character_modifier = {
								name = syncretic_qukoku
								duration = -1
							}
						}
					}
					beholder_pantheon = {
						FROM = {
							add_character_modifier = {
								name = syncretic_beholder
								duration = -1
							}
						}
					}
					illithid_pantheon = {
						FROM = {
							add_character_modifier = {
								name = syncretic_illithid
								duration = -1
							}
						}
					}
					faceless_god = {
						FROM = {
							add_character_modifier = {
								name = syncretic_faceless
								duration = -1
							}
						}
					}
					turm = {
						FROM = {
							add_character_modifier = {
								name = syncretic_turm
								duration = -1
							}
						}
					}
					tashan = {
						FROM = {
							add_character_modifier = {
								name = syncretic_tashan
								duration = -1
							}
						}
					}
				}
			}
		}

		ai_will_do = {
			factor = 0.3
		}
	}

	orc_claim = {
		ai_check_interval = 360
		only_playable = yes
		filter = all
		ai_target_filter = all

		from_potential = {
			orc_religion_trigger = yes
			higher_tier_than = BARON
			age = 16
		}

		potential = {
			holder_scope = {
				is_within_diplo_range = FROM
				orc_religion_trigger = yes
				independent = yes
			}
			OR = {
				tier = COUNT
				AND = {
					tier = DUKE
					FROM = { higher_tier_than = COUNT }
				}
				AND = {
					tier = KING
					FROM = { higher_tier_than = DUKE }
				}
				AND = {
					tier = EMPEROR
					FROM = { higher_tier_than = KING }
				}
			}
		}

		allow = {
			NOT = { claimed_by = FROM }
			trigger_if = {
				limit = { tier = COUNT }
				FROM = { piety = 50 }
			}
			trigger_else_if = {
				limit = { tier = DUKE }
				FROM = { piety = 150 }
			}
			trigger_else_if = {
				limit = { tier = KING }
				FROM = { piety = 300 }
			}
			trigger_else_if = {
				limit = { tier = EMPEROR }
				FROM = { piety = 500 }
			}
		}

		effect = {
			if = {
				limit = {
					tier = COUNT
				}
				FROM = { piety = -50 }
			}
			else_if = {
				limit = {
					tier = DUKE
				}
				FROM = { piety = -150 }
			}
			else_if = {
				limit = {
					tier = KING
				}
				FROM = { piety = -300 }
			}
			else_if = {
				limit = {
					tier = EMPEROR
				}
				FROM = { piety = -500 }
			}
			FROM = {
				add_claim = ROOT
			}
			holder_scope = {
				FROM = {
					PREV = { character_event = { id = generalmisc.26 } }
				}
			}
		}
	}

	plunder_dragon_hoard = {
		ai_check_interval = 120
		only_playable = yes

		ai_target_filter = realm_owned
		filter = realm_owned

		from_potential = {
			NOR = {
				trait = creature_dragon
				religion_group = draconic_group
			}
		}

		potential = {
			tier = COUNT
			location = {
				has_wonder = wonder_dragon_hoard
			}
			holder_scope = {
				OR = {
					character = FROM
					is_vassal_or_below_of = FROM
				}
			}
		}

		allow = {
			FROM = {
				is_inaccessible_or_incapable_trigger = no
				trigger_if = {
					limit = { independent = no }

					NOT = {
						any_liege = {
							OR = {
								is_dragon = yes
								religion_group = draconic_group
							}
						}
					}
				}
			}
			location = {
				has_wonder = wonder_dragon_hoard
				wonder = {
					wonder_stage == 1
				}
			}
		}

		effect = {
			FROM = {
				wealth = 200
			}
			location = {
				destroy_wonder = yes
			}
		}

		ai_will_do = {
			factor = 20
		}
	}
	
	kossuth_cleanse_land = {
		ai_check_interval = 120
		only_playable = yes
		is_high_prio = yes
		
		ai_target_filter = owned
		filter = owned
		
		from_potential = {
			prisoner = no
			religion = kossuth
			is_inaccessible_or_incapable_trigger = no
		}
		
		potential = {
			tier = COUNT
			location = {
				has_disease = yes
			}
		}
		
		allow = {
			FROM = { piety = 100 }
			location = {
				NOT = { has_province_modifier = cleansed_by_fire }
				religion = kossuth
			}
		}
		
		effect = {
			FROM = { piety = -100 }
			if = {
				limit = {
					FROM = { trait = kind }
				}
				random = {
					chance = 40
					FROM = { remove_trait = kind }
				}
			}
			location = {
				reduce_disease = 0.9
				if = {
					limit = {
						OR = {
							has_province_modifier = prosperity_modifier_3
							has_province_modifier = prosperity_modifier_2
							has_province_modifier = prosperity_modifier_1
						}
					}
					decrease_prosperity_effect = yes
				}
				else = {
					increase_depopulation_effect = yes
				}
				add_province_modifier = {
					name = cleansed_by_fire
					years = 1
				}
			}
		}
		
		ai_will_do = {
			factor = 0.3
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 1.5
				trait = cruel
			}
			modifier = {
				factor = 0.3
				trait = kind
			}
		}
	}
}
