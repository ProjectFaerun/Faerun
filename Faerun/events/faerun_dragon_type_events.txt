namespace = dragon_type

#Dragon Aging
character_event = {
	id = dragon_type.1
	hide_window = yes

	is_triggered_only = yes # on_yearly_pulse, on_startup

	trigger = {
		trait = creature_dragon
		NOT = { trait = dragon_ancient }
	}

	immediate = {
		if = {
			limit = {
				age >= 800
			}

			remove_trait = dragon_adult
			add_trait = dragon_ancient
		}
		else_if = {
			limit = {
				age >= 100
				NOT = { trait = dragon_adult }
			}

			remove_trait = dragon_young
			add_trait = dragon_adult
		}
		else_if = {
			limit = {
				age >= 6
				age < 100
				NOT = { trait = dragon_young }
			}

			remove_trait = dragon_wyrmling
			add_trait = dragon_young
		}
		else_if = {
			limit = {
				age < 6
				NOT = { trait = dragon_wyrmling } 
			}

			add_trait = dragon_wyrmling
		}
	}
}

narrative_event = {
	id = dragon_type.2
	title = SECRET_IDENTITY.title
	desc = DRAGON_TYPE.2
	major = yes
	picture = GFX_evt_dragon_2

	is_triggered_only = yes

	major_trigger = {
		ai = no
		is_within_diplo_range = ROOT
	}
	option = {
		name = DRAGON_TYPE.2a
	}
}

#Hoard on Startup
character_event = {
	id = dragon_type.3
	hide_window = yes
	is_triggered_only = yes

	only_independent  = yes
	min_age = 100
	
	trigger = {
		is_save_game = no
		is_dragon = yes
		religion_group = draconic_group
	}

	immediate = {
		if = {
			limit = {
				capital_scope = {
					has_wonder = no
				}
			}
			capital_scope = {
				add_wonder = wonder_dragon_hoard
			}
		}
	}
}

character_event = {
	id = dragon_type.4
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		is_save_game = no
		has_landed_title = d_bahamut
	}
	immediate = {
		create_character = {
			age = 135
			dynasty = actually_culture
			culture = gold_dragon
			religion = bahamut
			immortal_age = 30
			female = 50
			flag = special_courtier
		}
		new_character = { character_event = { id = character_trait.0 } }
	}
}

character_event = {
	id = dragon_type.5
	title = ancient_dragon.title
	desc = DRAGON_TYPE.5
	picture = GFX_evt_dragon_3
	is_triggered_only = yes # on_yearly_pulse

	min_age = 800

	trigger = {
		trait = dragon_ancient
		OR = {
			trait = is_fat
			trait = giant
			trait = infirm
		}
		NOT = { trait = grounded }
	}

	option = {
		name = ancient_dragon.opt_a

		add_trait = grounded
	}
}