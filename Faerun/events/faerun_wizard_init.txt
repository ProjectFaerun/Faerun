namespace = wizinit

#Name is a legacy

character_event = {
	id = wizinit.3
	desc = WIZSPECDESC
	picture = GFX_evt_wizard

	is_triggered_only = yes
	has_character_flag = wizard_init

	trigger = {
		z_wizard = yes
		NOT = { has_wiz_spec = yes }
	}

	option = {
		name = WIZSPEC1
		ai_chance = {
			factor = 1
			modifier = {
				factor = 1000
				has_landed_title = d_abjuration
			}
		}
		add_trait = wiz_abjuration
	}
	option = {
		name = WIZSPEC2
		ai_chance = {
			factor = 1
			modifier = {
				factor = 1000
				has_landed_title = d_transmutation
			}
		}
		add_trait = wiz_transmutation
	}
	option = {
		name = WIZSPEC3
		ai_chance = {
			factor = 1
			modifier = {
				factor = 1000
				has_landed_title = d_conjuration
			}
		}
		add_trait = wiz_conjuration
	}
	option = {
		trigger = {
			ai = no
		}
		name = TB_OPT_MORE
		character_event = { id = wizinit.4 }
	}
	option = {
		trigger = {
			ai = yes
		}
		name = OK
		ai_chance = {
			factor = 1
			modifier = {
				factor = 1000
				has_landed_title = d_divination
			}
		}
		add_trait = wiz_divination
	}
	option = {
		trigger = {
			ai = yes
		}
		name = OK
		ai_chance = {
			factor = 1
			modifier = {
				factor = 1000
				has_landed_title = d_enchantment
			}
		}
		add_trait = wiz_enchantment
	}
	option = {
		trigger = {
			ai = yes
		}
		name = OK
		ai_chance = {
			factor = 1
			modifier = {
				factor = 1000
				has_landed_title = d_evocation
			}
		}
		add_trait = wiz_evocation
	}
	option = {
		trigger = {
			ai = yes
		}
		name = OK
		ai_chance = {
			factor = 1
			modifier = {
				factor = 1000
				has_landed_title = d_illusion
			}
		}
		add_trait = wiz_illusion
	}
	option = {
		trigger = {
			ai = yes
			NOT = { trait = patron_kelemvor }
		}
		name = OK
		ai_chance = {
			factor = 1
			modifier = {
				factor = 1000
				OR = {
					trait = undead
					trait = lich
					trait = vampire
					trait = vampire_spawn
					has_landed_title = d_necromancy
				}
			}
		}
		add_trait = wiz_necromancy
	}
}

character_event = {
	id = wizinit.4
	desc = WIZSPECDESC
	picture = GFX_evt_wizard

	is_triggered_only = yes

	option = {
		name = WIZSPEC4
		add_trait = wiz_divination
	}
	option = {
		name = WIZSPEC5
		add_trait = wiz_enchantment
	}
	option = {
		name = WIZSPEC6
		add_trait = wiz_evocation
	}
	option = {
		name = TB_OPT_MORE
		character_event = { id = wizinit.5 }
	}
}

character_event = {
	id = wizinit.5
	desc = WIZSPECDESC
	picture = GFX_evt_wizard

	is_triggered_only = yes

	option = {
		name = WIZSPEC7
		add_trait = wiz_illusion
	}
	option = {
		trigger = {
			NOT = { trait = patron_kelemvor }
		}
		name = WIZSPEC8
		add_trait = wiz_necromancy
	}
	option = {
		name = TB_OPT_BACK
		character_event = { id = wizinit.3 }
	}
}

character_event = {
	id = wizinit.6
	desc = WIZINIT.6
	picture = GFX_evt_wizard

	is_triggered_only = yes

	option = {
		name = WIZINIT.6.a
		add_trait = longevity
	}
}

character_event = {
	id = wizinit.7
	desc = WIZINIT.7
	picture = GFX_evt_acererak_1

	is_triggered_only = yes

	option = {
		name = WIZINIT.7.a
		trigger = {
			NOR = {
				religion = natural
				religion = earthmother
				AND = {
					religion = earthmother_reformed
					is_evil_religion = no
				}
				religion = yuir
				AND = {
					religion = yuir_reformed
					is_evil_religion = no
				}
				olrox_is_good_religion_trigger = yes
			}
		}
		add_trait = lich
		turn_lich_effect = yes
	}

	option = {
		name = WIZINIT.7.b
		trigger = {
			NOR = {
				religion = blue_flame
				is_evil_religion = yes
			}
		}
		add_trait = archlich
		turn_lich_effect = yes
	}
}

character_event = {
	id = wizinit.8
	desc = WIZINIT.8
	picture = GFX_evt_acererak_1

	is_triggered_only = yes

	option = {
		name = WIZINIT.8.a
		set_character_flag = wiz_animated_dead
		character_event = { id = wizinit.9 days = 1000 }
		if = {
			limit = {
				OR = {
					AND = {
						trait = wizard
						NOT = { trait = wiz_necromancy }
					}
					AND = {
						trait = trained_wizard
						NOT = { trait = wiz_necromancy }
					}
					AND = {
						trait = cleric
						NAND = {
							z_wizard = yes
							trait = wiz_necromancy
						}
					}
					AND = {
						trait = trained_cleric
						NAND = {
							z_wizard = yes
							trait = wiz_necromancy
						}
					}
				}
			}
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = wizanimatedead
						troops = {
							undead_troops = { 400 400 }
						}
						attrition = 0.05
						maintenance_multiplier = 0.1
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					AND = {
						trait = journeyman_wizard
						NOT = { trait = wiz_necromancy }
					}
					AND = {
						trait = expert_wizard
						NOT = { trait = wiz_necromancy }
					}
					AND = {
						trait = journeyman_cleric
						NAND = {
							OR = {
								trait = journeyman_wizard
								trait = expert_wizard
								trait = master_wizard
								trait = renowned_wizard
								trait = legendary_wizard
							}
							trait = wiz_necromancy
						}
					}
					AND = {
						trait = expert_cleric
						NAND = {
							OR = {
								trait = journeyman_wizard
								trait = expert_wizard
								trait = master_wizard
								trait = renowned_wizard
								trait = legendary_wizard
							}
							trait = wiz_necromancy
						}
					}
				}
			}
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = wizanimatedead
						troops = {
							undead_troops = { 750 750 }
						}
						attrition = 0.05
						maintenance_multiplier = 0.1
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					AND = {
						trait = master_wizard
						NOT = { trait = wiz_necromancy }
					}
					AND = {
						trait = renowned_wizard
						NOT = { trait = wiz_necromancy }
					}
					AND = {
						trait = master_cleric
						NAND = {
							OR = {
								trait = master_wizard
								trait = renowned_wizard
								trait = legendary_wizard
							}
							trait = wiz_necromancy
						}
					}
					AND = {
						trait = renowned_cleric
						NAND = {
							OR = {
								trait = master_wizard
								trait = renowned_wizard
								trait = legendary_wizard
							}
							trait = wiz_necromancy
						}
					}
				}
			}
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = wizanimatedead
						troops = {
							undead_troops = { 1200 1200 }
						}
						attrition = 0.05
						maintenance_multiplier = 0.1
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					AND = {
						trait = legendary_wizard
						NOT = { trait = wiz_necromancy }
					}
					AND = {
						trait = legendary_cleric
						NAND = {
							OR = {
								trait = master_wizard
								trait = renowned_wizard
								trait = legendary_wizard
							}
							trait = wiz_necromancy
						}
					}
				}
			}
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = wizanimatedead
						troops = {
							undead_troops = { 1600 1600 }
						}
						attrition = 0.05
						maintenance_multiplier = 0.1
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}

		else_if = {
			limit = {
				OR = {
					trait = wizard
					trait = trained_wizard
				}
				trait = wiz_necromancy
			}
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = wizanimatedead
						troops = {
							undead_troops = { 600 600 }
						}
						attrition = 0.05
						maintenance_multiplier = 0.1
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					trait = journeyman_wizard
					trait = expert_wizard
				}
				trait = wiz_necromancy
			}
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = wizanimatedead
						troops = {
							undead_troops = { 1100 1100 }
						}
						attrition = 0.05
						maintenance_multiplier = 0.1
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					trait = master_wizard
					trait = renowned_wizard
				}
				trait = wiz_necromancy
			}
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = wizanimatedead
						troops = {
							undead_troops = { 1800 1800 }
						}
						attrition = 0.05
						maintenance_multiplier = 0.1
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}
		else_if = {
			limit = {
				trait = legendary_wizard
				trait = wiz_necromancy
			}
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = wizanimatedead
						troops = {
							undead_troops = { 2400 2400 }
						}
						attrition = 0.05
						maintenance_multiplier = 0.1
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}
	}
}

character_event = {
	id = wizinit.9
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		had_character_flag = {
			flag = wiz_animated_dead
			years = 2
		}
	}

	immediate = {
		clr_character_flag = wiz_animated_dead
		if = {
			limit = {
				has_earmarked_regiments = wizanimatedead
			}
			disband_event_forces = wizanimatedead
			character_event = { id = wizinit.10 }
		}
	}
}

character_event = {
	id = wizinit.10
	desc = WIZINIT.10
	picture = GFX_evt_wizard
	notification = yes

	is_triggered_only = yes

	option = {
		name = OK
	}
}

character_event = {
	id = wizinit.11
	desc = WIZINIT.11
	picture = GFX_evt_magic_2

	is_triggered_only = yes

	immediate = {
		set_character_flag = ritual_planar_binding
		hidden_tooltip = {
			character_event = {
				id = wizinit.14
				years = 5
			}
		}
	}

	option = {
		trigger = {
			OR = {
				AND = {
					NOT = { is_evil_religion = yes }
					z_cleric = no
				}
				olrox_is_good_religion_trigger = yes
			}
		}
		name = WIZINIT.11.a
		set_character_flag = binding_angel
		character_event = { id = wizinit.12 }
	}

	option = {
		trigger = {
			OR = {
				z_cleric = no
				AND = {
					olrox_is_good_religion_trigger = no
					is_evil_religion = no
				}
			}
		}
		name = WIZINIT.11.b
		character_event = { id = wizinit.22 }
	}

	option = {
		trigger = {
			OR = {
				NOR = {
					olrox_is_good_religion_trigger = yes
					religion = natural
					religion = earthmother
					religion = yuir
					z_cleric = yes
				}
				is_evil_religion = yes
			}
		}
		name = WIZINIT.11.c
		character_event = { id = wizinit.24 }
	}
}

#angel summon
character_event = {
	id = wizinit.12
	picture = GFX_evt_angels_2

	desc = { # angel
		trigger = {
			has_character_flag = binding_angel
		}
		text = WIZINIT.12.1
		picture = GFX_evt_angels_2
	}

	desc = { # genies
		trigger = {
			OR = {
				has_character_flag = binding_djinn
				has_character_flag = binding_dao
				has_character_flag = binding_efreet
				has_character_flag = binding_marid
			}
		}
		text = WIZINIT.12.2
		picture = GFX_evt_genie_1
	}

	desc = { # fiends
		trigger = {
			OR = {
				has_character_flag = binding_devil
				has_character_flag = binding_yugoloth
				has_character_flag = binding_demon
			}
		}
		text = WIZINIT.12.3
		picture = GFX_evt_demons_1
	}

	is_triggered_only = yes

	#negotiation block
	option = {
		name = WIZINIT.12.a
		hidden_tooltip = {
			random_list = {
				1 = { # agrees for free
					modifier = {
						factor = 2
						has_character_flag = binding_angel
						OR = {
							trait = kind
							trait = charitable
						}
					}
					modifier = {
						factor = 2
						OR = {
							has_character_flag = binding_djinn
							has_character_flag = binding_efreet
							has_character_flag = binding_dao
							has_character_flag = binding_marid
						}
						prestige = 500
					}
					modifier = {
						factor = 2
						OR = {
							has_character_flag = binding_angel
							AND = {
								has_character_flag = binding_demon
								religion = abyssal_cult
							}
							AND = {
								has_character_flag = binding_devil
								religion = infernal
							}
						}
						piety = 400
					}
					modifier = {
						factor = 1.5
						diplomacy = 10
					}
					character_event = { id = wizinit.13 }
				}
				5 = { # Demands a sacrifice of piety
					modifier = {
						factor = 0
						NOT = { has_character_flag = binding_angel }
					}
					character_event = { id = wizinit.17 }
				}
				10 = { # Demans a sacrifice of wealth
					character_event = { id = wizinit.18 }
				}
				5 = {  # Asks for soul
					trigger = {
						NOT = { has_character_flag = sold_soul }
						is_immune_to_conversion_trigger = no
					}
					modifier = {
						factor = 0
						NOR = {
							has_character_flag = binding_devil
							has_character_flag = binding_demon
							has_character_flag = binding_yugoloth
							has_character_flag = binding_marid
							trait = creature_angel
							trait = creature_fiend
							trait = creature_genie
						}
					}
					character_event = { id = wizinit.25 }
				}
			}
		}
	}

	#subjugation block
	option = {
		trigger = {
			NOT = { trait = kind }
		}
		name = WIZINIT.12.b
		random = {
			chance = 25
			add_trait = cruel
		}
		random_list = {
			3 = { # Win
				modifier = {
					factor = 1.5
					combat_rating = 15
					NOT = { combat_rating = 25 }
				}
				modifier = {
					factor = 2
					combat_rating = 25
					NOT = { combat_rating = 35 }
				}
				modifier = {
					factor = 3
					combat_rating = 35
				}
				modifier = {
					factor = 1.5
					learning = 8
					NOT = { learning = 10 }
				}
				modifier = {
					factor = 2
					learning = 10
					NOT = { learning = 13 }
				}
				modifier = {
					factor = 2.5
					learning = 13
				}
				modifier = {
					factor = 1.5
					is_smart_trigger = yes
				}
				modifier = {
					factor = 1.5
					is_strong_trigger = yes
				}
				character_event = { id = wizinit.19 }
			}
			3 = { # Defeated, but alive
				modifier = {
					factor = 1.5
					has_injury_trigger = yes
				}
				modifier = {
					factor = 4
					is_maimed_trigger = yes
				}
				modifier = {
					factor = 5
					has_severe_disability_trigger = yes
				}
				modifier = {
					factor = 1.3
					has_symptom_trigger = yes
				}
				modifier = {
					factor = 2.5
					character_disease_trigger = yes
				}
				modifier = {
					factor = 1.5
					is_weak_trigger = yes
				}
				modifier = {
					factor = 2
					NOT = { combat_rating = 10 }
				}
				character_event = { id = wizinit.20 }
			}
			1 = { # Death
				modifier = {
					factor = 1.5
					has_injury_trigger = yes
				}
				modifier = {
					factor = 4
					is_maimed_trigger = yes
				}
				modifier = {
					factor = 5
					has_severe_disability_trigger = yes
				}
				modifier = {
					factor = 1.3
					has_symptom_trigger = yes
				}
				modifier = {
					factor = 2.5
					character_disease_trigger = yes
				}
				modifier = {
					factor = 1.5
					is_weak_trigger = yes
				}
				modifier = {
					factor = 2
					NOT = { combat_rating = 10 }
				}
				character_event = { id = wizinit.21 }
			}
		}
	}

	#cleric block
	option = {
		name = WIZINIT.12.c
		tooltip_info = cleric
		trigger = {
			z_cleric = yes
		}
		ai_chance = {
			factor = 100
		}
		hidden_tooltip = {
			character_event = { id = wizinit.13 }
		}
	}
}

character_event = {
	id = wizinit.13
	picture = GFX_evt_angels_2

	desc = {
		trigger = {
			has_character_flag = binding_angel
		}
		text = WIZINIT.13
		picture = GFX_evt_angels_2
	}

	desc = {
		trigger = {
			OR = {
				has_character_flag = binding_dao
				has_character_flag = binding_djinn
				has_character_flag = binding_efreet
				has_character_flag = binding_marid
			}
		}
		text = WIZINIT.13
		picture = GFX_evt_genie_1
	}

	desc = {
		trigger = {
			OR = {
				has_character_flag = binding_devil
				has_character_flag = binding_demon
				has_character_flag = binding_yugoloth
			}
		}
		text = WIZINIT.13
		picture = GFX_evt_demons_1
	}
	after = {
		character_event = { id = generalmisc.52 }
		}

	is_triggered_only = yes

	option = {
		name = WIZINIT.13.a
		trigger_switch = {
			on_trigger = has_character_flag
			binding_angel = {
				if = {
					limit = {
						is_eladrin_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = celestial_eladrin
						dynasty = none
						immortal_age = 30
					}
				}
				else_if = {
					limit = {
						is_asura_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = asura
						dynasty = none
						immortal_age = 30
					}
				}
				else_if = {
					limit = {
						is_einheriar_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 5
							martial = 8
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = einheriar
						dynasty = none
						immortal_age = 30
					}
				}
				else_if = {
					limit = {
						is_moonmaiden_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = yes
						religion = ROOT
						culture = moonmaiden
						dynasty = none
						immortal_age = 30
					}
				}
				else_if = {
					limit = {
						is_arvoral_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = guardinal
						dynasty = none
						immortal_age = 30
					}
					new_character = {
						set_graphical_culture = arvoral
					}
				}
				else_if = {
					limit = {
						is_guardinal_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = guardinal
						dynasty = none
						immortal_age = 30
					}
					new_character = {
						spawn_random_guardinal = yes
					}
				}
				else_if = {
					limit = {
						is_archon_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = archon
						dynasty = none
						immortal_age = 30
					}
					new_character = {
						spawn_random_archon = yes
					}
				}
				else = {
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = angel
						dynasty = none
						immortal_age = 30
					}
					random = {
						chance = 20
						new_character = {
							set_graphical_culture = planetar
						}
					}
				}
			}
			binding_dao = {
				create_character = {
					age = 500
					attributes = {
						diplomacy = 6
						martial = 7
						stewardship = 8
						intrigue = 7
						learning = 7
					}
					trait = creature_genie
					random_traits = yes
					female = random
					religion = primordial
					culture = dao
					dynasty = none
					immortal_age = 30
				}
			}
			binding_djinn = {
				create_character = {
					age = 500
					attributes = {
						diplomacy = 8
						martial = 6
						stewardship = 7
						intrigue = 7
						learning = 7
					}
					trait = creature_genie
					random_traits = yes
					female = random
					religion = primordial
					culture = djinn
					dynasty = none
					immortal_age = 30
				}
			}
			binding_efreet = {
				create_character = {
					age = 500
					attributes = {
						diplomacy = 7
						martial = 8
						stewardship = 7
						intrigue = 7
						learning = 6
					}
					trait = creature_genie
					random_traits = yes
					female = random
					religion = primordial
					culture = efreet
					dynasty = none
					immortal_age = 30
				}
			}
			binding_marid = {
				create_character = {
					age = 500
					attributes = {
						diplomacy = 7
						martial = 7
						stewardship = 6
						intrigue = 8
						learning = 7
					}
					trait = creature_genie
					random_traits = yes
					female = random
					religion = primordial
					culture = marid
					dynasty = none
					immortal_age = 30
				}
			}
			binding_demon = {
				create_character = {
					age = 666
					attributes = {
						diplomacy = 4
						martial = 9
						stewardship = 4
						intrigue = 6
						learning = 5
					}
					trait = creature_fiend
					random_traits = yes
					female = random
					religion = abyssal_cult
					culture = tanarri
					dynasty = none
					immortal_age = 30
				}
			}
			binding_devil = {
				create_character = {
					age = 666
					attributes = {
						diplomacy = 5
						martial = 6
						stewardship = 5
						intrigue = 9
						learning = 5
					}
					trait = creature_fiend
					random_traits = yes
					female = random
					religion = infernal
					culture = baatezu
					dynasty = none
					immortal_age = 30
				}
				hidden_effect = {
					change_variable = {
						which = global_counter_baator
						value = 1
					}
				}
			}
			binding_yugoloth = {
				create_character = {
					age = 666
					attributes = {
						diplomacy = 6
						martial = 7
						stewardship = 6
						intrigue = 6
						learning = 4
					}
					trait = creature_fiend
					random_traits = yes
					female = random
					religion = shadow_gods
					culture = yugoloth
					dynasty = none
					immortal_age = 30
				}
			}
		}
		new_character = {
			opinion = {
				modifier = planar_binding_mod
				who = ROOT
				years = 10
			}
			if = {
				limit = {
					culture = tanarri
				}
				spawn_random_tanarri = yes
			}
			else_if = {
				limit = {
					culture = baatezu
				}
				spawn_random_baatezu = yes
			}
			else_if = {
				limit = {
					culture = yugoloth
				}
				spawn_random_yugoloth = yes
			}
			character_event = {
				id = wizinit.15
				years = 5
			}
		}
	}
}

##Clears All related flags after 5 years so planar binding can be reused
character_event = {
	id = wizinit.14
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		clr_character_flag = ritual_planar_binding
		clr_character_flag = binding_angel
		clr_character_flag = binding_djinn
		clr_character_flag = binding_efreet
		clr_character_flag = binding_dao
		clr_character_flag = binding_marid
		clr_character_flag = binding_devil
		clr_character_flag = binding_yugoloth
		clr_character_flag = binding_demon
	}
}

#Bound Character leaves the plane after 10 years unless it has a lover or is a ruler
character_event = {
	id = wizinit.15
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				NOT = { is_ruler = yes }
				NOT = { has_lover = yes }
			}
			death = { death_reason = death_planes }
			FROM = {
				character_event = { id = wizinit.16 }
			}
		}
		else = {
			character_event = { id = wizinit.15 years = 10 }
		}
	}
} 



character_event = {
	id = wizinit.16
	desc = WIZINIT.16
	picture = GFX_evt_wizard
	notification = yes

	is_triggered_only = yes

	option = {
		name = OK
	}
}

character_event = {
	id = wizinit.17
	desc = WIZINIT.17
	picture = GFX_evt_angels_2

	is_triggered_only = yes
	option = {
		name = WIZINIT.17.a
		piety = -150
		if = {
			limit = {
				is_eladrin_summoning_religion = yes
			}
			create_character = {
				age = 1000
				attributes = {
					diplomacy = 8
					martial = 5
					stewardship = 7
					intrigue = 4
					learning = 8
				}
				trait = creature_angel
				random_traits = yes
				female = random
				religion = ROOT
				culture = eladrin
				dynasty = none
				immortal_age = 30
			}
		}
		else_if = {
			limit = {
				is_asura_summoning_religion = yes
			}
			create_character = {
				age = 1000
				attributes = {
					diplomacy = 8
					martial = 5
					stewardship = 7
					intrigue = 4
					learning = 8
				}
				trait = creature_angel
				random_traits = yes
				female = random
				religion = ROOT
				culture = asura
				dynasty = none
				immortal_age = 30
			}
		}
		else_if = {
			limit = {
				is_einheriar_summoning_religion = yes
			}
			create_character = {
				age = 1000
				attributes = {
					diplomacy = 5
					martial = 8
					stewardship = 7
					intrigue = 4
					learning = 8
				}
				trait = creature_angel
				random_traits = yes
				female = random
				religion = ROOT
				culture = einheriar
				dynasty = none
				immortal_age = 30
			}
		}
		else_if = {
			limit = {
				is_moonmaiden_summoning_religion = yes
			}
			create_character = {
				age = 1000
				attributes = {
					diplomacy = 8
					martial = 5
					stewardship = 7
					intrigue = 4
					learning = 8
				}
				trait = creature_angel
				random_traits = yes
				female = yes
				religion = ROOT
				culture = moonmaiden
				dynasty = none
				immortal_age = 30
			}
		}
		else_if = {
			limit = {
				is_arvoral_summoning_religion = yes
			}
			create_character = {
				age = 1000
				attributes = {
					diplomacy = 8
					martial = 5
					stewardship = 7
					intrigue = 4
					learning = 8
				}
				trait = creature_angel
				random_traits = yes
				female = random
				religion = ROOT
				culture = guardinal
				dynasty = none
				immortal_age = 30
			}
			new_character = {
				set_graphical_culture = arvoral
			}
		}
		else_if = {
			limit = {
				is_guardinal_summoning_religion = yes
			}
			create_character = {
				age = 1000
				attributes = {
					diplomacy = 8
					martial = 5
					stewardship = 7
					intrigue = 4
					learning = 8
				}
				trait = creature_angel
				random_traits = yes
				female = random
				religion = ROOT
				culture = guardinal
				dynasty = none
				immortal_age = 30
			}
			new_character = {
				spawn_random_guardinal = yes
			}
		}
		else_if = {
			limit = {
				is_archon_summoning_religion = yes
			}
			create_character = {
				age = 1000
				attributes = {
					diplomacy = 8
					martial = 5
					stewardship = 7
					intrigue = 4
					learning = 8
				}
				trait = creature_angel
				random_traits = yes
				female = random
				religion = ROOT
				culture = archon
				dynasty = none
				immortal_age = 30
			}
			new_character = {
				spawn_random_archon = yes
			}
		}
		else = {
			create_character = {
				age = 1000
				attributes = {
					diplomacy = 8
					martial = 5
					stewardship = 7
					intrigue = 4
					learning = 8
				}
				trait = creature_angel
				random_traits = yes
				female = random
				religion = ROOT
				culture = angel
				dynasty = none
				immortal_age = 30
			}
			random = {
				chance = 20
				new_character = {
					set_graphical_culture = planetar
				}
			}
		}
		new_character = {
			opinion = {
				modifier = planar_binding_mod
				who = ROOT
				years = 10
			}
			character_event = {
				id = wizinit.15
				years = 5
			}
		}
	}

	option = {
		trigger = {
			NOT = { trait = kind }
		}
		name = WIZINIT.12.b
		random = {
			chance = 25
			add_trait = cruel
		}
		random_list = {
			3 = { # Win
				modifier = {
					factor = 1.5
					combat_rating = 15
					NOT = { combat_rating = 25 }
				}
				modifier = {
					factor = 2
					combat_rating = 25
					NOT = { combat_rating = 35 }
				}
				modifier = {
					factor = 3
					combat_rating = 35
				}
				modifier = {
					factor = 1.5
					learning = 8
					NOT = { learning = 10 }
				}
				modifier = {
					factor = 2
					learning = 10
					NOT = { learning = 13 }
				}
				modifier = {
					factor = 2.5
					learning = 13
				}
				modifier = {
					factor = 1.5
					is_smart_trigger = yes
				}
				modifier = {
					factor = 1.5
					is_strong_trigger = yes
				}
				character_event = { id = wizinit.19 }
			}
			3 = { # Defeated, but alive
				modifier = {
					factor = 1.5
					has_injury_trigger = yes
				}
				modifier = {
					factor = 4
					is_maimed_trigger = yes
				}
				modifier = {
					factor = 5
					has_severe_disability_trigger = yes
				}
				modifier = {
					factor = 1.3
					has_symptom_trigger = yes
				}
				modifier = {
					factor = 2.5
					character_disease_trigger = yes
				}
				modifier = {
					factor = 1.5
					is_weak_trigger = yes
				}
				modifier = {
					factor = 2
					NOT = { combat_rating = 10 }
				}
				character_event = { id = wizinit.20 }
			}
			1 = { # Death
				modifier = {
					factor = 1.5
					has_injury_trigger = yes
				}
				modifier = {
					factor = 4
					is_maimed_trigger = yes
				}
				modifier = {
					factor = 5
					has_severe_disability_trigger = yes
				}
				modifier = {
					factor = 1.3
					has_symptom_trigger = yes
				}
				modifier = {
					factor = 2.5
					character_disease_trigger = yes
				}
				modifier = {
					factor = 1.5
					is_weak_trigger = yes
				}
				modifier = {
					factor = 2
					NOT = { combat_rating = 10 }
				}
				character_event = { id = wizinit.21 }
			}
		}
	}

	option = {
		trigger = {
			ai = no
		}
		name = WIZINIT.17.c
		custom_tooltip = {
			text = BINDINGWARNING
		}
	}
}

character_event = {
	id = wizinit.18
	picture = GFX_evt_angels_2

	desc = {
		trigger = {
			has_character_flag = binding_angel
		}
		text = WIZINIT.18
		picture = GFX_evt_angels_2
	}

	desc = {
		trigger = {
			OR = {
				has_character_flag = binding_dao
				has_character_flag = binding_djinn
				has_character_flag = binding_efreet
				has_character_flag = binding_marid
			}
		}
		text = WIZINIT.18
		picture = GFX_evt_genie_1
	}

	desc = {
		trigger = {
			OR = {
				has_character_flag = binding_devil
				has_character_flag = binding_demon
				has_character_flag = binding_yugoloth
			}
		}
		text = WIZINIT.18
		picture = GFX_evt_demons_1
	}

	is_triggered_only = yes

	option = {
		name = WIZINIT.18.a
		scaled_wealth = -0.35
		trigger_switch = {
		on_trigger = has_character_flag
						binding_angel = {
				if = {
					limit = {
						is_eladrin_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = celestial_eladrin
						dynasty = none
						immortal_age = 30
					}
				}
				else_if = {
					limit = {
						is_asura_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = asura
						dynasty = none
						immortal_age = 30
					}
				}
				else_if = {
					limit = {
						is_einheriar_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 5
							martial = 8
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = einheriar
						dynasty = none
						immortal_age = 30
					}
				}
				else_if = {
					limit = {
						is_moonmaiden_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = yes
						religion = ROOT
						culture = moonmaiden
						dynasty = none
						immortal_age = 30
					}
				}
				else_if = {
					limit = {
						is_arvoral_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = yes
						religion = ROOT
						culture = guardinal
						dynasty = none
						immortal_age = 30
					}
					new_character = {
						set_graphical_culture = arvoral
					}
				}
				else_if = {
					limit = {
						is_guardinal_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = guardinal
						dynasty = none
						immortal_age = 30
					}
					new_character = {
						spawn_random_guardinal = yes
					}
				}
				else_if = {
					limit = {
						is_archon_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = archon
						dynasty = none
						immortal_age = 30
					}
					new_character = {
						spawn_random_archon = yes
					}
				}
				else = {
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = angel
						dynasty = none
						immortal_age = 30
					}
					random = {
						chance = 20
						new_character = {
							set_graphical_culture = planetar
						}
					}
				}
			}
			binding_dao = {
				create_character = {
					age = 500
					attributes = {
						diplomacy = 6
						martial = 7
						stewardship = 8
						intrigue = 7
						learning = 7
					}
					trait = creature_genie
					random_traits = yes
					female = random
					religion = primordial
					culture = dao
					dynasty = none
					immortal_age = 30
				}
			}
			binding_djinn = {
				create_character = {
					age = 500
					attributes = {
						diplomacy = 8
						martial = 6
						stewardship = 7
						intrigue = 7
						learning = 7
					}
					trait = creature_genie
					random_traits = yes
					female = random
					religion = primordial
					culture = djinn
					dynasty = none
					immortal_age = 30
				}
			}
			binding_efreet = {
				create_character = {
					age = 500
					attributes = {
						diplomacy = 7
						martial = 8
						stewardship = 7
						intrigue = 7
						learning = 6
					}
					trait = creature_genie
					random_traits = yes
					female = random
					religion = primordial
					culture = efreet
					dynasty = none
					immortal_age = 30
				}
			}
			binding_marid = {
				create_character = {
					age = 500
					attributes = {
						diplomacy = 7
						martial = 7
						stewardship = 6
						intrigue = 8
						learning = 7
					}
					trait = creature_genie
					random_traits = yes
					female = random
					religion = primordial
					culture = marid
					dynasty = none
					immortal_age = 30
				}
			}
			binding_demon = {
				create_character = {
					age = 666
					attributes = {
						diplomacy = 4
						martial = 9
						stewardship = 4
						intrigue = 6
						learning = 5
					}
					trait = creature_fiend
					random_traits = yes
					female = random
					religion = abyssal_cult
					culture = tanarri
					dynasty = none
					immortal_age = 30
				}
			}
			binding_devil = {
				create_character = {
					age = 666
					attributes = {
						diplomacy = 5
						martial = 6
						stewardship = 5
						intrigue = 9
						learning = 5
					}
					trait = creature_fiend
					random_traits = yes
					female = random
					religion = infernal
					culture = baatezu
					dynasty = none
					immortal_age = 30
				}
				change_variable = {
					which = global_counter_baator
					value = 1
				}
			}
			binding_yugoloth = {
				create_character = {
					age = 666
					attributes = {
						diplomacy = 6
						martial = 7
						stewardship = 6
						intrigue = 6
						learning = 4
					}
					trait = creature_fiend
					random_traits = yes
					female = random
					religion = shadow_gods
					culture = yugoloth
					dynasty = none
					immortal_age = 30
				}
			}
		}
		new_character = {
			opinion = {
				modifier = planar_binding_mod
				who = ROOT
				years = 10
			}
			if = {
				limit = {
					culture = tanarri
				}
				spawn_random_tanarri = yes
			}
			else_if = {
				limit = {
					culture = baatezu
				}
				spawn_random_baatezu = yes
			}
			else_if = {
				limit = {
					culture = yugoloth
				}
				spawn_random_yugoloth = yes
			}
			character_event = {
				id = wizinit.15
				years = 5
			}
		}
		character_event = { id = generalmisc.52 }	

	}

	option = {
		trigger = {
			NOT = { trait = kind }
		}
		name = WIZINIT.12.b
		random = {
			chance = 25
			add_trait = cruel
		}
		random_list = {
			3 = { # Win
				modifier = {
					factor = 1.5
					combat_rating = 15
					NOT = { combat_rating = 25 }
				}
				modifier = {
					factor = 2
					combat_rating = 25
					NOT = { combat_rating = 35 }
				}
				modifier = {
					factor = 3
					combat_rating = 35
				}
				modifier = {
					factor = 1.5
					learning = 8
					NOT = { learning = 10 }
				}
				modifier = {
					factor = 2
					learning = 10
					NOT = { learning = 13 }
				}
				modifier = {
					factor = 2.5
					learning = 13
				}
				modifier = {
					factor = 1.5
					is_smart_trigger = yes
				}
				modifier = {
					factor = 1.5
					is_strong_trigger = yes
				}
				character_event = { id = wizinit.19 }
			}
			3 = { # Defeated, but alive
				modifier = {
					factor = 1.5
					has_injury_trigger = yes
				}
				modifier = {
					factor = 4
					is_maimed_trigger = yes
				}
				modifier = {
					factor = 5
					has_severe_disability_trigger = yes
				}
				modifier = {
					factor = 1.3
					has_symptom_trigger = yes
				}
				modifier = {
					factor = 2.5
					character_disease_trigger = yes
				}
				modifier = {
					factor = 1.5
					is_weak_trigger = yes
				}
				modifier = {
					factor = 2
					NOT = { combat_rating = 10 }
				}
				character_event = { id = wizinit.20 }
			}
			1 = { # Death
				modifier = {
					factor = 1.5
					has_injury_trigger = yes
				}
				modifier = {
					factor = 4
					is_maimed_trigger = yes
				}
				modifier = {
					factor = 5
					has_severe_disability_trigger = yes
				}
				modifier = {
					factor = 1.3
					has_symptom_trigger = yes
				}
				modifier = {
					factor = 2.5
					character_disease_trigger = yes
				}
				modifier = {
					factor = 1.5
					is_weak_trigger = yes
				}
				modifier = {
					factor = 2
					NOT = { combat_rating = 10 }
				}
				character_event = { id = wizinit.21 }
			}
		}
	}

	option = {
		trigger = {
			ai = no
		}
		name = WIZINIT.17.c
		custom_tooltip = {
			text = BINDINGWARNING
		}
	}
}

character_event = {
	id = wizinit.19
	picture = GFX_evt_angels_2

	desc = {
		trigger = {
			has_character_flag = binding_angel
		}
		text = WIZINIT.19
		picture = GFX_evt_angels_2
	}
after = {
		character_event = { id = generalmisc.52 }
		}

	desc = {
		trigger = {
			OR = {
				has_character_flag = binding_dao
				has_character_flag = binding_djinn
				has_character_flag = binding_efreet
				has_character_flag = binding_marid
			}
		}
		text = WIZINIT.19
		picture = GFX_evt_genie_1
	}

	desc = {
		trigger = {
			OR = {
				has_character_flag = binding_devil
				has_character_flag = binding_demon
				has_character_flag = binding_yugoloth
			}
		}
		text = WIZINIT.19
		picture = GFX_evt_demons_1
	}

	is_triggered_only = yes

	option = {
		name = WIZINIT.19.a
		trigger_switch = {
			on_trigger = has_character_flag
			binding_angel = {
				if = {
					limit = {
						is_eladrin_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = celestial_eladrin
						dynasty = none
						immortal_age = 30
					}
				}
				else_if = {
					limit = {
						is_asura_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = asura
						dynasty = none
						immortal_age = 30
					}
				}
				else_if = {
					limit = {
						is_einheriar_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 5
							martial = 8
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = einheriar
						dynasty = none
						immortal_age = 30
					}
				}
				else_if = {
					limit = {
						is_moonmaiden_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = yes
						religion = ROOT
						culture = moonmaiden
						dynasty = none
						immortal_age = 30
					}
				}
				else_if = {
					limit = {
						is_arvoral_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = yes
						religion = ROOT
						culture = guardinal
						dynasty = none
						immortal_age = 30
					}
					new_character = {
						set_graphical_culture = arvoral
					}
				}
				else_if = {
					limit = {
						is_guardinal_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = guardinal
						dynasty = none
						immortal_age = 30
					}
					new_character = {
						spawn_random_guardinal = yes
					}
				}
				else_if = {
					limit = {
						is_archon_summoning_culture = yes
					}
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = archon
						dynasty = none
						immortal_age = 30
					}
					new_character = {
						spawn_random_archon = yes
					}
				}
				else = {
					create_character = {
						age = 1000
						attributes = {
							diplomacy = 8
							martial = 5
							stewardship = 7
							intrigue = 4
							learning = 8
						}
						trait = creature_angel
						random_traits = yes
						female = random
						religion = ROOT
						culture = angel
						dynasty = none
						immortal_age = 30
					}
					random = {
						chance = 20
						new_character = {
							set_graphical_culture = planetar
						}
					}
				}
			}
			binding_dao = {
				create_character = {
					age = 500
					attributes = {
						diplomacy = 6
						martial = 7
						stewardship = 8
						intrigue = 7
						learning = 7
					}
					trait = creature_genie
					random_traits = yes
					female = random
					religion = primordial
					culture = dao
					dynasty = none
					immortal_age = 30
				}
			}
			binding_djinn = {
				create_character = {
					age = 500
					attributes = {
						diplomacy = 8
						martial = 6
						stewardship = 7
						intrigue = 7
						learning = 7
					}
					trait = creature_genie
					random_traits = yes
					female = random
					religion = primordial
					culture = djinn
					dynasty = none
					immortal_age = 30
				}
			}
			binding_efreet = {
				create_character = {
					age = 500
					attributes = {
						diplomacy = 7
						martial = 8
						stewardship = 7
						intrigue = 7
						learning = 6
					}
					trait = creature_genie
					random_traits = yes
					female = random
					religion = primordial
					culture = efreet
					dynasty = none
					immortal_age = 30
				}
			}
			binding_marid = {
				create_character = {
					age = 500
					attributes = {
						diplomacy = 7
						martial = 7
						stewardship = 6
						intrigue = 8
						learning = 7
					}
					trait = creature_genie
					random_traits = yes
					female = random
					religion = primordial
					culture = marid
					dynasty = none
					immortal_age = 30
				}
			}
			binding_demon = {
				create_character = {
					age = 666
					attributes = {
						diplomacy = 4
						martial = 9
						stewardship = 4
						intrigue = 6
						learning = 5
					}
					trait = creature_fiend
					random_traits = yes
					female = random
					religion = abyssal_cult
					culture = tanarri
					dynasty = none
					immortal_age = 30
				}
			}
			binding_devil = {
				create_character = {
					age = 666
					attributes = {
						diplomacy = 5
						martial = 6
						stewardship = 5
						intrigue = 9
						learning = 5
					}
					trait = creature_fiend
					random_traits = yes
					female = random
					religion = infernal
					culture = baatezu
					dynasty = none
					immortal_age = 30
				}
				change_variable = {
					which = global_counter_baator
					value = 1
				}
			}
			binding_yugoloth = {
				create_character = {
					age = 666
					attributes = {
						diplomacy = 6
						martial = 7
						stewardship = 6
						intrigue = 6
						learning = 4
					}
					trait = creature_fiend
					random_traits = yes
					female = random
					religion = shadow_gods
					culture = yugoloth
					dynasty = none
					immortal_age = 30
				}
			}
		}
		new_character = {
			opinion = {
				modifier = planar_binding_mod
				who = ROOT
				years = 10
			}
			if = {
				limit = {
					culture = tanarri
				}
				spawn_random_tanarri = yes
			}
			else_if = {
				limit = {
					culture = baatezu
				}
				spawn_random_baatezu = yes
			}
			else_if = {
				limit = {
					culture = yugoloth
				}
				spawn_random_yugoloth = yes
			}
			character_event = {
				id = wizinit.15
				years = 5
			}
		}
	}
}

character_event = {
	id = wizinit.20
	picture = GFX_evt_angels_2

	desc = {
		trigger = {
			has_character_flag = binding_angel
		}
		text = WIZINIT.20
		picture = GFX_evt_angels_2
	}

	desc = {
		trigger = {
			OR = {
				has_character_flag = binding_dao
				has_character_flag = binding_djinn
				has_character_flag = binding_efreet
				has_character_flag = binding_marid
			}
		}
		text = WIZINIT.20
		picture = GFX_evt_genie_1
	}

	desc = {
		trigger = {
			OR = {
				has_character_flag = binding_devil
				has_character_flag = binding_demon
				has_character_flag = binding_yugoloth
			}
		}
		text = WIZINIT.20
		picture = GFX_evt_demons_1
	}

	is_triggered_only = yes

	option = {
		name = WIZINIT.20.a
		if = {
			limit = {
				NOT = { has_injury_trigger = yes }
			}
			add_trait_wounded_effect = yes
		}
		else_if = {
			limit = {
				has_injury_trigger = yes
			}
			add_maimed_trait_effect = yes
		}
	}
}

character_event = {
	id = wizinit.21
	picture = GFX_evt_angels_2

	desc = {
		trigger = {
			has_character_flag = binding_angel
		}
		text = WIZINIT.21
		picture = GFX_evt_angels_2
	}

	desc = {
		trigger = {
			OR = {
				has_character_flag = binding_dao
				has_character_flag = binding_djinn
				has_character_flag = binding_efreet
				has_character_flag = binding_marid
			}
		}
		text = WIZINIT.21
		picture = GFX_evt_genie_1
	}

	desc = {
		trigger = {
			OR = {
				has_character_flag = binding_devil
				has_character_flag = binding_demon
				has_character_flag = binding_yugoloth
			}
		}
		text = WIZINIT.21
		picture = GFX_evt_demons_1
	}

	is_triggered_only = yes

	option = {
		name = WIZINIT.21.a
		death = { death_reason = death_binding }
	}
}

character_event = {
	id = wizinit.22
	desc = WIZINIT.22
	picture = GFX_evt_genie_1

	is_triggered_only = yes

	option = { # Djinn
		trigger = {
			NOR = {
				religion = geomancy
				trait = patron_grumbar
			}
		}
		name = WIZINIT.22.a
		set_character_flag = binding_djinn
		character_event = { id = wizinit.12 }
	}

	option = { # Efreet
		trigger = {
			NOR = {
				trait = patron_istishia
			}
		}
		name = WIZINIT.22.b
		set_character_flag = binding_efreet
		character_event = { id = wizinit.12 }
	}

	option = { # Dao
		trigger = {
			NOR = {
				trait = patron_akadi
			}
		}
		name = WIZINIT.22.c
		set_character_flag = binding_dao
		character_event = { id = wizinit.12 }
	}

	option = {
		trigger = {
			OR = {
				ai = no
				AND = {
					ai = yes
					NOR = {
						religion = kossuth
						trait = patron_kossuth
						trait = patron_bazim_gorag
						trait = patron_achazar
						trait = patron_rorn
					}
				}
			}
		}
		name = TB_OPT_MORE
		character_event = { id = wizinit.23 }
	}
}

character_event = {
	id = wizinit.23
	desc = WIZINIT.22
	picture = GFX_evt_genie_1

	is_triggered_only = yes

	option = { # Marid
		trigger = {
			NOR = {
				religion = kossuth
				trait = patron_kossuth
				trait = patron_bazim_gorag
				trait = patron_achazar
				trait = patron_rorn
			}
		}
		name = WIZINIT.23.a
		set_character_flag = binding_marid
		character_event = { id = wizinit.12 }
	}

	option = {
		trigger = {
			ai = no
		}
		name = TB_OPT_BACK
		character_event = { id = wizinit.22 }
	}

	option = {
		trigger = {
			ai = no
		}
		name = EXIT

		hidden_effect = {
			clear_delayed_event = { id = wizinit.14 }
			clr_character_flag = ritual_planar_binding
		}
		wealth = local_summon_cost
	}
}

character_event = {
	id = wizinit.24
	desc = WIZINIT.24
	picture = GFX_evt_demons_1

	is_triggered_only = yes

	option = { # Baatezu
		trigger = {
			NOR = {
				religion = abyssal_cult
				secret_religion = abyssal_cult
			}
		}
		name = WIZINIT.24.a
		set_character_flag = binding_devil
		character_event = { id = wizinit.12 }
	}

	option = { # Yugoloth
		name = WIZINIT.24.b
		set_character_flag = binding_yugoloth
		character_event = { id = wizinit.12 }
	}

	option = { # Tanar'ri
		trigger = {
			NOR = {
				religion = infernal
				secret_religion = infernal
			}
		}
		name = WIZINIT.24.c
		set_character_flag = binding_demon
		character_event = { id = wizinit.12 }
	}

	option = {
		trigger = {
			ai = no
		}
		name = EXIT

		hidden_effect = {
			clear_delayed_event = { id = wizinit.14 }
			clr_character_flag = ritual_planar_binding
		}
		wealth = local_summon_cost
	}
}

character_event = {
	id = wizinit.25
	desc = WIZINIT.25
	picture = GFX_evt_demons_1

	is_triggered_only = yes

	option = {
		name = WIZINIT.25.a
		set_character_flag = sold_soul
		trigger_switch = {
			on_trigger = has_character_flag
			binding_demon = {
				set_secret_religion = abyssal_cult
				if = {
					limit = { has_planetouched_subtype = no }
					add_trait = planetouched
					add_character_modifier = {
						name = demon_tiefling
						duration = -1
					}
				}
				create_character = {
					age = 666
					attributes = {
						diplomacy = 4
						martial = 9
						stewardship = 4
						intrigue = 6
						learning = 5
					}
					trait = creature_fiend
					random_traits = yes
					female = random
					religion = abyssal_cult
					culture = tanarri
					dynasty = none
					immortal_age = 30
				}
			}
			binding_devil = {
				set_secret_religion = infernal
				if = {
					limit = { has_planetouched_subtype = no }
					add_trait = planetouched
					add_character_modifier = {
						name = devil_tiefling
						duration = -1
					}
				}
				create_character = {
					age = 666
					attributes = {
						diplomacy = 5
						martial = 6
						stewardship = 5
						intrigue = 9
						learning = 5
					}
					trait = creature_fiend
					random_traits = yes
					female = random
					religion = infernal
					culture = baatezu
					dynasty = none
					immortal_age = 30
				}
				change_variable = {
					which = global_counter_baator
					value = 1
				}
			}
			binding_yugoloth = {
				if = {
					limit = { has_planetouched_subtype = no }
					add_trait = planetouched
					add_character_modifier = {
						name = yugoloth_tiefling
						duration = -1
					}
				}
				create_character = {
					age = 666
					attributes = {
						diplomacy = 6
						martial = 7
						stewardship = 6
						intrigue = 6
						learning = 4
					}
					trait = creature_fiend
					random_traits = yes
					female = random
					religion = shadow_gods
					culture = yugoloth
					dynasty = none
					immortal_age = 30
				}
			}
			binding_marid = {
				if = {
					limit = { has_planetouched_subtype = no }
					add_trait = planetouched
					add_character_modifier = {
						name = water_genasi
						duration = -1
					}
				}
				create_character = {
					age = 500
					attributes = {
						diplomacy = 7
						martial = 7
						stewardship = 6
						intrigue = 8
						learning = 7
					}
					trait = creature_genie
					random_traits = yes
					female = random
					religion = primordial
					culture = marid
					dynasty = none
					immortal_age = 30
				}
			}
		}
		new_character = {
			opinion = {
				modifier = planar_binding_mod
				who = ROOT
				years = 10
			}
			if = {
				limit = {
					culture = tanarri
				}
				spawn_random_tanarri = yes
			}
			else_if = {
				limit = {
					culture = baatezu
				}
				spawn_random_baatezu = yes
			}
			else_if = {
				limit = {
					culture = yugoloth
				}
				spawn_random_yugoloth = yes
			}
			character_event = {
				id = wizinit.15
				years = 5
			}
		}
		character_event = { id = generalmisc.52 }	

	}
}

character_event = {
	id = wizinit.26
	desc = WIZINIT.26
	picture = GFX_evt_magic_2

	is_triggered_only = yes

	option = {
		name = WIZINIT.26.a
		add_trait_wounded_effect = yes
		add_artifact = homunculus_artf
	}
	option = {
		name = WIZINIT.26.b
		add_artifact = wiz_familiar_artf
	}
}

character_event = {
	id = wizinit.27
	desc = WIZINIT.27
	picture = GFX_evt_magic_2

	is_triggered_only = yes

	option = {
		name = WIZINIT.27.a
		random_realm_character = {
			limit = {
				has_plot = yes
				NOT = { plot_is_known_by = ROOT }
			}
			reveal_plot = ROOT
		}
	}
}

character_event = {
	id = wizinit.28
	desc = WIZINIT.28
	picture = GFX_evt_magic

	is_triggered_only = yes

	option = {
		set_character_flag = wiz_summon_elementals
		name = WIZINIT.28.a
		character_event = { id = wizinit.29 days = 1000 }

		if = {
			limit = {
				NOR = {
					trait = wiz_conjuration
					trait = warlock_fiend
					trait = warlock_elemental
				}
			}
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = wizelementals
						troops = {
							elemental_troops = { 600 600 }
						}
						attrition = 0.05
						maintenance_multiplier = 0.1
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					trait = wiz_conjuration
					trait = warlock_fiend
					trait = warlock_elemental
				}
			}
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = wizelementals
						troops = {
							elemental_troops = { 1000 1000 }
						}
						attrition = 0.05
						maintenance_multiplier = 0.1
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}
	}
}

character_event = {
	id = wizinit.29
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		clr_character_flag = wiz_summon_elementals
		if = {
			limit = {
				has_earmarked_regiments = wizelementals
			}
			disband_event_forces = wizelementals
			character_event = { id = wizinit.30 }
		}
	}
}

character_event = {
	id = wizinit.30
	desc = WIZINIT.30
	picture = GFX_evt_wizard
	notification = yes

	is_triggered_only = yes

	option = {
		name = OK
	}
}

character_event = {
	id = wizinit.31
	desc = WIZINIT.31
	picture = GFX_evt_wizard

	is_triggered_only = yes

	option = {
		name = WIZINIT.31.a
		set_character_flag = wiz_summon_illusions
		character_event = { id = wizinit.32 days = 1000 }

		if = {
			limit = {
				OR = {
					trait = wizard
					trait = trained_wizard
					trait = warlock
					trait = trained_warlock
					trait = bard
					trait = trained_bard
				}
			}
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = wizillusions
						troops = {
							illusory_troops = { 600 600 }
						}
						attrition = 0
						maintenance_multiplier = 0
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					trait = journeyman_wizard
					trait = expert_wizard
					trait = journeyman_warlock
					trait = expert_warlock
					trait = journeyman_bard
					trait = expert_bard
				}
			}
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = wizillusions
						troops = {
							illusory_troops = { 1100 1100 }
						}
						attrition = 0
						maintenance_multiplier = 0
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					trait = master_wizard
					trait = renowned_wizard
					trait = master_warlock
					trait = renowned_warlock
					trait = master_bard
					trait = renowned_bard
				}
			}
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = wizillusions
						troops = {
							illusory_troops = { 1800 1800 }
						}
						attrition = 0
						maintenance_multiplier = 0
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					trait = legendary_wizard
					trait = legendary_warlock
					trait = legendary_bard
				}
			}
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = wizillusions
						troops = {
							illusory_troops = { 2400 2400 }
						}
						attrition = 0
						maintenance_multiplier = 0
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}
	}
}

character_event = {
	id = wizinit.32
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		clr_character_flag = wiz_summon_illusions
		if = {
			limit = {
				has_earmarked_regiments = wizillusions
			}
			disband_event_forces = wizillusions
			character_event = { id = wizinit.33 }
		}
	}
}

character_event = {
	id = wizinit.33
	desc = WIZINIT.33
	picture = GFX_evt_wizard
	notification = yes

	is_triggered_only = yes

	option = {
		name = OK
	}
}

character_event = {
	id = wizinit.34
	desc = WIZINIT.34
	picture = GFX_evt_demons_1

	is_triggered_only = yes

	option = {
		name = WIZINIT.34.a
		set_character_flag = wiz_summon_fiends
		character_event = { id = wizinit.35 days = 1000 }

		if = {
			limit = {
				OR = {
					trait = journeyman_wizard
					trait = expert_wizard
					trait = journeyman_warlock
					trait = expert_warlock
				}
				OR = {
					trait = wiz_conjuration
					trait = warlock_fiend
				}
			}
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = wizsummonedfiends
						troops = {
							light_infantry = { 800 800 }
							beast_troops = { 50 50 }
						}
						attrition = 0.5
						maintenance_multiplier = 0.1
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					trait = master_wizard
					trait = renowned_wizard
					trait = master_warlock
					trait = renowned_warlock
				}
				OR = {
					trait = wiz_conjuration
					trait = warlock_fiend
				}
			}
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = wizsummonedfiends
						troops = {
							light_infantry = { 1000 1000 }
							beast_troops = { 200 200 }
						}
						attrition = 0.5
						maintenance_multiplier = 0.1
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					trait = legendary_wizard
					trait = legendary_warlock
				}
				OR = {
					trait = wiz_conjuration
					trait = warlock_fiend
				}
			}
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = wizsummonedfiends
						troops = {
							light_infantry = { 1000 1000 }
							beast_troops = { 400 400 }
						}
						attrition = 0.5
						maintenance_multiplier = 0.1
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}
		else = {
			location = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						leader = ROOT
						earmark = wizsummonedfiends
						troops = {
							light_infantry = { 600 600 }
						}
						attrition = 0.5
						maintenance_multiplier = 0.1
						cannot_inherit = yes
						disband_on_peace = yes
						can_toggle_looting = no
						is_looter = no
						reinforces = no
					}
				}
			}
		}
	}
}

character_event = {
	id = wizinit.35
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		clr_character_flag = wiz_summon_fiends
		if = {
			limit = {
				has_earmarked_regiments = wizsummonedfiends
			}
			disband_event_forces = wizsummonedfiends
			character_event = { id = wizinit.36 }
		}
	}
}

character_event = {
	id = wizinit.36
	desc = WIZINIT.36
	picture = GFX_evt_wizard
	notification = yes

	is_triggered_only = yes

	option = {
		name = OK
	}
}

character_event = {
	id = wizinit.37
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		clr_character_flag = abyss_summon_fiends
		if = {
			limit = {
				has_earmarked_regiments = abysssummonedfiends
			}
			disband_event_forces = abysssummonedfiends
			character_event = { id = wizinit.36 }
		}
	}
}
