namespace = MNM

###JOINING###

#From on_character_ask_to_join_society
character_event = {
    id = MNM.4450
	hide_window = yes
    is_triggered_only = yes
    trigger = {
    	FROM = { leader = { is_monastic_member_trigger = yes } }
    }
    immediate = {
    	FROM = { leader = { character_event = { id = MNM.4451 } } }
    }
}

#Ping event
character_event = {
    id = MNM.4451
	hide_window = yes
    is_triggered_only = yes
    immediate = {
    	FROM = { letter_event = { id = MNM.4452 } }
    }
}

#Welcome letter
letter_event = {
    id = MNM.4452
    desc = EVTDESC_MNM_4452
    border = GFX_event_letter_frame_religion

    is_triggered_only = yes

	immediate = { set_character_flag = society_join_block }

    option = {
        name = EVTOPTA_MNM_44511

        FROM = {
        	show_scope_change = no
        	ROOT = {
        		show_scope_change = no
        		join_prev_monastic_order_society = yes
        	}
        }

  		scaled_wealth = -0.25

        #FROM = { society = { save_event_target_as = joining_society } }
        #join_society = event_target:joining_society

  		clr_character_flag = society_join_block
    }
}

########################AI JOIN AND AI RANK UP###########################
#FOR SUN SOUL,LONG DEATH, EMPTY HAND, OLD ORDER. CHANGE WITH NEW SOCIETIES

character_event = { #force the AI to join a society
  id = MNM.4453
  hide_window = yes
  is_triggered_only = yes

	immediate = {
		if = {
			limit = { #if he's already a member, will force a rank up 25% of the time
				ai = yes
				prisoner = no
				NOT = { trait = incapable }
				higher_tier_than = BARON
        is_monastic_member_trigger = yes
				society_rank <= 3
				society_can_rank_up = yes
			}
			random_list = {
				75 = {}
				25 = {
					society_rank_up = 1
				}
			}
		}
		if = { #SUN SOUL AI join event
      limit = {
        ai = yes
        prisoner = no
        NOT = { trait = incapable }
        is_adult = yes
        is_in_society = no
        controls_religion = no
        block_general_event_trigger = no

        #society specific conditions below
        olrox_is_good_religion_trigger = yes
        NOT = {
          capital_scope = {
      			region = kara_tur_region
      		}
        }
      }
      character_event = { id = MNM.4454 }
    }
    else_if = { #LONG DEATH AI join event
      limit = {
        ai = yes
        prisoner = no
        NOT = { trait = incapable }
        is_adult = yes
        is_in_society = no
        controls_religion = no
        block_general_event_trigger = no

        #society specific conditions below
        is_evil_religion = yes
        NOT = {
          capital_scope = {
      			region = kara_tur_region
      		}
        }
      }
			character_event = { id = MNM.4455 }
		}
    else_if = { #OLD ORDER AI join event
      limit = {
        ai = yes
        prisoner = no
        NOT = { trait = incapable }
        is_adult = yes
        is_in_society = no
        controls_religion = no
        block_general_event_trigger = no

        #society specific conditions below
        NOT = {
          capital_scope = {
      			region = kara_tur_region
      		}
        }
      }
      character_event = { id = MNM.4457 }
    }
    else_if = { #EMPTY HAND AI join event
      limit = {
        ai = yes
        prisoner = no
        NOT = { trait = incapable }
        is_adult = yes
        is_in_society = no
        controls_religion = no
        block_general_event_trigger = no

        #society specific conditions below
        capital_scope = {
          region = kara_tur_region
        }
        OR = {
          culture_group = shou_group
          culture_group = katakoro_group
          culture_group = celestial_sea_group
          culture_group = amaese_group
        }
      }
      character_event = { id = MNM.4456 }
    }
	}
}

character_event = { #SUN SOUL AI join event
	id = MNM.4454
	hide_window = yes

	is_triggered_only = yes

  immediate = {
    random_list = {
      60 = { # do nothing
      }
      40 = {
        trigger = { #meet the requirement
          can_join_society = monastic_order_sun_soul
        }
        modifier = {
          factor = 2
          z_monk = yes
        }
        modifier = {
          factor = 100
    			has_landed_title = d_sun_soul
    		}
        modifier = {
          factor = 2
          OR = {
            trait = mystic
            trait = scholar
            trait = theologian
          }
        }
        modifier = {
          factor = 2
          trait = erudite
        }
        modifier = {
          factor = 2
          trait = kind
        }
        modifier = {
          factor = 2
          trait = content
        }
        modifier = {
          factor = 0.2
          OR = {
            trait = deceitful
            trait = arbitrary
            trait = slothful
          }
        }

        join_society = monastic_order_sun_soul
        random_list = {
          75 = {
            modifier = {
              factor = 0
              society_influence >= 30
            }
          }
          25 = {
          }
        }
        if = { # Make grandmaster is there is none
          limit = {
            NOT = {
              society = {
                any_society_member = {
                  is_society_grandmaster = yes
                }
              }
            }
          }
          set_society_grandmaster = yes
        }
      }
    }
  }
}

character_event = { #LONG DEATH AI join event
	id = MNM.4455
	hide_window = yes

	is_triggered_only = yes

  immediate = {
    random_list = {
      60 = { # do nothing
      }
      40 = {
        trigger = { #meet the requirement
          can_join_society = monastic_order_long_death
        }
        modifier = {
          factor = 2
          z_monk = yes
        }
        modifier = {
          factor = 100
    			has_landed_title = d_long_death
    		}
        modifier = {
          factor = 2
          OR = {
            trait = mystic
            trait = impaler
          }
        }
        modifier = {
          factor = 2
          trait = lunatic
        }
        modifier = {
          factor = 2
          trait = cruel
        }
        modifier = {
          factor = 2
          trait = envious
        }
        modifier = {
          factor = 2
          trait = paranoid
        }
        modifier = {
          factor = 0.2
          OR = {
            trait = charitable
            trait = arbitrary
            trait = craven
            trait = slothful
          }
        }

        join_society = monastic_order_long_death
        random_list = {
          75 = {
            modifier = {
              factor = 0
              society_influence >= 30
            }
          }
          25 = {
          }
        }
        if = { # Make grandmaster is there is none
          limit = {
            NOT = {
              society = {
                any_society_member = {
                  is_society_grandmaster = yes
                }
              }
            }
          }
          set_society_grandmaster = yes
        }
      }
    }
  }
}

character_event = { #EMPTY HAND AI join event
	id = MNM.4456
	hide_window = yes

	is_triggered_only = yes

  immediate = {
    random_list = {
      60 = { # do nothing
      }
      40 = {
        trigger = { #meet the requirement
          can_join_society = monastic_order_empty_hand
        }
        modifier = {
          factor = 2
          z_monk = yes
        }
        modifier = {
          factor = 2
          OR = {
            trait = mystic
            trait = scholar
            trait = duelist
          }
        }
        modifier = {
          factor = 2
          trait = erudite
        }
        modifier = {
          factor = 2
          trait = just
        }
        modifier = {
          factor = 2
          trait = honest
        }
        modifier = {
          factor = 0.1
          OR = {
            trait = deceitful
            trait = arbitrary
            trait = slothful
          }
        }

        join_society = monastic_order_empty_hand
        random_list = {
          75 = {
            modifier = {
              factor = 0
              society_influence >= 30
            }
          }
          25 = {
          }
        }
        if = { # Make grandmaster is there is none
          limit = {
            NOT = {
              society = {
                any_society_member = {
                  is_society_grandmaster = yes
                }
              }
            }
          }
          set_society_grandmaster = yes
        }
      }
    }
  }
}

character_event = { #OLD ORDER AI join event
	id = MNM.4457
	hide_window = yes

	is_triggered_only = yes

  immediate = {
    random_list = {
      60 = { # do nothing
      }
      40 = {
        trigger = { #meet the requirement
          can_join_society = monastic_order_old_order
        }
        modifier = {
          factor = 5
          religion = faithless
        }
        modifier = {
          factor = 2
          OR = {
            trait = mystic
            trait = scholar
            trait = duelist
          }
        }
        modifier = {
          factor = 2
          trait = erudite
        }
        modifier = {
          factor = 2
          trait = just
        }
        modifier = {
          factor = 2
          trait = honest
        }
        modifier = {
          factor = 0.1
          OR = {
            trait = deceitful
            trait = arbitrary
            trait = slothful
          }
        }

        join_society = monastic_order_old_order
        random_list = {
          75 = {
            modifier = {
              factor = 0
              society_influence >= 30
            }
          }
          25 = {
          }
        }
        if = { # Make grandmaster is there is none
          limit = {
            NOT = {
              society = {
                any_society_member = {
                  is_society_grandmaster = yes
                }
              }
            }
          }
          set_society_grandmaster = yes
        }
      }
    }
  }
}

###MISSIONS###
#4000 is tombola
character_event = {
	id = MNM.4000
	hide_window = yes

	is_triggered_only = yes
	is_in_society = yes
	only_capable = yes

	trigger = {
		is_monastic_member_trigger = yes
		is_society_grandmaster = no
		has_any_quest = no
		NOT = { is_inaccessible_trigger = yes }
		NOT = { has_character_modifier = quest_cooldown_timer }
	}

	immediate = {
		random_society_member = {
			limit = {
				is_society_grandmaster = yes
				same_society_as = ROOT
			}
			save_event_target_as = monastic_leader
		}

		random_list = {
			20 = {
				set_character_flag = monastic_orders_holy_seclusion
			}
			20 = {
				modifier = { factor = 0 NOT = { has_dlc ="Way of Life" } }
				modifier = { factor = 0 has_focus = focus_theology }
				modifier = { factor = 0 is_playable = no } # Only playable characters get focuses
				set_character_flag = monastic_orders_mission_theology
			}
			20 = {
				trigger = {
					is_playable = yes
					any_demesne_province = {
						num_of_empty_holdings = 1
					}
				}
				modifier = {
					factor = 0 is_tribal = yes
				}
				modifier = {
					factor = 0 is_nomadic = yes
				}
				modifier = { factor = 0 is_playable = no }
				set_character_flag = monastic_orders_mission_temple
			}
			50 = { # AI bypasses missions at times
				modifier = {
					factor = 0
					ai = no
				}
				random_list = {
					70 = {
						modifier = {
							factor = 0.9
							society_influence >= 30
						}
						modifier = {
							factor = 0.9
							society_influence >= 40
						}
						modifier = {
							factor = 0.8
							society_influence >= 50
						}
						modifier = {
							factor = 0.7
							society_influence >= 70
						}
						modifier = {
							factor = 0.6
							society_influence >= 80
						}
						modifier = {
							factor = 0.5
							society_influence >= 90
						}
						add_mission_succeed_influence_effect = yes
						monastic_order_purity_effect = yes
					}
					30 = {
						add_mission_fail_influence_effect = yes
					}
				}
			}
			85 = {
				modifier = {
					factor = 0
					ai = no
				}
				#Do nothing for AI
			}
		}
		event_target:monastic_leader = { character_event = { id = MNM.4010 days = 7 random = 7 } }
	}
}

#Tombola Ping Event
character_event = {
	id = MNM.4010
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		FROM = {
			trigger_switch = {
				on_trigger = has_character_flag
				monastic_orders_holy_seclusion = 				{ clr_character_flag = monastic_orders_holy_seclusion society_quest_event = { id = MNM.4402 } }
				#monastic_orders_mission_charity = 				{ clr_character_flag = monastic_orders_mission_charity society_quest_event = { id = MNM.4011 } }
				monastic_orders_mission_theology = 				{ clr_character_flag = monastic_orders_mission_theology society_quest_event = { id = MNM.4015 } }
				#monastic_orders_mission_christian_pilgrimage = 	{ clr_character_flag = monastic_orders_mission_christian_pilgrimage society_quest_event = { id = MNM.4019 } }
				#monastic_orders_mission_dharmic_pilgrimage = 	{ clr_character_flag = monastic_orders_mission_dharmic_pilgrimage society_quest_event = { id = MNM.8095 } }
				monastic_orders_mission_temple = 				{ clr_character_flag = monastic_orders_mission_temple society_quest_event = { id = MNM.4023 } }
			}
		}
	}
}

#QUEST: Do penance/meditate
society_quest_event = {
	id = MNM.4402
	border = GFX_event_letter_frame_religion

	#desc = {
		#trigger = { is_christian_monastic_member_trigger = yes }
		#text = EVTDESC_4402_PENANCE
	#}
	desc = {
		trigger = { is_dharmic_monastic_member_trigger = yes }
		text = EVTDESC_4402_MEDITATION
	}
	#desc = {
		#trigger = { society_member_of = monastic_order_stoics }
		#text = EVTDESC_4402_DIALOGUE
	#}

	is_triggered_only = yes

	option = {
		name = ACCEPT

		#if = {
			#limit = { is_christian_monastic_member_trigger = yes }
			#set_quest = quest_monastic_order_penance
		#}
		if = {
			limit = {
				OR = {
					#society_member_of = monastic_order_stoics
					is_dharmic_monastic_member_trigger = yes
				}
			}
			set_quest = quest_monastic_order_meditation
		}
	}

	option = {
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }

		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}

		ai_chance = { factor = 0 }
	}
}

#Penance/meditation begins
character_event = {
	id = MNM.4403
	picture = GFX_evt_secluded_in_prayer
	desc = EVTDESC_4403
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		#name = {
			#trigger = {
				#is_christian_monastic_member_trigger = yes
			#}
			#text = EVTOPTA_MNM_4403_GOD
		#}
		name = {
			trigger = {
				is_dharmic_monastic_member_trigger = yes
			}
			text = EVTOPTA_MNM_4403_NOGOD
		}
		lose_weight_small_effect = yes
		weight_trait_check_effect = yes
		hidden_effect = {
			set_variable = { which = holy_seclusion_points value = 0 }
			set_character_flag = holy_seclusion_timer
			character_event = { id = MNM.4404 days = 40 random = 30 }
		}
	}
}

#Tombola & outcome evaluator for meditation/penance
character_event = {
	id = MNM.4404
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	immediate = {
		if = {
			limit = {
				OR = {
					is_monastic_member_trigger = no
					NOR = {
						has_quest = quest_monastic_order_penance
						has_quest = quest_monastic_order_meditation
					}
				}
			}
			character_event = { id = MNM.4399 }
			break = yes
		}
		if = {
			limit = {
				OR = {
					has_quest = quest_monastic_order_penance
					has_quest = quest_monastic_order_meditation
				}
				OR = {
					has_character_modifier = in_meditation
					has_character_modifier = doing_penance
				}
			}
			if = {
				limit = {
					NOR = {
						check_variable = { which = holy_seclusion_points value = 4 }
						NOT = { check_variable = { which = holy_seclusion_points value = -2 } }
					}
				}
				clear_event_target = interrupting_child
				random_list = { #Next mission
					30 = { #Struggle with a vice
						modifier = {
							factor = 0
              OR = {
                AND = {
                  trait = temperate
                  trait = charitable
                  trait = diligent
                  trait = chaste
                  is_good_monastic_member_trigger = yes
                }
                AND = {
                  trait = temperate
                  OR = {
                    trait = cruel
                    trait = envious
                    trait = impaler
                  }
                  trait = diligent
                  trait = chaste
                  is_evil_monastic_member_trigger = yes
                }
                AND = {
                  trait = temperate
                  trait = just
                  trait = diligent
                  trait = chaste
                  is_lawful_neutral_monastic_member_trigger = yes
                }
              }
						}
						modifier = {
							factor = 0
							has_character_flag = holy_seclusion_struggled_with_vice
						}
						set_character_flag = holy_seclusion_struggled_with_vice
						random_list = {
							10 = {
								modifier = { factor = 0 trait = chaste }
								set_character_flag = holy_seclusion_lustful
							}
							10 = {
								modifier = { factor = 0 trait = temperate }
								set_character_flag = holy_seclusion_gluttonous
							}
              10 = {
								modifier = { factor = 0 trait = diligent }
								set_character_flag = holy_seclusion_slothful
							}
							10 = {
								modifier = {
                  factor = 0
                  OR = {
                    trait = charitable
                    is_evil_monastic_member_trigger = yes
                    is_lawful_neutral_monastic_member_trigger = yes
                  }
                }
                set_character_flag = holy_seclusion_greedy
              }
              10 = {
                modifier = {
                  factor = 0
                  OR = {
                    trait = cruel
                    trait = envious
                    trait = impaler
                    is_good_monastic_member_trigger = yes
                    is_lawful_neutral_monastic_member_trigger = yes
                  }
                }
                set_character_flag = holy_seclusion_kind
              }
              10 = {
                modifier = {
                  factor = 0
                  OR = {
                    trait = just
                    is_good_monastic_member_trigger = yes
                    is_evil_monastic_member_trigger = yes
                  }
                }
                set_character_flag = holy_seclusion_arbitrary
              }

						}

						character_event = { id = MNM.4405 }
					}
					10 = { #Lonely
						modifier = {
							factor = 0
							NAND = {
								OR = {
									trait = gregarious
									trait = socializer
								}
								any_courtier = {
									is_adult = yes
									prisoner = no
									NOR = {
										is_friend = ROOT
										is_lover = ROOT
										is_rival = ROOT
										any_spouse = { character = ROOT }
									}
								}
							}
						}
						modifier = {
							factor = 0
							has_character_flag = holy_seclusion_struggled_with_loneliness
						}
						set_character_flag = holy_seclusion_struggled_with_loneliness
						character_event = { id = MNM.4410 }
					}
					10000 = { #Scripture reading
						modifier = {
							factor = 0
							OR = {
								NOT = {	any_courtier = { has_job_title = job_spiritual } }
								has_character_flag = holy_seclusion_scripture_reading
							}
						}
						set_character_flag = holy_seclusion_scripture_reading
						character_event = { id = MNM.4414 }
					}
					#Child interrupting
					10 = {
						modifier = {
							factor = 0
							NOT = {
								any_child = {
									age = 4
									host = { character = ROOT }
									is_adult = no
									prisoner = no
									opinion = { who = ROOT value = 5 }
								}
							}
						}
						modifier = {
							factor = 0
							has_character_flag = holy_seclusion_interrupting_child
						}
						random_child = {
							limit = {
								age = 4
								host = { character = ROOT }
								is_adult = no
								prisoner = no
								opinion = { who = ROOT value = 5 }
							}
							save_event_target_as = interrupting_child
						}
						random_child = {
							limit = {
								age = 4
								host = { character = ROOT }
								is_adult = no
								prisoner = no
								opinion = { who = ROOT value = 5 }
								is_primary_heir = ROOT
								NOR = {
									has_opinion_modifier = { modifier = kind_parent who = ROOT }
									has_opinion_modifier = { modifier = cruel_parent who = ROOT }
								}
							}
							save_event_target_as = interrupting_child
						}
						set_character_flag = holy_seclusion_interrupting_child
						event_target:interrupting_child = { character_event = { id = MNM.4419 } }
					}
					10 = { #General success
						modifier = {
							is_virtous = yes
							factor = 1.5
						}
						modifier = {
							is_wicked = yes
							factor = 0.7
						}
						modifier = {
							is_learned_trigger = yes
							factor = 1.5
						}
						character_event = { id = MNM.4426 }
					}
					10 = { #If all missions have been done already....
						modifier = {
							factor = 0
							NAND = {
								has_character_flag = holy_seclusion_struggled_with_vice
								has_character_flag = holy_seclusion_struggled_with_loneliness
								has_character_flag = holy_seclusion_scripture_reading
								has_character_flag = holy_seclusion_interrupting_child
							}
						}
						clr_character_flag = holy_seclusion_struggled_with_vice
						clr_character_flag = holy_seclusion_struggled_with_loneliness
						clr_character_flag = holy_seclusion_scripture_reading
						clr_character_flag = holy_seclusion_interrupting_child
					}
				}
				character_event = { id = MNM.4404 days = 40 random = 30 } #Sends the tombola again
			}
			if = {
				limit = {
					OR = {
						check_variable = { which = holy_seclusion_points value = 4 }
						NOT = { check_variable = { which = holy_seclusion_points value = -2 } }
					}
				}

				random_society_member = {
					limit = {
						is_society_grandmaster = yes
						same_society_as = ROOT
					}
					character_event = { id = MNM.4427 } #Mission success/fail
				}
			}
		}
	}
}

#Penance/seclusion: Dealing with vice
character_event = {
	id = MNM.4405
	picture = GFX_evt_dark_love
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	hide_from = yes

	immediate = {
		trigger_switch = {
			on_trigger = has_character_flag
			holy_seclusion_lustful = {
				if = {
					limit = {
						any_artifact = {
							OR = {
								has_artifact_flag = about_religion
								artifact_type = the_confessions_of_root
							}
							is_artifact_equipped = yes
						}
					}
					random_artifact = {
						limit = {
							OR = {
								has_artifact_flag = about_religion
								artifact_type = the_confessions_of_root
							}
							is_artifact_equipped = yes
						}
						preferred_limit = {
							quality = 3
						}
						preferred_limit = {
							quality = 2
						}
						preferred_limit = {
							quality = 1
						}
						save_event_target_as = book_target
					}
				}
			}
			holy_seclusion_gluttonous = {
				if = {
					limit = {
						any_artifact = {
							has_artifact_flag = cooking
							is_artifact_equipped = yes
						}
					}
					random_artifact = {
						limit = {
							has_artifact_flag = cooking
							is_artifact_equipped = yes
							NOT = { artifact_type = gastronomic_tonics } #Not really about food
						}
						preferred_limit = {
							quality = 3
						}
						preferred_limit = {
							quality = 2
						}
						preferred_limit = {
							quality = 1
						}
						save_event_target_as = book_target
					}
				}
			}
			holy_seclusion_greedy = {
				if = {
					limit = {
						any_artifact = {
							OR = {
								artifact_type = the_confessions_of_root
								has_artifact_flag = about_diplomacy
							}
							is_artifact_equipped = yes
						}
					}
					random_artifact = {
						limit = {
							OR = {
								artifact_type = the_confessions_of_root
								has_artifact_flag = about_diplomacy
							}
							is_artifact_equipped = yes
						}
						preferred_limit = {
							quality = 3
						}
						preferred_limit = {
							quality = 2
						}
						preferred_limit = {
							quality = 1
						}
						save_event_target_as = book_target
					}
				}
			}
			holy_seclusion_slothful = {
				if = {
					limit = {
						any_artifact = {
							OR = {
								AND = {
									has_artifact_flag = about_dynasty
									original_owner = { NOT = { character = ROOT } }
								}
								has_artifact_flag = poetry
							}
							is_artifact_equipped = yes
						}
					}
					random_artifact = {
						limit = {
							OR = {
								AND = {
									has_artifact_flag = about_dynasty
									original_owner = { NOT = { character = ROOT } }
								}
								has_artifact_flag = poetry
							}
							is_artifact_equipped = yes
						}
						preferred_limit = {
							quality = 3
						}
						preferred_limit = {
							quality = 2
						}
						preferred_limit = {
							quality = 1
						}
						save_event_target_as = book_target
					}
				}
			}
		}
	}

	desc = {
		trigger = { has_character_flag = holy_seclusion_lustful }
		text = EVTDESC_4405_LUSTFUL
		picture = GFX_evt_dark_love
	}
	desc = {
		trigger = { has_character_flag = holy_seclusion_gluttonous }
		text = EVTDESC_4405_GLUTTONOUS
		picture = GFX_evt_feast
	}
	desc = {
		trigger = { has_character_flag = holy_seclusion_greedy }
		text = EVTDESC_4405_GREEDY
		picture = GFX_evt_charity
	}
	desc = {
		trigger = { has_character_flag = holy_seclusion_slothful }
		text = EVTDESC_4405_SLOTHFUL
		picture = GFX_evt_recovery
	}

  desc = {
		trigger = { has_character_flag = holy_seclusion_kind }
		text = EVTDESC_4405_KIND
		picture = GFX_evt_humiliation_prisoner
	}

  desc = {
		trigger = { has_character_flag = holy_seclusion_arbitrary }
		text = EVTDESC_4405_ARBITRARY
		picture = GFX_evt_judged_by_ruler
	}

	#Indulge
	option = {
		name = {
			trigger = { has_character_flag = holy_seclusion_lustful }
			text = EVTOPTA_4405_LUSTFUL
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_gluttonous }
			text = EVTOPTA_4405_GLUTTONOUS
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_greedy }
			text = EVTOPTA_4405_GREEDY
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_slothful }
			text = EVTOPTA_4405_SLOTHFUL
		}
    name = {
			trigger = { has_character_flag = holy_seclusion_kind }
			text = EVTOPTA_4405_KIND
		}
    name = {
			trigger = { has_character_flag = holy_seclusion_arbitrary }
			text = EVTOPTA_4405_ARBITRARY
		}
		if = {
			limit = { has_character_flag = holy_seclusion_gluttonous }
			gain_weight_small_effect = yes
			weight_trait_check_effect = yes
		}

		random_list = {
			65 = {
				custom_tooltip = {
					text = EVTOPTA_MNM_4405_tt_success
					character_event = { id = MNM.4406 days = 3 }
				}
			}
			35 = {
				custom_tooltip = {
					text = EVTOPTA_MNM_4405_tt_fail
					character_event = { id = MNM.4407 days = 3 }
				}
			}
		}
	}

	#Fight it  (with reading from your library!)
	option = {
		name = {
			trigger = { has_character_flag = holy_seclusion_lustful }
			text = EVTOPTB_4405_LUSTFUL_book
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_gluttonous }
			text = EVTOPTB_4405_GLUTTONOUS_book
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_greedy }
			text = EVTOPTB_4405_GREEDY_book
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_slothful }
			text = EVTOPTB_4405_SLOTHFUL_book
		}

		tooltip_info_custom = available_because_books_tt

		if = {
			limit = { has_character_flag = holy_seclusion_gluttonous }
			lose_weight_small_effect = yes
			weight_trait_check_effect = yes
		}

		set_character_flag = used_a_book

		random_list = {
			70 = {
				custom_tooltip = {
					text = EVTOPTB_MNM_4405_tt_success
					character_event = { id = MNM.4408 days = 14 }
				}
			}
			30 = {
				custom_tooltip = {
					text = EVTOPTB_MNM_4405_tt_fail
					character_event = { id = MNM.4409 days = 14 }
				}
			}
		}
		trigger = {
			event_target:book_target = { always = yes }
		}
	}

	#Fight it
	option = {
		name = {
			trigger = { has_character_flag = holy_seclusion_lustful }
			text = EVTOPTB_4405_LUSTFUL
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_gluttonous }
			text = EVTOPTB_4405_GLUTTONOUS
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_greedy }
			text = EVTOPTB_4405_GREEDY
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_slothful }
			text = EVTOPTB_4405_SLOTHFUL
		}
    name = {
			trigger = { has_character_flag = holy_seclusion_kind }
			text = EVTOPTB_4405_KIND
		}
    name = {
			trigger = { has_character_flag = holy_seclusion_arbitrary }
			text = EVTOPTB_4405_ARBITRARY
		}

		if = {
			limit = { has_character_flag = holy_seclusion_greedy }
			scaled_wealth = { value = -0.5 min = -50 }
		}
		if = {
			limit = { has_character_flag = holy_seclusion_gluttonous }
			lose_weight_small_effect = yes
			weight_trait_check_effect = yes
		}

		random_list = {
			40 = {
				custom_tooltip = {
					text = EVTOPTB_MNM_4405_tt_success
					character_event = { id = MNM.4408 days = 14 }
				}
			}
			60 = {
				custom_tooltip = {
					text = EVTOPTB_MNM_4405_tt_fail
					character_event = { id = MNM.4409 days = 14 }
				}
			}
		}
	}
}

#Vice outcome - small success
character_event = {
	id = MNM.4406
	picture = GFX_evt_dark_love
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	hide_from = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	desc = {
		trigger = {
			has_character_flag = holy_seclusion_lustful
			event_target:holy_seclusion_lover = { always = yes }
		}
		text = EVTDESC_4406_LUSTFUL_A
		picture = GFX_evt_dark_love
	}
	desc = {
		trigger = {
			has_character_flag = holy_seclusion_lustful
			event_target:holy_seclusion_lover = { always = no }
		}
		text = EVTDESC_4406_LUSTFUL_B
		picture = GFX_evt_dark_love
	}
	desc = {
		trigger = { has_character_flag = holy_seclusion_gluttonous }
		text = EVTDESC_4406_GLUTTONOUS
		picture = GFX_evt_feast
	}
	desc = {
		trigger = { has_character_flag = holy_seclusion_greedy }
		text = EVTDESC_4406_GREEDY
		picture = GFX_evt_charity
	}
	desc = {
		trigger = { has_character_flag = holy_seclusion_slothful }
		text = EVTDESC_4406_SLOTHFUL
		picture = GFX_evt_recovery
	}
  desc = {
		trigger = { has_character_flag = holy_seclusion_kind }
		text = EVTDESC_4406_KIND
		picture = GFX_evt_humiliation_prisoner
	}
  desc = {
		trigger = { has_character_flag = holy_seclusion_arbitrary }
		text = EVTDESC_4406_ARBITRARY
		picture = GFX_evt_judged_by_ruler
	}

	immediate = {
		if = {
			limit = { has_character_flag = holy_seclusion_lustful }
			random_courtier = {
				limit = {
					age = 16
					root_attraction_trigger = yes
					prisoner = no
					NOT = { trait = incapable }
					NOT = { trait = celibate }
					NOT = { is_close_relative = ROOT }
					is_married = no
					is_attractive_trigger = yes
				}
				save_event_target_as = holy_seclusion_lover
			}
		}
	}

	option = {
		name = {
			trigger = { has_character_flag = holy_seclusion_lustful }
			text = EVTOPTA_4406_LUSTFUL
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_gluttonous }
			text = EVTOPTA_4406_GLUTTONOUS
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_greedy }
			text = EVTOPTA_4406_GREEDY
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_slothful }
			text = EVTOPTA_4406_SLOTHFUL
		}
    name = {
			trigger = { has_character_flag = holy_seclusion_kind }
			text = EVTOPTA_4406_KIND
		}
    name = {
			trigger = { has_character_flag = holy_seclusion_arbitrary }
			text = EVTOPTA_4406_ARBITRARY
		}

		custom_tooltip = {
			text = EVTOPTA_4406_TOOLTIP
		}

		hidden_effect = { change_variable = { which = holy_seclusion_points value = 1 } }

		if = {
			limit = {
				has_character_flag = holy_seclusion_lustful
				event_target:holy_seclusion_lover = { NOT = { is_lover = ROOT } }
			}
			random = {
				chance = 30
				event_target:holy_seclusion_lover = { add_lover = ROOT }
			}
		}

		hidden_effect = {
			clr_character_flag = holy_seclusion_lustful
			clr_character_flag = holy_seclusion_gluttonous
			clr_character_flag = holy_seclusion_greedy
      clr_character_flag = holy_seclusion_kind
      clr_character_flag = holy_seclusion_arbitrary
			clr_character_flag = holy_seclusion_slothful
		}
	}
}

#vice outcome - small failure
character_event = {
	id = MNM.4407
	picture = GFX_evt_recovery
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	hide_from = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	desc = {
		trigger = { has_character_flag = holy_seclusion_lustful }
		text = EVTDESC_4407_LUSTFUL
		picture = GFX_evt_recovery
	}
	desc = {
		trigger = { has_character_flag = holy_seclusion_gluttonous }
		text = EVTDESC_4407_GLUTTONOUS
		picture = GFX_evt_drunk
	}
	desc = {
		trigger = { has_character_flag = holy_seclusion_greedy }
		text = EVTDESC_4407_GREEDY
		picture = GFX_evt_drunk
	}
	desc = {
		trigger = { has_character_flag = holy_seclusion_slothful }
		text = EVTDESC_4407_SLOTHFUL
		picture = GFX_evt_drunk
	}
  desc = {
		trigger = { has_character_flag = holy_seclusion_kind }
		text = EVTDESC_4407_KIND
		picture = GFX_evt_charity
	}
  desc = {
		trigger = { has_character_flag = holy_seclusion_arbitrary }
		text = EVTDESC_4407_ARBITRARY
		picture = GFX_evt_judged_by_ruler
	}

	option = {
		name = {
			trigger = { has_character_flag = holy_seclusion_lustful }
			text = EVTOPTA_4407_LUSTFUL
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_gluttonous }
			text = EVTOPTA_4407_GLUTTONOUS
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_greedy }
			text = EVTOPTA_4407_GREEDY
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_slothful }
			text = EVTOPTA_4407_SLOTHFUL
		}
    name = {
			trigger = { has_character_flag = holy_seclusion_kind }
			text = EVTOPTA_4407_KIND
		}
    name = {
			trigger = { has_character_flag = holy_seclusion_arbitrary }
			text = EVTOPTA_4407_ARBITRARY
		}

		custom_tooltip = {
			text = EVTOPTA_4407_TOOLTIP
		}

		hidden_effect = {
			clr_character_flag = holy_seclusion_lustful
			clr_character_flag = holy_seclusion_gluttonous
			clr_character_flag = holy_seclusion_greedy
      clr_character_flag = holy_seclusion_kind
      clr_character_flag = holy_seclusion_arbitrary
			clr_character_flag = holy_seclusion_slothful
		}
	}
}

#Vice outcome big success
character_event = {
	id = MNM.4408
	picture = GFX_evt_secluded_in_prayer
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	hide_from = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	desc = {
		trigger = {
			has_character_flag = holy_seclusion_lustful
		}
		text = EVTDESC_4408_LUSTFUL
	}
	desc = {
		trigger = {
			has_character_flag = holy_seclusion_gluttonous
		}
		text = EVTDESC_4408_GLUTTONOUS
	}
	desc = {
		trigger = {
			has_character_flag = holy_seclusion_greedy
			NOT = { has_character_flag = used_a_book }
		}
		text = EVTDESC_4408_GREEDY
	}
	desc = {
		trigger = {
			has_character_flag = holy_seclusion_slothful
			NOT = { has_character_flag = used_a_book }

		}
		text = EVTDESC_4408_SLOTHFUL
	}
	desc = {
		trigger = {
			has_character_flag = holy_seclusion_greedy
			has_character_flag = used_a_book
		}
		text = EVTDESC_4408_GREEDY_book
	}
	desc = {
		trigger = {
			has_character_flag = holy_seclusion_slothful
			has_character_flag = used_a_book
		}
		text = EVTDESC_4408_SLOTHFUL_book
	}
  desc = {
		trigger = {
			has_character_flag = holy_seclusion_kind
		}
		text = EVTDESC_4408_KIND
	}
  desc = {
		trigger = {
			has_character_flag = holy_seclusion_arbitrary
		}
		text = EVTDESC_4408_ARBITRARY
	}


	option = {
		name = {
			trigger = { has_character_flag = holy_seclusion_lustful }
			text = EVTOPTA_4408_LUSTFUL
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_gluttonous }
			text = EVTOPTA_4408_GLUTTONOUS
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_greedy }
			text = EVTOPTA_4408_GREEDY
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_slothful }
			text = EVTOPTA_4408_SLOTHFUL
		}
    name = {
			trigger = { has_character_flag = holy_seclusion_kind }
			text = EVTOPTA_4408_KIND
		}
    name = {
			trigger = { has_character_flag = holy_seclusion_arbitrary }
			text = EVTOPTA_4408_ARBITRARY
		}

		custom_tooltip = {
			text = EVTOPTA_4408_TOOLTIP
		}

		hidden_effect = { change_variable = { which = holy_seclusion_points value = 2 } }
		hidden_effect = { monastic_order_purity_effect = yes }

		if = {
			limit = { has_character_flag = holy_seclusion_lustful }

			add_trait = celibate
			add_character_modifier = {
				name = promise_of_celibacy
				years = 3
			}

			random = {
				chance = 50
				remove_trait_silently_lustful_effect = yes
			}
		}

		if = {
			limit = { has_character_flag = holy_seclusion_gluttonous }
			if = {
				limit = { NOT = { trait = gluttonous } }
				random = {
					chance = 50
					add_trait_temperate_effect = yes
				}
			}
			if = {
				limit = { trait = gluttonous }
				random = {
					chance = 50
					remove_trait_silently_gluttonous_effect = yes
				}
			}
		}

		if = {
			limit = { has_character_flag = holy_seclusion_greedy }

			if = {
				limit = { NOT = { trait = greedy } }
				random = {
					chance = 50
					add_trait_charitable_effect = yes
				}
			}
			if = {
				limit = { trait = greedy }
				random = {
					chance = 50
					remove_trait_silently_greedy_effect = yes
				}
			}
		}

		if = {
			limit = { has_character_flag = holy_seclusion_slothful }

			if = {
				limit = { NOT = { trait = slothful } }
				random = {
					chance = 50
					add_trait_diligent_effect = yes
				}
			}
			if = {
        limit = { trait = slothful }
        random = {
          chance = 50
          remove_trait_slothful_effect = yes
        }
      }
    }

    if = {
			limit = { has_character_flag = holy_seclusion_kind }
			if = {
				limit = { NOT = { trait = kind } }
				random = {
					chance = 50
					add_trait_cruel_effect = yes
				}
			}
			if = {
				limit = { trait = kind }
				random = {
					chance = 50
					remove_trait_silently_kind_effect = yes
				}
			}
		}

    if = {
			limit = { has_character_flag = holy_seclusion_arbitrary }

			if = {
				limit = { NOT = { trait = arbitrary } }
				random = {
					chance = 50
					add_trait_just_effect = yes
				}
			}
			if = {
				limit = { trait = arbitrary }
				random = {
					chance = 50
					remove_trait_silently_arbitrary_effect = yes
				}
			}
		}

		hidden_effect = {
			clr_character_flag = holy_seclusion_lustful
			clr_character_flag = holy_seclusion_gluttonous
			clr_character_flag = holy_seclusion_greedy
			clr_character_flag = holy_seclusion_slothful
      clr_character_flag = holy_seclusion_kind
      clr_character_flag = holy_seclusion_arbitrary
			clr_character_flag = used_a_book
		}
	}
}

#vice outcome - big failure
character_event = {
	id = MNM.4409
	picture = GFX_evt_drunk
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	hide_from = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	desc = {
		trigger = { has_character_flag = holy_seclusion_lustful }
		text = EVTDESC_4409_LUSTFUL
		picture = GFX_evt_brothel
	}
	desc = {
		trigger = { has_character_flag = holy_seclusion_gluttonous }
		text = EVTDESC_4409_GLUTTONOUS
		picture = GFX_evt_drunk
	}
	desc = {
		trigger = { has_character_flag = holy_seclusion_greedy }
		text = EVTDESC_4409_GREEDY
		picture = GFX_evt_drunk
	}
	desc = {
		trigger = { has_character_flag = holy_seclusion_slothful }
		text = EVTDESC_4409_SLOTHFUL
		picture = GFX_evt_drunk
	}
  desc = {
		trigger = { has_character_flag = holy_seclusion_kind }
		text = EVTDESC_4409_KIND
		picture = GFX_evt_died_executed_hanging
	}
  desc = {
		trigger = { has_character_flag = holy_seclusion_arbitrary }
		text = EVTDESC_4409_ARBITRARY
		picture = GFX_evt_humiliation_prisoner
	}

	option = {
		name = {
			trigger = { has_character_flag = holy_seclusion_lustful }
			text = EVTOPTA_4409_LUSTFUL
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_gluttonous }
			text = EVTOPTA_4409_GLUTTONOUS
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_greedy }
			text = EVTOPTA_4409_GREEDY
		}
		name = {
			trigger = { has_character_flag = holy_seclusion_slothful }
			text = EVTOPTA_4409_SLOTHFUL
		}
    name = {
			trigger = { has_character_flag = holy_seclusion_kind }
			text = EVTOPTA_4409_KIND
		}
    name = {
			trigger = { has_character_flag = holy_seclusion_arbitrary }
			text = EVTOPTA_4409_ARBITRARY
		}

		custom_tooltip = {
			text = EVTOPTA_4409_TOOLTIP
		}

		hidden_effect = { change_variable = { which = holy_seclusion_points value = -5 } }

		if = {
			limit = {
				has_character_flag = holy_seclusion_lustful
				NOT = { trait = lovers_pox }
			}
			add_trait = lovers_pox
			if = {
				limit = { is_married = yes }
				character_event = { id = 20 }
			}
		}

		if = {
			limit = { has_character_flag = holy_seclusion_gluttonous }
			if = {
				limit = { NOT = { trait = gluttonous } }
				random = {
					chance = 30
					add_trait_gluttonous_effect = yes
				}
			}
		}


		if = {
			limit = { has_character_flag = holy_seclusion_greedy }
			scaled_wealth = { value = 0.5 min = 50 }
			if = {
				limit = { NOT = { trait = greedy } }
				random = {
					chance = 30
					add_trait_greedy_effect = yes
				}
			}
		}

		if = {
			limit = { has_character_flag = holy_seclusion_slothful }
			if = {
				limit = { NOT = { trait = slothful } }
				random = {
					chance = 30
					add_trait_slothful_effect = yes
				}
			}
		}

    if = {
			limit = { has_character_flag = holy_seclusion_kind }
			if = {
				limit = { NOT = { trait = kind } }
				random = {
					chance = 30
					add_trait_kind_effect = yes
				}
			}
		}

    if = {
			limit = { has_character_flag = holy_seclusion_arbitrary }
			if = {
				limit = { NOT = { trait = arbitrary } }
				random = {
					chance = 30
					add_trait_arbitrary_effect = yes
				}
			}
		}

		#if = {
			#limit = { is_christian_monastic_member_trigger = yes }
			#add_character_modifier = {
				#name = rampant_sinner_christian
				#years = 3
			#}
		#}
		if = {
			limit = {
				is_dharmic_monastic_member_trigger = yes
			}
			add_character_modifier = {
				name = rampant_sinner_dharmic
				years = 3
			}
		}

		hidden_effect = {
			clr_character_flag = holy_seclusion_lustful
			clr_character_flag = holy_seclusion_gluttonous
			clr_character_flag = holy_seclusion_greedy
			clr_character_flag = holy_seclusion_slothful
      clr_character_flag = holy_seclusion_kind
      clr_character_flag = holy_seclusion_arbitrary
			clr_character_flag = used_a_book
		}
	}
}

#Penance/meditation: struggle with loneliness
character_event = {
	id = MNM.4410
	desc = EVTDESC_MNM_4410
	picture = GFX_evt_secluded_in_prayer
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	immediate = {
		random_courtier = {
			limit = {
				is_adult = yes
				prisoner = no
				NOR = {
					is_friend = ROOT
					is_rival = ROOT
					is_lover = ROOT
					any_spouse = { character = ROOT }
				}
			}
			save_event_target_as = potential_friend
		}
	}

	#Go out and talk with them
	option = {
		name = EVTOPTA_MNM_4410
		custom_tooltip = { text = EVTOPTA_MNM_4410_TOOLTIP }
		hidden_effect = { character_event = { id = MNM.4411 days = 2 } }
		random = {
			chance = 50
			tooltip = { add_friend = event_target:potential_friend }
			set_character_flag = new_friend
		}

	}

	option = {
		name = EVTOPTB_MNM_4410

		random_list = {
			65 = {
				custom_tooltip = { text = EVTOPTA_4406_TOOLTIP }
				hidden_tooltip = { character_event = { id = MNM.4412 days = 2 } }
			}
			35 = {
				custom_tooltip = { text = EVTOPTA_4407_TOOLTIP }
				tooltip = {
					if = {
						limit = { trait = stressed NOT = { trait = depressed } }
						random = {
							chance = 50
							tooltip = { add_trait = depressed }
							set_character_flag = add_depressed
						}
					}
					if = {
						limit = { NOT = { trait = stressed } }
						random = {
							chance = 50
							tooltip = { add_trait = stressed }
							set_character_flag = add_stressed
						}
					}
				}
				hidden_tooltip = { character_event = { id = MNM.4413 days = 2 } }
			}
		}

		tooltip = {
			if = {
				limit = { trait = gregarious }
				random = {
					chance = 20
					tooltip = { remove_trait = gregarious }
					set_character_flag = lose_gregarious
				}
			}
		}
	}
}

#You went to talk to them
character_event = {
	id = MNM.4411
	desc = EVTDESC_MNM_4411
	picture = GFX_evt_courtiers_talking
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	option = {
		name = EVTOPTA_MNM_4411
		custom_tooltip = { text = EVTOPTA_MNM_4410_TOOLTIP }
		hidden_effect = { change_variable = { which = holy_seclusion_points value = -1 } }
		if = {
			limit = { has_character_flag = new_friend }
			add_friend = event_target:potential_friend
			clr_character_flag = new_friend
		}
	}
}

#You managed to deal with it
character_event = {
	id = MNM.4412
	desc = EVTDESC_MNM_4412
	picture = GFX_evt_secluded_in_prayer
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	option = {
		name = EVTOPTA_MNM_4412
		custom_tooltip = { text = EVTOPTA_4406_TOOLTIP }
		hidden_effect = { change_variable = { which = holy_seclusion_points value = 1 } }

		if = {
			limit = { has_character_flag = lose_gregarious }
			remove_trait = gregarious
			clr_character_flag = lose_gregarious
		}
	}
}

#You get very lonely
character_event = {
	id = MNM.4413
	desc = EVTDESC_MNM_4413
	picture = GFX_evt_recovery
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	option = {
		name = EVTOPTA_MNM_4413
		custom_tooltip = { text = EVTOPTA_4406_TOOLTIP }

		if = {
			limit = { has_character_flag = lose_gregarious }
			remove_trait = gregarious
			clr_character_flag = lose_gregarious
		}
		if = {
			limit = { has_character_flag = add_depressed }
			add_trait = depressed
			clr_character_flag = add_depressed
		}
		if = {
			limit = { has_character_flag = add_stressed }
			add_trait = stressed
			clr_character_flag = add_stressed
		}
	}
}

#You struggle with the scripture
character_event = {
	id = MNM.4414
	desc = EVTDESC_MNM_4414
	picture = GFX_evt_secluded_in_prayer
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	immediate = {
		random_courtier = {
			limit = { has_job_title = job_spiritual }
			save_event_target_as = court_spiritual
		}
	}

	#You keep reading
	option = {
		name = EVTOPTA_MNM_4414

		random_list = {
			35 = {
				modifier = {
					is_smart_trigger = yes
					factor = 1.4
				}
				modifier = {
					learning = 14
					factor = 1.4
				}
				modifier = {
					learning = 16
					factor = 1.4
				}
				modifier = {
					is_learned_trigger = yes
					factor = 2
				}
				custom_tooltip = { text = EVTOPTA_MNM_4414_TOOLTIP_SUCCESS }
				hidden_effect = { character_event = { id = MNM.4415 days = 3 } }
			}
			65 = {
				modifier = {
					is_dumb_trigger = yes
					factor = 1.5
				}
				modifier = {
					NOT = { learning = 8 }
					factor = 1.5
				}
				custom_tooltip = { text = EVTOPTA_MNM_4414_TOOLTIP_FAILURE }
				hidden_effect = { character_event = { id = MNM.4416 days = 3 } }
			}
		}
	}

	option = {
		name = EVTOPTB_MNM_4414

		random_list = {
			65 = {
				custom_tooltip = { text = EVTOPTB_MNM_4414_TOOLTIP_SUCCESS }
				hidden_effect = { character_event = { id = MNM.4417 days = 3 } }
			}
			35 = {
				custom_tooltip = { text = EVTOPTB_MNM_4414_TOOLTIP_FAILURE }
				hidden_effect = { character_event = { id = MNM.4418 days = 3 } }
			}
		}
	}
}

#You interpret the text
character_event = {
	id = MNM.4415
	desc = EVTDESC_MNM_4415
	picture = GFX_evt_library
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	option = {
		name = {
			trigger = { NOR = { religion = the_path religion = chung_tao } }
			text = EVTOPTA_MNM_4415_A
		}
		name = {
			trigger = { OR = { religion = the_path religion = chung_tao } }
			text = EVTOPTA_MNM_4415_B
		}
		custom_tooltip = { text = EVTOPTA_MNM_4414_TOOLTIP_SUCCESS }
		hidden_effect = { change_variable = { which = holy_seclusion_points value = 2 } }
		hidden_effect = { monastic_order_purity_effect = yes }

		piety = 100

		if = {
			limit = { NOT = { trait = erudite } }
			add_trait = erudite
		}
	}
}

#You fail to interpret the text
character_event = {
	id = MNM.4416
	desc = EVTDESC_MNM_4416
	picture = GFX_evt_recovery
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	option = {
		name = {
			trigger = { NOR = { religion = the_path religion = chung_tao } }
			text = EVTOPTA_MNM_4416_A
		}
		name = {
			trigger = { OR = { religion = the_path religion = chung_tao } }
			text = EVTOPTA_MNM_4416_B
		}
		custom_tooltip = { text = EVTOPTA_MNM_4414_TOOLTIP_FAILURE }
	}
}

#You get help
character_event = {
	id = MNM.4417
	desc = EVTDESC_MNM_4417
	picture = GFX_evt_bishop
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	option = {
		name = {
			trigger = { NOR = { religion = the_path religion = chung_tao } }
			text = EVTOPTA_MNM_4415_A
		}
		name = {
			trigger = { OR = { religion = the_path religion = chung_tao } }
			text = EVTOPTA_MNM_4415_B
		}
		custom_tooltip = { text = EVTOPTB_MNM_4414_TOOLTIP_SUCCESS }
		hidden_effect = { change_variable = { which = holy_seclusion_points value = 1 } }
	}
}

#Unhelpful court chaplain
character_event = {
	id = MNM.4418
	desc = EVTDESC_MNM_4418
	picture = GFX_evt_recovery
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	option = {
		name = EVTOPTA_MNM_4418
		custom_tooltip = { text = EVTOPTB_MNM_4414_TOOLTIP_FAILURE }
		hidden_effect = { change_variable = { which = holy_seclusion_points value = -1 } }

		if = {
			limit = {
				event_target:court_spiritual = { is_alive = yes }
			}
			opinion = {
				who = event_target:court_spiritual
				modifier = opinion_ungrateful
				years = 5
			}

			reverse_opinion = {
				who = event_target:court_spiritual
				modifier = opinion_ignorant
				years = 5
			}
		}
	}
}

#Your child wants your attention ping
character_event = {
	id = MNM.4419
	hide_window = yes
	is_triggered_only = yes
	immediate = { FROM = { character_event = { id = MNM.4420 } } }
}

character_event = {
	id = MNM.4420
	desc = EVTDESC_MNM_4420
	picture = GFX_evt_child_play
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	#Teach them about the scripture
	option = {
		name = EVTOPTA_MNM_4420

		random_list = {
			50 = {
				modifier = {
					factor = 1.5
					event_target:interrupting_child = { is_smart_trigger = yes }
				}
				modifier = {
					factor = 1.5
					event_target:interrupting_child = { OR = { trait = idolizer trait = zealous } }
				}
				modifier = {
					factor = 1.5
					event_target:interrupting_child = { opinion = { who = ROOT value = 50 } }
				}
				custom_tooltip = { text = EVTOPTA_MNM_4420_TOOLTIP_SUCCESS }
				event_target:interrupting_child = {
					set_character_flag = understood_lesson
					hidden_tooltip = { character_event = { id = MNM.4421 days = 2 } }
				}
			}
			50 = {
				modifier = {
					factor = 1.5
					event_target:interrupting_child = { is_dumb_trigger = yes }
				}
				modifier = {
					factor = 1.5
					event_target:interrupting_child = { trait = cynical }
				}
				custom_tooltip = { text = EVTOPTA_MNM_4420_TOOLTIP_FAILURE }
				event_target:interrupting_child = {
					set_character_flag = failed_lesson
					hidden_tooltip = { character_event = { id = MNM.4421 days = 2 } }
				}
			}
		}
	}

	#Be patient with them
	option = {
		name = EVTOPTB_MNM_4420
		custom_tooltip = { text = EVTOPTB_MNM_4420_TOOLTIP }
		hidden_effect = { change_variable = { which = holy_seclusion_points value = -1 } }

		random = {
			chance = 20
			add_trait_kind_effect = yes
		}

		random_list = {
			80 = {
				reverse_opinion = {
					who = event_target:interrupting_child
					modifier = kind_parent
					years = 10
				}
			}
			20 = {
				modifier = {
					factor = 0
					is_friend = event_target:interrupting_child
				}
				add_friend = event_target:interrupting_child
			}
		}
	}

	#Sho away
	option = {
		name = EVTOPTC_MNM_4420

		random_list = {
			65 = {
				modifier = {
					is_benevolent_trigger = yes
					factor = 1.5
				}
				modifier = {
					has_pleasant_personality_trigger = yes
					factor = 1.5
				}
				custom_tooltip = { text = EVTOPTC_MNM_4420_TOOLTIP_SUCCESS }
				event_target:interrupting_child = {
					set_character_flag = kindly_rejected
					hidden_tooltip = { character_event = { id = MNM.4421 days = 2 } }
				}
			}
			35 = {
				modifier = {
					is_evil_trigger = yes
					factor = 1.5
				}
				modifier = {
					has_unpleasant_personality_trigger = yes
					factor = 1.5
				}
				custom_tooltip = { text = EVTOPTC_MNM_4420_TOOLTIP_FAILURE }
				event_target:interrupting_child = {
					set_character_flag = cruelly_rejected
					hidden_tooltip = { character_event = { id = MNM.4421 days = 2 } }
				}
			}
		}
	}
}

#Child ping event
character_event = {
	id = MNM.4421
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		trigger_switch = {
			on_trigger = has_character_flag
			understood_lesson 	= { FROM = { character_event = { id = MNM.4422 } } clr_character_flag = understood_lesson }
			failed_lesson 		= { FROM = { character_event = { id = MNM.4423 } } clr_character_flag = failed_lesson }
			kindly_rejected 	= { FROM = { character_event = { id = MNM.4424 } } clr_character_flag = kindly_rejected }
			cruelly_rejected 	= { FROM = { character_event = { id = MNM.4425 } } clr_character_flag = cruelly_rejected }
		}
	}
}

#Understood lesson
character_event = {
	id = MNM.4422
	desc = EVTDESC_MNM_4422
	picture = GFX_evt_child_reading
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	option = {
		name = EVTOPTA_MNM_4422
		custom_tooltip = { text = EVTOPTA_MNM_4420_TOOLTIP_SUCCESS }
		hidden_effect = { change_variable = { which = holy_seclusion_points value = 2 } }
		hidden_effect = { monastic_order_purity_effect = yes }

		event_target:interrupting_child = {
			if = {
				limit = {
					has_dlc = "Zeus"
					NOT = { trait = idolizer }
				}
				add_trait = idolizer
			}
			if = {
				limit = {
					NOT = { has_dlc = "Zeus" }
					NOT = { trait = zealous }
				}
				add_trait = zealous
			}
			if = {
				limit = { NOT = { is_smart_trigger = yes } }
				random = {
					chance = 20
					add_trait = shrewd
				}
			}
		}

		random_list = {
			80 = {
				reverse_opinion = {
					who = event_target:interrupting_child
					modifier = kind_parent
					years = 10
				}
			}
			20 = {
				modifier = {
					factor = 0
					is_friend = event_target:interrupting_child
				}
				add_friend = event_target:interrupting_child
			}
		}
	}
}

#Did not understand lesson
character_event = {
	id = MNM.4423
	desc = EVTDESC_MNM_4423
	picture = GFX_evt_child_bully
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	option = {
		name = EVTOPTA_MNM_4423
		custom_tooltip = { text = EVTOPTA_MNM_4420_TOOLTIP_FAILURE }
		hidden_effect = { change_variable = { which = holy_seclusion_points value = -1 } }

		event_target:interrupting_child = {
			if = {
				limit = { NOT = { is_dumb_trigger = yes } }
				random = {
					chance = 15
					add_trait = dull
				}
			}
		}
	}
}

#Kindly rejected
character_event = {
	id = MNM.4424
	desc = EVTDESC_MNM_4424
	picture = GFX_evt_child_reading
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	option = {
		name = EVTOPTA_MNM_4424
		custom_tooltip = { text = EVTOPTC_MNM_4420_TOOLTIP_SUCCESS }
		hidden_effect = { change_variable = { which = holy_seclusion_points value = 1 } }
	}
}

#Cruelly rejected
character_event = {
	id = MNM.4425
	desc = EVTDESC_MNM_4425
	picture = GFX_evt_child_bully
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	immediate = {
		event_target:interrupting_child = {
			mother_even_if_dead = {
				if = {
					limit = { NOT = { character = ROOT } }
					save_event_target_as = other_parent
				}
			}
			father_even_if_dead = {
				if = {
					limit = { NOT = { character = ROOT } }
					save_event_target_as = other_parent
				}
			}
		}
	}

	option = {
		name = EVTOPTA_MNM_4425
		custom_tooltip = { text = EVTOPTC_MNM_4420_TOOLTIP_FAILURE }
		hidden_effect = { change_variable = { which = holy_seclusion_points value = -2 } }

		random = {
			chance = 20
			add_trait_cruel_effect = yes
		}

		random_list = {
			80 = {
				reverse_opinion = {
					who = event_target:interrupting_child
					modifier = cruel_parent
					years = 10
				}
			}
			20 = {
				modifier = {
					factor = 0
					is_friend = event_target:interrupting_child
				}
				add_rival = event_target:interrupting_child
			}
		}
	}
}

#General good outcome
character_event = {
	id = MNM.4426
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	hide_from = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	desc = {
		trigger = { has_character_flag = success_seculison_desc_A }
		text = EVTDESC_MNM_4425_A
	}
	desc = {
		trigger = { has_character_flag = success_seculison_desc_B }
		text = EVTDESC_MNM_4425_B
	}
	desc = {
		trigger = { has_character_flag = success_seculison_desc_C }
		text = EVTDESC_MNM_4425_C
	}


	immediate = {
		random_list = { #This setup
			33 = {
				modifier = { factor = 0 has_character_flag = success_seculison_desc_A }
				set_character_flag = success_seculison_desc_A
				clr_character_flag = success_seculison_desc_B
				clr_character_flag = success_seculison_desc_C
			}
			33 = {
				modifier = { factor = 0 has_character_flag = success_seculison_desc_B }
				set_character_flag = success_seculison_desc_B
				clr_character_flag = success_seculison_desc_A
				clr_character_flag = success_seculison_desc_C
			}
			33 = {
				modifier = { factor = 0 has_character_flag = success_seculison_desc_C }
				set_character_flag = success_seculison_desc_C
				clr_character_flag = success_seculison_desc_B
				clr_character_flag = success_seculison_desc_A
			}
		}
	}

	option = {
		name = {
			trigger = {
				NOT = {
					is_dharmic_monastic_member_trigger = yes
				}
			}
			text = EVTOPTA_MNM_4426_GOD
		}
		name = {
			trigger = {
				is_dharmic_monastic_member_trigger = yes
			}
			text = EVTOPTA_MNM_4426_NOGOD
		}
		custom_tooltip = { text = EVTOPTA_4406_TOOLTIP }

		hidden_effect = {
			change_variable = { which = holy_seclusion_points value = 1 }
			#clr_character_flag = success_seculison_desc_A
			#clr_character_flag = success_seculison_desc_B
			#clr_character_flag = success_seculison_desc_C
		}
	}
}

#Fail/success evaluation for penance/meditation
character_event = {
	id = MNM.4427
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = { FROM = { check_variable = { which = holy_seclusion_points value = 4 } } }
			FROM = { letter_event = { id = MNM.4428 } }
		}
		if = {
			limit = { FROM = { NOT = { check_variable = { which = holy_seclusion_points value = -2 } } } }
			FROM = { letter_event = { id = MNM.4429 } }
		}
	}
}

#Penance/meditation success
letter_event = {
	id = MNM.4428
	border = GFX_event_letter_frame_religion
	desc = EVTDESC_MNM_4428
	is_triggered_only = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	option = {
		name = EVTOPTA_MNM_4428

		if = {
			limit = { has_quest = quest_monastic_order_penance }
			clr_quest = quest_monastic_order_penance
			sound_effect = monastic_orders_penance
			remove_character_modifier = doing_penance
		}
		if = {
			limit = { has_quest = quest_monastic_order_meditation }
			clr_quest = quest_monastic_order_meditation
			sound_effect = monastic_orders_meditate_in_seclusion
			remove_character_modifier = in_meditation
		}
		if = {
			limit = {
				any_owned_bloodline = {
					has_bloodline_flag = monastic_saintly_bloodline
					bloodline_is_active_for = PREV
				}
			}
			add_society_currency_major_effect = yes
		}
		else = {
			add_society_currency_medium_effect = yes
		}
		hidden_effect = {
			monastic_order_purity_effect = yes
			clr_character_flag = success_seculison_desc_A #Flags from 4426
			clr_character_flag = success_seculison_desc_B
			clr_character_flag = success_seculison_desc_C
			clr_character_flag = holy_seclusion_struggled_with_vice
			clr_character_flag = holy_seclusion_scripture_reading
			clr_character_flag = holy_seclusion_timer
			clr_character_flag = holy_seclusion_struggled_with_loneliness
			clr_character_flag = holy_seclusion_interrupting_child
		}
	}
}

#Penance/meditation failure
letter_event = {
	id = MNM.4429
	border = GFX_event_letter_frame_religion
	desc = EVTDESC_MNM_4429
	is_triggered_only = yes

	trigger = {
		OR = {
			#is_christian_monastic_member_trigger = yes
			is_dharmic_monastic_member_trigger = yes
			#society_member_of = monastic_order_stoics
		}
		OR = {
			has_quest = quest_monastic_order_penance
			has_quest = quest_monastic_order_meditation
		}
	}

	option = {
		name = EVTOPTA_MNM_4429

		if = {
			limit = { has_quest = quest_monastic_order_penance }
			clr_quest = { id = quest_monastic_order_penance failure = yes }
			remove_character_modifier = doing_penance
		}
		if = {
			limit = { has_quest = quest_monastic_order_meditation }
			clr_quest = { id = quest_monastic_order_meditation failure = yes }
			remove_character_modifier = in_meditation
		}
		hidden_effect = {
			clr_character_flag = success_seculison_desc_A #Flags from 4426
			clr_character_flag = success_seculison_desc_B
			clr_character_flag = success_seculison_desc_C
		}
	}
}

#Left Monastic Order or cancelled seclusion mission, and therefore rejoins the world of the living
character_event = {
	id = MNM.4399
	border = GFX_event_normal_frame_religion
	desc = EVTDESC_MNM_4399
	picture = GFX_evt_recovery

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			remove_character_modifier = doing_penance
			remove_character_modifier = in_meditation
		}
	}

	option = {
		name = EVTOPTA_MNM_4399

		if = {
			limit = { has_quest = quest_monastic_order_penance }
			clr_quest = { id = quest_monastic_order_penance failure = yes }
		}
		if = {
			limit = { has_quest = quest_monastic_order_meditation }
			clr_quest = { id = quest_monastic_order_meditation failure = yes }
		}
		hidden_effect = {
			hidden_effect = {
				clr_character_flag = success_seculison_desc_A #Flags from 4426
				clr_character_flag = success_seculison_desc_B
				clr_character_flag = success_seculison_desc_C
				clr_character_flag = holy_seclusion_struggled_with_vice
				clr_character_flag = holy_seclusion_scripture_reading
				clr_character_flag = holy_seclusion_timer
				clr_character_flag = holy_seclusion_struggled_with_loneliness
				clr_character_flag = holy_seclusion_interrupting_child
			}
		}
	}
}

#MISSION: Theology focus
society_quest_event = {
	id = MNM.4015
	desc = EVTDESC_MNM_4015
	picture = GFX_evt_secluded_in_prayer
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes

	trigger = {
		NOR = {
			has_focus = focus_theology
			has_any_quest = yes
		}
	}

	option = {
		name = ACCEPT
		set_quest = quest_monastic_order_theology_focus
	}

	option = {
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }

		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}

		ai_chance = { factor = 0 }
	}
}

#send to grandmaster for Ping
character_event = {
	id = MNM.4016
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		random_society_member = {
			limit = {
				same_society_as = ROOT
				is_society_grandmaster = yes
			}
			character_event = {
				id = MNM.4017
			}
		}
	}
}


#Ping
character_event = {
	id = MNM.4017
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		FROM = {
			letter_event = {
				id = MNM.4018
			}
		}
	}
}

letter_event = {
	id = MNM.4018
	desc = EVTDESC_MNM_4018
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes


	option = {
		name = EVTOPT_MNM_4018

		clr_quest = quest_monastic_order_theology_focus
		sound_effect = monastic_orders_pick_theology_focus
		hidden_effect = { monastic_order_purity_effect = yes }

		if = {
			limit = {
				any_owned_bloodline = {
					has_bloodline_flag = monastic_saintly_bloodline
					bloodline_is_active_for = PREV
				}
			}
			add_society_currency_medium_effect = yes
		}
		else = {
			add_society_currency_minor_effect = yes
		}
	}

}
#MISSION: Build a Temple
society_quest_event = {
	id = MNM.4023
	desc = EVTDESC_MNM_4023
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes


	option = {
		name = ACCEPT
		set_quest = monastic_orders_temple_construction
	}
	option = {
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }

		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}

		ai_chance = { factor = 0 }
	}
}

#send to grandmaster for Ping
character_event = {
	id = MNM.4024
	is_triggered_only = yes
	hide_window = yes
	
	trigger = {
		has_quest = monastic_orders_temple_construction
		FROM = {
			holding_type = temple
		}
		NOT = { has_character_flag = monastic_orders_temple_construction_ongoing } #flag to avoid doubling of letter events when finishing two buildings at the same time
	}
	
	immediate = {
		set_character_flag = monastic_orders_temple_construction_ongoing
		random_society_member = {
			limit = {
				same_society_as = ROOT
				is_society_grandmaster = yes
			}
			character_event = {
				id = MNM.4025
			}
		}
	}
}


#Ping
character_event = {
	id = MNM.4025
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		FROM = {
			character_event = {
				id = MNM.4026
			}
		}
	}
}

letter_event = {
	id = MNM.4026
	desc = EVTDESC_MNM_4026
	border = GFX_event_letter_frame_religion

	is_triggered_only = yes
	
	option = {
		name = EVTOPT_MNM_4026
		clr_quest = monastic_orders_temple_construction
		sound_effect = monastic_orders_build_temple_holding
		hidden_effect = { monastic_order_purity_effect = yes }
		if = {
			limit = {
				any_owned_bloodline = {
					has_bloodline_flag = monastic_saintly_bloodline
				}
			}
			add_society_currency_large_effect = yes
		}
		else = {
			add_society_currency_major_effect = yes		
		}
	}
	after = {
		clr_character_flag = monastic_orders_temple_construction_ongoing
	}
}



###POWERS###

#POWER: Swapping Celibacy
character_event = {
	id = MNM.4090
	desc = EVTDESC_MNM_4090
	picture = GFX_evt_secluded_in_prayer
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPT_MNM_4090
	}
}

character_event = {
	id = MNM.4091
	desc = EVTDESC_MNM_4091
	picture = GFX_evt_pregnancy
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes


	option = {
		name = EVTOPT_MNM_4091
		remove_trait = celibate
		clr_character_flag = fr_monastic_celibate
	}
}


#POWER: Rk2 Remove sin "spiritual_guidance"
#Notification for when you do it on someone
character_event = {
	id = MNM.4950
	picture = GFX_evt_secluded_in_prayer
	desc = EVTDESC_MNM_4950
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EXCELLENT
	}
}

#Notification for when you are targeted
character_event = {
	id = MNM.4951
	picture = GFX_evt_secluded_in_prayer
	desc = EVTDESC_MNM_4951
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = I_SEE
		if = {
			limit = { has_character_flag = spiritual_guidance_lustful }
			tooltip = { remove_trait = lustful }
		}
		if = {
			limit = { has_character_flag = spiritual_guidance_gluttonous }
			tooltip = { remove_trait = gluttonous }
		}
		if = {
			limit = { has_character_flag = spiritual_guidance_greedy }
			tooltip = { remove_trait = greedy }
		}
		if = {
			limit = { has_character_flag = spiritual_guidance_slothful }
			tooltip = { remove_trait = slothful }
		}
		if = {
			limit = { has_character_flag = spiritual_guidance_wroth }
			tooltip = { remove_trait = wroth }
		}
		if = {
			limit = { has_character_flag = spiritual_guidance_envious }
			tooltip = { remove_trait = envious }
		}
		if = {
			limit = { has_character_flag = spiritual_guidance_proud }
			tooltip = { remove_trait = proud }
		}
    if = {
			limit = { has_character_flag = spiritual_guidance_cruel }
			tooltip = { remove_trait = cruel }
		}
    if = {
			limit = { has_character_flag = spiritual_guidance_kind }
			tooltip = { remove_trait = kind }
		}
    if = {
			limit = { has_character_flag = spiritual_guidance_charitable }
			tooltip = { remove_trait = charitable }
		}
    if = {
			limit = { has_character_flag = spiritual_guidance_content }
			tooltip = { remove_trait = content }
		}
    if = {
			limit = { has_character_flag = spiritual_guidance_arbitrary }
			tooltip = { remove_trait = arbitrary }
		}
    if = {
			limit = { has_character_flag = spiritual_guidance_deceitful }
			tooltip = { remove_trait = deceitful }
		}
		clr_character_flag = spiritual_guidance_lustful
		clr_character_flag = spiritual_guidance_gluttonous
		clr_character_flag = spiritual_guidance_greedy
		clr_character_flag = spiritual_guidance_slothful
		clr_character_flag = spiritual_guidance_wroth
		clr_character_flag = spiritual_guidance_envious
		clr_character_flag = spiritual_guidance_proud
    clr_character_flag = spiritual_guidance_cruel
    clr_character_flag = spiritual_guidance_kind
    clr_character_flag = spiritual_guidance_charitable
    clr_character_flag = spiritual_guidance_content
    clr_character_flag = spiritual_guidance_arbitrary
    clr_character_flag = spiritual_guidance_deceitful
	}
}

#POWER: Rk3 Remove sin "teach_virtue"
#Notification for when you do it on someone
character_event = {
	id = MNM.4960
	picture = GFX_evt_religious_exultation
	desc = EVTDESC_MNM_4960
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EXCELLENT
	}
}

#Notification for when you are targeted
character_event = {
	id = MNM.4961
	picture = GFX_evt_religious_exultation
	desc = EVTDESC_MNM_4961
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = I_SEE
		if = {
			limit = { has_character_flag = teach_virtue_chaste }
			tooltip = { add_trait = chaste }
		}
		if = {
			limit = { has_character_flag = teach_virtue_temperate }
			tooltip = { add_trait = temperate }
		}
		if = {
			limit = { has_character_flag = teach_virtue_charitable }
			tooltip = { add_trait = charitable }
		}
		if = {
			limit = { has_character_flag = teach_virtue_diligent }
			tooltip = { add_trait = diligent }
		}
		if = {
			limit = { has_character_flag = teach_virtue_patient }
			tooltip = { add_trait = patient }
		}
		if = {
			limit = { has_character_flag = teach_virtue_kind }
			tooltip = { add_trait = kind }
		}
		if = {
			limit = { has_character_flag = teach_virtue_humble }
			tooltip = { add_trait = humble }
		}
    if = {
			limit = { has_character_flag = teach_virtue_cruel }
			tooltip = { add_trait = cruel }
		}
    if = {
			limit = { has_character_flag = teach_virtue_greedy }
			tooltip = { add_trait = greedy }
		}
    if = {
			limit = { has_character_flag = teach_virtue_ambitious }
			tooltip = { add_trait = ambitious }
		}
    if = {
			limit = { has_character_flag = teach_virtue_just }
			tooltip = { add_trait = just }
		}
    if = {
			limit = { has_character_flag = teach_virtue_honest }
			tooltip = { add_trait = honest }
		}
		clr_character_flag = teach_virtue_chaste
		clr_character_flag = teach_virtue_temperate
		clr_character_flag = teach_virtue_charitable
		clr_character_flag = teach_virtue_diligent
		clr_character_flag = teach_virtue_patient
		clr_character_flag = teach_virtue_kind
		clr_character_flag = teach_virtue_humble
    clr_character_flag = teach_virtue_cruel
    clr_character_flag = teach_virtue_greedy
    clr_character_flag = teach_virtue_ambitious
    clr_character_flag = teach_virtue_just
    clr_character_flag = teach_virtue_honest
	}
}

###MISC###

#Soul purity effect
#monastic_order_purity_effect is to be edited with evil and neutral monk societies

character_event = {
	id = MNM.4400
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_religion

	desc = {
		trigger = { has_character_flag = purity_remove_cynical }
		text = EVTDESC_4400_REMOVE_CYNICAL
	}
	desc = {
		trigger = { has_character_flag = purity_remove_gluttonous }
		text = EVTDESC_4400_REMOVE_GLUTTONOUS
	}
	desc = {
		trigger = { has_character_flag = purity_remove_greedy }
		text = EVTDESC_4400_REMOVE_GREEDY
	}
	desc = {
		trigger = { has_character_flag = purity_remove_slothful }
		text = EVTDESC_4400_REMOVE_SLOTHFUL
	}
	desc = {
		trigger = { has_character_flag = purity_remove_envious }
		text = EVTDESC_4400_REMOVE_ENVIOUS
	}
	desc = {
		trigger = { has_character_flag = purity_remove_wroth }
		text = EVTDESC_4400_REMOVE_WROTH
	}
	desc = {
		trigger = { has_character_flag = purity_remove_proud }
		text = EVTDESC_4400_REMOVE_PROUD
	}
	desc = {
		trigger = { has_character_flag = purity_remove_deceitful }
		text = EVTDESC_4400_REMOVE_DECEITFUL
	}
	desc = {
		trigger = { has_character_flag = purity_remove_cruel }
		text = EVTDESC_4400_REMOVE_CRUEL
	}
	desc = {
		trigger = { has_character_flag = purity_remove_lustful }
		text = EVTDESC_4400_REMOVE_LUSTFUL
	}
	desc = {
		trigger = { has_character_flag = purity_add_humble }
		text = EVTDESC_4400_ADD_HUMBLE
	}
	desc = {
		trigger = { has_character_flag = purity_add_charitable }
		text = EVTDESC_4400_ADD_CHARITABLE
	}
	desc = {
		trigger = { has_character_flag = purity_add_chaste }
		text = EVTDESC_4400_ADD_CHASTE
	}
	desc = {
		trigger = { has_character_flag = purity_add_kind }
		text = EVTDESC_4400_ADD_KIND
	}
	desc = {
		trigger = { has_character_flag = purity_add_temperate }
		text = EVTDESC_4400_ADD_TEMPERATE
	}
	desc = {
		trigger = { has_character_flag = purity_add_honest }
		text = EVTDESC_4400_ADD_HONEST
	}
	desc = {
		trigger = { has_character_flag = purity_remove_ambitious }
		text = EVTDESC_4400_REMOVE_AMBITIOUS
	}
	desc = {
		trigger = { has_character_flag = purity_add_content }
		text = EVTDESC_4400_ADD_CONTENT
	}
	desc = {
		trigger = { has_character_flag = purity_add_patient }
		text = EVTDESC_4400_ADD_PATIENT
	}
	desc = {
		trigger = { has_character_flag = purity_add_diligent }
		text = EVTDESC_4400_ADD_DILIGENT
	}
  desc = {
		trigger = { has_character_flag = purity_remove_charitable }
		text = EVTDESC_4400_REMOVE_CHARITABLE
	}
  desc = {
		trigger = { has_character_flag = purity_remove_kind }
		text = EVTDESC_4400_REMOVE_KIND
	}
  desc = {
		trigger = { has_character_flag = purity_remove_content }
		text = EVTDESC_4400_REMOVE_CONTENT
	}
  desc = {
		trigger = { has_character_flag = purity_add_greedy }
		text = EVTDESC_4400_ADD_GREEDY
	}
  desc = {
		trigger = { has_character_flag = purity_add_cruel }
		text = EVTDESC_4400_ADD_CRUEL
	}
  desc = {
		trigger = { has_character_flag = purity_add_ambitious }
		text = EVTDESC_4400_ADD_AMBITIOUS
	}
  desc = {
		trigger = { has_character_flag = purity_remove_arbitrary }
		text = EVTDESC_4400_REMOVE_ARBITRARY
	}
  desc = {
		trigger = { has_character_flag = purity_add_just }
		text = EVTDESC_4400_ADD_JUST
	}

	is_triggered_only = yes

	trigger = {
		is_monastic_member_trigger = yes
    OR = {
      AND = {
        is_good_monastic_member_trigger = yes
        OR = {
          trait = cynical
          trait = gluttonous
          trait = greedy
          trait = slothful
          trait = envious
          trait = wroth
          trait = proud
          trait = deceitful
          trait = cruel
          trait = lustful
          trait = ambitious
          NOT = { trait = humble }
          NOT = { trait = charitable }
          NOT = { trait = kind }
          NOT = { trait = temperate }
          NOT = { trait = honest }
          NOT = { trait = chaste }
          NOT = { trait = patient }
          NOT = { trait = diligent }
          NOT = { trait = content }
        }
      }
      AND = {
        is_evil_monastic_member_trigger = yes
        OR = {
          trait = cynical
          trait = gluttonous
          trait = charitable
          trait = slothful
          trait = kind
          trait = lustful
          trait = content
          NOT = { trait = temperate }
          NOT = { trait = greedy }
          NOT = { trait = diligent }
          NOT = { trait = cruel }
          NOT = { trait = chaste }
          NOT = { trait = ambitious }
        }
      }
      AND = {
        is_lawful_neutral_monastic_member_trigger = yes
        OR = {
          trait = cynical
          trait = gluttonous
          trait = slothful
          trait = wroth
          trait = deceitful
          trait = lustful
          trait = arbitrary
          NOT = { trait = temperate }
          NOT = { trait = diligent }
          NOT = { trait = patient }
          NOT = { trait = honest }
          NOT = { trait = chaste }
          NOT = { trait = just }
        }
      }
    }
	}

	immediate = {
		#FIRST STAGE GOOD
		#Removes cynic, gluttonous, greedy, slothful, lustful, envious, wrath, pride, deceitful,
		#Adds humble, charitable
		if = {
			limit = {
        is_good_monastic_member_trigger = yes
				OR = {
					trait = cynical
					trait = gluttonous
					trait = greedy
					trait = slothful
					trait = envious
					trait = wroth
					trait = proud
					trait = deceitful
					trait = cruel
					trait = lustful
					NOT = { trait = humble }
					NOT = { trait = charitable }
				}
      }
			random_list = {
				15 = {
					modifier = { factor = 0 NOT = { trait = cynical } }
					set_character_flag = purity_remove_cynical
				}
				10 = {
					modifier = { factor = 0 NOT = { trait = gluttonous } }
					set_character_flag = purity_remove_gluttonous
				}
				10 = {
					modifier = { factor = 0 NOT = { trait = greedy } }
					set_character_flag = purity_remove_greedy
				}
				10 = {
					modifier = { factor = 0 NOT = { trait = slothful } }
					set_character_flag = purity_remove_slothful
				}
				10 = {
					modifier = { factor = 0 NOT = { trait = envious } }
					set_character_flag = purity_remove_envious
				}
				10 = {
					modifier = { factor = 0 NOT = { trait = wroth } }
					set_character_flag = purity_remove_wroth
				}
				10 = {
					modifier = { factor = 0 NOT = { trait = proud } }
					set_character_flag = purity_remove_proud
				}
				10 = {
					modifier = { factor = 0 NOT = { trait = deceitful } }
					set_character_flag = purity_remove_deceitful
				}
				10 = {
					modifier = { factor = 0 NOT = { trait = cruel } }
					set_character_flag = purity_remove_cruel
				}
				10 = {
					modifier = {
						factor = 0
						NOT = { trait = lustful }
					}
					set_character_flag = purity_remove_lustful
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							trait = humble
							trait = proud
						}
					}
					set_character_flag = purity_add_humble
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							trait = charitable
							trait = greedy
						}
					}
					set_character_flag = purity_add_charitable
				}
			}
		}

    #FIRST STAGE EVIL
		#Removes cynic, gluttonous, charitable, slothful, lustful, kind,
		#Adds greedy
		if = {
			limit = {
        is_evil_monastic_member_trigger = yes
				OR = {
					trait = cynical
					trait = gluttonous
					trait = charitable
					trait = slothful
					trait = lustful
					trait = kind
					NOT = { trait = greedy }
				}
      }
			random_list = {
				15 = {
					modifier = { factor = 0 NOT = { trait = cynical } }
					set_character_flag = purity_remove_cynical
				}
				10 = {
					modifier = { factor = 0 NOT = { trait = gluttonous } }
					set_character_flag = purity_remove_gluttonous
				}
				10 = {
					modifier = { factor = 0 NOT = { trait = charitable } }
					set_character_flag = purity_remove_charitable
				}
				10 = {
					modifier = { factor = 0 NOT = { trait = slothful } }
					set_character_flag = purity_remove_slothful
				}
        10 = {
					modifier = { factor = 0 NOT = { trait = lustful } }
					set_character_flag = purity_remove_lustful
				}
				10 = {
					modifier = { factor = 0 NOT = { trait = kind } }
					set_character_flag = purity_remove_kind
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							trait = charitable
							trait = greedy
						}
					}
					set_character_flag = purity_add_greedy
				}
			}
		}

    #FIRST STAGE LAWFUL
		#Removes cynic, gluttonous, slothful, lustful, wrath, deceitful,
		#Adds honest
		if = {
			limit = {
        is_lawful_neutral_monastic_member_trigger = yes
				OR = {
					trait = cynical
					trait = gluttonous
					trait = slothful
          trait = lustful
					trait = wroth
					trait = deceitful
					NOT = { trait = honest }
				}
      }
			random_list = {
				15 = {
					modifier = { factor = 0 NOT = { trait = cynical } }
					set_character_flag = purity_remove_cynical
				}
				10 = {
					modifier = { factor = 0 NOT = { trait = gluttonous } }
					set_character_flag = purity_remove_gluttonous
				}
				10 = {
					modifier = { factor = 0 NOT = { trait = slothful } }
					set_character_flag = purity_remove_slothful
				}
        10 = {
					modifier = { factor = 0 NOT = { trait = lustful } }
					set_character_flag = purity_remove_lustful
				}
				10 = {
					modifier = { factor = 0 NOT = { trait = wroth } }
					set_character_flag = purity_remove_wroth
				}
				10 = {
					modifier = { factor = 0 NOT = { trait = deceitful } }
					set_character_flag = purity_remove_deceitful
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							trait = honest
							trait = deceitful
						}
					}
					set_character_flag = purity_add_honest
				}
			}
		}

		#SECOND STAGE GOOD
		#Add traits chaste, kind, temperate, honest
		if = {
			limit = {
        is_good_monastic_member_trigger = yes
				NOR = {
					trait = cynical
					trait = gluttonous
					trait = slothful
					trait = envious
					trait = wroth
					trait = deceitful
					trait = cruel
					trait = lustful
				}
				trait = charitable
				trait = humble
				NAND = {
					trait = chaste
					trait = kind
					trait = temperate
					trait = honest
				}
			}
			random_list = {
				10 = {
					modifier = {
						factor = 0
						trait = chaste
					}
					set_character_flag = purity_add_chaste
				}
				10 = {
					modifier = { factor = 0 trait = kind }
					set_character_flag = purity_add_kind
				}
				10 = {
					modifier = { factor = 0 trait = temperate }
					set_character_flag = purity_add_temperate
				}
				10 = {
					modifier = { factor = 0 trait = honest }
					set_character_flag = purity_add_honest
				}
			}
		}

    #SECOND STAGE EVIL
		#Add traits chaste, cruel, temperate
		if = {
			limit = {
        is_evil_monastic_member_trigger = yes
				NOR = {
					trait = cynical
					trait = gluttonous
					trait = slothful
          trait = lustful
					trait = kind
					trait = charitable
				}
				trait = greedy
				NAND = {
					trait = chaste
					trait = cruel
					trait = temperate
				}
			}
			random_list = {
				10 = {
					modifier = {
						factor = 0
						trait = chaste
					}
					set_character_flag = purity_add_chaste
				}
				10 = {
					modifier = { factor = 0 trait = cruel }
					set_character_flag = purity_add_cruel
				}
				10 = {
					modifier = { factor = 0 trait = temperate }
					set_character_flag = purity_add_temperate
				}
			}
		}

    #SECOND STAGE LAWFUL
		#Add traits chaste, patient, temperate
		if = {
			limit = {
        is_lawful_neutral_monastic_member_trigger = yes
				NOR = {
					trait = cynical
					trait = gluttonous
					trait = slothful
          trait = lustful
					trait = wroth
					trait = deceitful
				}
				trait = honest
				NAND = {
					trait = chaste
					trait = patient
					trait = temperate
				}
			}
			random_list = {
				10 = {
					modifier = {
						factor = 0
						trait = chaste
					}
					set_character_flag = purity_add_chaste
				}
				10 = {
					modifier = { factor = 0 trait = patient }
					set_character_flag = purity_add_patient
				}
				10 = {
					modifier = { factor = 0 trait = temperate }
					set_character_flag = purity_add_temperate
				}
			}
		}

		#THIRD STAGE GOOD
		#Removes ambitious
		#Adds patient, diligent, content
		if = {
			limit = {
        is_good_monastic_member_trigger = yes
				NOR = {
					trait = cynical
					trait = slothful
					trait = wroth
					trait = cruel
				}
				trait = charitable
				trait = humble
				trait = chaste
				trait = kind
				trait = temperate
				trait = honest
			}

			random_list = {
				10 = {
					modifier = { factor = 0 NOT = { trait = ambitious } }
					set_character_flag = purity_remove_ambitious
				}
				10 = {
					modifier = {
						factor =  0
						OR = {
							trait = ambitious
							trait = content
						}
					}
					set_character_flag = purity_add_content
				}
				10 = {
					modifier = { factor = 0 trait = patient }
					set_character_flag = purity_add_patient
				}
				10 = {
					modifier = { factor = 0 trait = diligent }
					set_character_flag = purity_add_diligent
				}
			}
		}

    #THIRD STAGE EVIL
		#Removes content
		#Adds diligent, ambitious
		if = {
			limit = {
        is_evil_monastic_member_trigger = yes
				NOR = {
					trait = cynical
					trait = slothful
				}
				trait = greedy
				trait = chaste
				trait = cruel
				trait = temperate
			}

			random_list = {
				10 = {
					modifier = { factor = 0 NOT = { trait = content } }
					set_character_flag = purity_remove_content
				}
				10 = {
					modifier = {
						factor =  0
						OR = {
							trait = ambitious
							trait = content
						}
					}
					set_character_flag = purity_add_ambitious
				}
				10 = {
					modifier = { factor = 0 trait = diligent }
					set_character_flag = purity_add_diligent
				}
			}
		}

    #THIRD STAGE LAWFUL
		#Removes arbitrary
		#Adds diligent, just
		if = {
			limit = {
        is_lawful_neutral_monastic_member_trigger = yes
				NOR = {
					trait = cynical
					trait = slothful
				}
				trait = chaste
				trait = patient
				trait = temperate
				trait = honest
			}

			random_list = {
				10 = {
					modifier = { factor = 0 NOT = { trait = arbitrary } }
					set_character_flag = purity_remove_arbitrary
				}
				10 = {
					modifier = {
						factor =  0
						OR = {
							trait = arbitrary
							trait = just
						}
					}
					set_character_flag = purity_add_just
				}
				10 = {
					modifier = { factor = 0 trait = diligent }
					set_character_flag = purity_add_diligent
				}
			}
		}

	}

	option = {
		name = {
			trigger = {
				NOT = {
					is_dharmic_monastic_member_trigger = yes
				}
			}
			text = EVTOPTA_MNM_4400_GOD
		}
		name = {
			trigger = {
        is_dharmic_monastic_member_trigger = yes
			}
			text = EVTOPTA_MNM_4400_NOGOD
		}

		trigger_switch = {
			on_trigger = has_character_flag
			purity_remove_cynical		= { remove_trait = cynical }
			purity_remove_gluttonous	= { remove_trait = gluttonous }
			purity_remove_greedy		= { remove_trait = greedy }
			purity_remove_slothful		= { remove_trait = slothful }
			purity_remove_envious		= { remove_trait = envious }
			purity_remove_wroth			= { remove_trait = wroth }
			purity_remove_proud			= { remove_trait = proud }
			purity_remove_deceitful     = { remove_trait = deceitful }
			purity_remove_cruel			= { remove_trait = cruel }
			purity_remove_lustful		= { remove_trait = lustful }
			purity_add_humble			= { add_trait = humble }
			purity_add_charitable		= { add_trait = charitable }
			purity_add_chaste			= { add_trait = chaste }
			purity_add_kind				= { add_trait = kind }
			purity_add_temperate		= { add_trait = temperate }
			purity_add_honest			= { add_trait = honest }
			purity_remove_ambitious		= { remove_trait = ambitious }
			purity_add_content			= { add_trait = content }
			purity_add_patient			= { add_trait = patient }
			purity_add_diligent			= { add_trait = diligent }
      #EVIL
      purity_remove_charitable		= { remove_trait = charitable }
      purity_remove_kind				= { remove_trait = kind }
      purity_remove_content			= { remove_trait = content }
      purity_add_greedy		= { add_trait = greedy }
      purity_add_cruel			= { add_trait = cruel }
      purity_add_ambitious		= { add_trait = ambitious }
      #LAWFUL
      purity_remove_arbitrary		= { remove_trait = arbitrary }
      purity_add_just	  	= { add_trait = just }
		}

		clr_character_flag = purity_remove_cynical
		clr_character_flag = purity_remove_gluttonous
		clr_character_flag = purity_remove_greedy
		clr_character_flag = purity_remove_slothful
		clr_character_flag = purity_remove_envious
		clr_character_flag = purity_remove_wroth
		clr_character_flag = purity_remove_proud
		clr_character_flag = purity_remove_deceitful
		clr_character_flag = purity_remove_cruel
		clr_character_flag = purity_remove_lustful
		clr_character_flag = purity_add_humble
		clr_character_flag = purity_add_charitable
		clr_character_flag = purity_add_chaste
		clr_character_flag = purity_add_kind
		clr_character_flag = purity_add_temperate
		clr_character_flag = purity_add_honest
		clr_character_flag = purity_remove_ambitious
		clr_character_flag = purity_add_content
		clr_character_flag = purity_add_patient
		clr_character_flag = purity_add_diligent
    clr_character_flag = purity_remove_charitable
    clr_character_flag = purity_remove_kind
    clr_character_flag = purity_remove_content
    clr_character_flag = purity_add_greedy
    clr_character_flag = purity_add_cruel
    clr_character_flag = purity_add_ambitious
    clr_character_flag = purity_remove_arbitrary
    clr_character_flag = purity_add_just
	}
}

###INTERACTION EVENTS###

#Monastic Friendship & Love #

#Starter Event for Monastic Friendship - I need a friend.
character_event = {
	id = MNM.4435
	picture = GFX_evt_stone_church
	desc = EVTDESC_MNM_4435
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	only_capable = yes

	trigger = {
		NOT = { is_inaccessible_trigger = yes }
		NOT = { trait = homosexual }
		any_society_member = {
			same_society_as = ROOT
			NOT = { character = ROOT }
			ai = yes
			opinion = {
				who = ROOT
				value = 0
			}
			reverse_opinion = {
				who = ROOT
				value = 0
			}
			NOT = {
				trait = amateurish_plotter
				trait = flamboyant_schemer
				trait = intricate_webweaver
				trait = elusive_shadow
				is_rival = ROOT
				is_friend = ROOT
				is_lover = ROOT
				trait = chaste
				trait = celibate
			}
			OR = {
				AND = {
					is_female = no
					ROOT = { is_female = no }
				}
				AND = {
					is_female = yes
					ROOT = { is_female = yes }
				}
			}
		}
		is_monastic_member_trigger = yes
	}

	immediate = {
		save_event_target_as = monastic_befriender
		random_society_member = {
			limit = {
				same_society_as = ROOT
				NOT = { character = ROOT }
				ai = yes
				AND = {
					opinion = {
						who = ROOT
						value = 0
					}
					reverse_opinion = {
						who = ROOT
						value = 0
					}
					NOT = {
						trait = amateurish_plotter
						trait = flamboyant_schemer
						trait = intricate_webweaver
						trait = elusive_shadow
						is_rival = ROOT
						is_friend = ROOT
						is_lover = ROOT
						trait = chaste
						trait = celibate
					}
					OR = {
						AND = {
							is_female = no
							ROOT = { is_female = no }
						}
						AND = {
							is_female = yes
							ROOT = { is_female = yes }
						}
					}
				}
			}
			save_event_target_as = monastic_friend
		}
	}

	option = { #I will come as summoned.
		name = EVTOPTA_MNM_4435
		event_target:monastic_friend = {
			character_event = { id = MNM.4436 days = 30 random = 30 }
		}
	}
}

#Ping Event for Monastic Friendship
character_event = {
	id = MNM.4436
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		event_target:monastic_befriender = {
			character_event = { id = MNM.4437 }
		}
	}
}

#Become closer with other member (Shared activity might lead to friendship? What to do?)
character_event = {
	id = MNM.4437
	picture = GFX_evt_monastery_monks
	desc = {
		text = EVTDESC_MNM_4437
		picture = GFX_evt_monastery_monks
		trigger = {	is_female = no }
	}
	desc = {
		text = EVTDESC_MNM_4437
		picture = GFX_evt_monastery_nuns
		trigger = {	is_female = yes }
	}
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
		is_monastic_member_trigger = yes
	}


	immediate = {
		opinion = {
			who = FROM
			modifier = opinion_budding_friendship
		}
		FROM = {
			opinion = {
				who = ROOT
				modifier = opinion_budding_friendship
			}
		}
	}

	option = { #play a game of strategy
		name = EVTOPTA_MNM_4437
		random = {
			chance = 75
			add_character_modifier = {
				modifier = played_strategy_game
				years = 5
			}
		}
		custom_tooltip = {
			text = monastic_may_become_friends
			hidden_tooltip = {
				event_target:monastic_friend = {
					if = {
						limit = {
							OR = {
								trait = misguided_warrior
								trait = tough_soldier
								trait = skilled_tactician
								trait = brilliant_strategist
							}
						}
						character_event = { id = MNM.4438 days = 15 random = 15 }
					}
					if = {
						limit = {
							NOT = {
								trait = misguided_warrior
								trait = tough_soldier
								trait = skilled_tactician
								trait = brilliant_strategist
							}
						}
						character_event = { id = MNM.4442 days = 15 random = 15 }
					}
				}
			}
		}
	}

	option = { #discuss the holy scripture
		name = EVTOPTB_MNM_4437
		random = {
			chance = 75
			add_character_modifier = {
				modifier = discussed_scripture
				years = 5
			}
		}
		custom_tooltip = {
			text = monastic_may_become_friends
			hidden_tooltip = {
				event_target:monastic_friend = {
					if = {
						limit = {
							OR = {
								trait = detached_priest
								trait = martial_cleric
								trait = scholarly_theologian
								trait = mastermind_theologian
							}
						}
						character_event = { id = MNM.4438 days = 15 random = 15 }
					}
					if = {
						limit = {
							NOT = {
								trait = detached_priest
								trait = martial_cleric
								trait = scholarly_theologian
								trait = mastermind_theologian
							}
						}
						character_event = { id = MNM.4442 days = 15 random = 15 }
					}
				}
			}
		}
	}

	option = { #discuss the intricacies of managing a realm
		name = EVTOPTC_MNM_4437
		random = {
			chance = 75
			add_character_modifier = {
				modifier = discussed_realm_management
				years = 5
			}
		}
		custom_tooltip = {
			text = monastic_may_become_friends
			hidden_tooltip = {
				event_target:monastic_friend = {
					if = {
						limit = {
							OR = {
								trait = indulgent_wastrel
								trait = thrifty_clerk
								trait = fortune_builder
								trait = midas_touched
							}
						}
						character_event = { id = MNM.4438 days = 15 random = 15 }
					}
					if = {
						limit = {
							NOT = {
								trait = indulgent_wastrel
								trait = thrifty_clerk
								trait = fortune_builder
								trait = midas_touched
							}
						}
						character_event = { id = MNM.4442 days = 15 random = 15 }
					}
				}
			}
		}
	}

	option = { #take a stroll while engaging in small talk
		name = EVTOPTD_MNM_4437
		random = {
			chance = 75
			add_character_modifier = {
				modifier = took_stroll_small_talk
				years = 5
			}
		}
		custom_tooltip = {
			text = monastic_may_become_friends
			hidden_tooltip = {
				event_target:monastic_friend = {
					if = {
						limit = {
							OR = {
								trait = naive_appeaser
								trait = underhanded_rogue
								trait = charismatic_negotiator
								trait = grey_eminence
							}
						}
						character_event = { id = MNM.4438 days = 15 random = 15 }
					}
					if = {
						limit = {
							NOT = {
								trait = naive_appeaser
								trait = underhanded_rogue
								trait = charismatic_negotiator
								trait = grey_eminence
							}
						}
						character_event = { id = MNM.4442 days = 15 random = 15 }
					}
				}
			}
		}
	}
}

#Ping event for friendship established
character_event = {
	id = MNM.4438
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		event_target:monastic_befriender = {
			if = {
				limit = {
					NOT = {
						is_rival = FROM
					}
				}
				character_event = { id = MNM.4439 }
			}
		}
	}
}

#Friendship Established! Pursue it further, or focus on monastic duties?
character_event = {
	id = MNM.4439
	picture = GFX_evt_monastery_monks
	desc = {
		text = EVTDESC_MNM_4439
		picture = GFX_evt_monastery_monks
		trigger = {	is_female = no }
	}
	desc = {
		text = EVTDESC_MNM_4439
		picture = GFX_evt_monastery_nuns
		trigger = {	is_female = yes }
	}
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
		is_monastic_member_trigger = yes
	}


	immediate = {
		remove_opinion = {
			who = FROM
			modifier = opinion_budding_friendship
		}
		FROM = {
			remove_opinion = {
				who = ROOT
				modifier = opinion_budding_friendship
			}
		}
		add_friend = FROM
	}

	option = { #Focus on monastic duties
		name = EVTOPTA_MNM_4439
		ai_chance = {
			factor = 1
		}
		tooltip = {
			add_friend = FROM
		}
		piety = 25
		add_character_modifier = {
			modifier = focused_on_monastic_studies
			years = 10
		}
	}

	option = { #Pursue the friendship further
		name = EVTOPTB_MNM_4439
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				OR = {
					trait = depressed
					trait = stressed
				}
			}
			modifier = {
				factor = 0
				NOR = {
					trait = depressed
					trait = stressed
				}
			}
		}
		tooltip = {
			add_friend = FROM
		}
		custom_tooltip = {
			text = monastic_may_lead_to_more
			hidden_tooltip = {
				random_list = {
					10 = {
						modifier = {
							factor = 0
							OR = {
								trait = chaste
								trait = celibate
							}
						}
						event_target:monastic_friend = {
							character_event = { id = MNM.4440 days = 30 random = 30 }
						}
					}
					10 = {
						modifier = {
							factor = 0
							trait = lustful
						}
					}
				}
			}
		}
		if = {
			limit = {
				OR = {
					trait = depressed
					trait = stressed
					NOT = { trait = gregarious }
				}
			}
			random_list = {
				10 = {
					modifier = {
						factor = 0
						NOT = { trait = depressed }
					}
					remove_trait = depressed
				}
				10 = {
					modifier = {
						factor = 0
						NOT = { trait = stressed }
					}
					remove_trait = stressed
				}
				10 = {
					modifier = {
						factor = 0
						trait = gregarious
					}
					modifier = {
						factor = 0
						trait = shy
					}
					add_trait = gregarious
					character_event = { id = 38265 }
				}
				10 = {
					modifier = {
						factor = 0
						trait = gregarious
					}
					modifier = {
						factor = 0
						NOT = { trait = shy }
					}
					remove_trait = shy
					character_event = { id = 38295 }
				}
				10 = {}
			}
		}
	}
}

#Ping event for 'tension'
character_event = {
	id = MNM.4440
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		event_target:monastic_befriender = {
			character_event = { id = MNM.4441 }
		}
	}
}

#Long lonely time without your spouse
character_event = {
	id = MNM.4441
	picture = GFX_evt_monastery_monks
	desc = {
		text = EVTDESC_MNM_4441
		picture = GFX_evt_monastery_monks
		trigger = {	is_female = no }
	}
	desc = {
		text = EVTDESC_MNM_4441
		picture = GFX_evt_monastery_nuns
		trigger = {	is_female = yes }
	}
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
		is_monastic_member_trigger = yes
	}

	option = { #Suppress the urge
		name = EVTOPTA_MNM_4441
		random_list = {
			10 = {
				modifier = {
					factor = 0
					trait = stressed
				}
				add_trait = stressed
				character_event = { id = 38282 }
			}
			10 = {
				modifier = {
					factor = 0
					OR = {
						trait = lustful
						trait = chaste
					}
				}
				add_trait = chaste
				character_event = { id = 38274 }
			}
			10 = {
				modifier = {
					factor = 0
					NOT = { trait = lustful }
				}
				remove_trait = lustful
			}
		}
	}

	option = { #Do it
		name = EVTOPTB_MNM_4441
		add_trait = homosexual
		event_target:monastic_friend = {
			add_trait = homosexual
			set_character_flag = monastic_friend_lover_@ROOT
		}
		add_lover = FROM
		hidden_effect = {
			remove_friend = FROM
		}
	}
}

#Ping event for friendship not established
character_event = {
	id = MNM.4442
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		event_target:monastic_befriender = {
			character_event = { id = MNM.4443 }
		}
	}
}

#Friendship not established notification
character_event = {
	id = MNM.4443
	picture = GFX_evt_monastery_monks
	desc = {
		text = EVTDESC_MNM_4443
		picture = GFX_evt_monastery_monks
		trigger = {	is_female = no }
	}
	desc = {
		text = EVTDESC_MNM_4443
		picture = GFX_evt_monastery_nuns
		trigger = {	is_female = yes }
	}
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
		is_monastic_member_trigger = yes
	}

	immediate = {
		remove_opinion = {
			who = FROM
			modifier = opinion_budding_friendship
		}
		FROM = {
			remove_opinion = {
				who = ROOT
				modifier = opinion_budding_friendship
			}
		}
	}

	option = {
		name = EVTOPTA_MNM_4443
	}
}

#######################################################
############ 4210 - Someone falls asleep ##############
#######################################################

character_event = { #Hidden start
    id = MNM.4210
    hide_window = yes

    is_triggered_only = yes
    only_capable = yes
    is_in_society = yes

    trigger = {
    	is_monastic_member_trigger = yes

    	NOT = { has_character_modifier = fell_asleep_in_church_cooldown_timer }

    	society = {
		    any_society_member = {
	            ai = yes
	            is_incapable = no
	            prisoner = no
	            in_command = no
	            is_inaccessible_trigger = no
	            has_vice_trigger = yes
	            NOT = { character = ROOT }
	            is_within_diplo_range = ROOT
	        }
	    }
    }

    immediate = {
        # First look for someone at court
        society = {
            random_society_member = {
                limit = {
                    ai = yes
                    is_incapable = no
                    prisoner = no
                    in_command = no
                    is_inaccessible_trigger = no
					has_vice_trigger = yes
                    NOT = { character = ROOT }
                    host = { character = ROOT }
                }
                character_event = { id = MNM.4211 }
                break = yes
            }

            # Then look for someone in the same realm
            random_society_member = {
                limit = {
                    ai = yes
                    is_incapable = no
                    prisoner = no
                    in_command = no
                    is_inaccessible_trigger = no
                    has_vice_trigger = yes
                    NOT = { character = ROOT }
                    same_realm = ROOT
                }
                character_event = { id = MNM.4211 }
                break = yes
            }

            # Then look abroad...
            random_society_member = {
                limit = {
                    ai = yes
                    is_incapable = no
                    prisoner = no
                    in_command = no
                    is_inaccessible_trigger = no
                    has_vice_trigger = yes
                    NOT = { character = ROOT }
                    is_within_diplo_range = ROOT
                }
                character_event = { id = MNM.4211 }
                break = yes
            }
        }
	    add_character_modifier = {
			name = fell_asleep_in_church_cooldown_timer
			hidden = yes
			days = 1825
		}
    }
}


#Ping event for other member (the sleeper)
character_event = {
    id = MNM.4211
    hide_window = yes
    is_triggered_only = yes
    immediate = { FROM = { character_event = { id = MNM.4212 } } }
}

#Fellow member is snoring in temple
character_event = {
    id = MNM.4212
    desc = EVTDESC_MNM_4212
    picture = GFX_evt_gathering_of_minds
    border = GFX_event_normal_frame_religion
    is_triggered_only = yes

    option = { #Wake them up
        name = EVTOPTA_MNM_4212
        set_character_flag = 4212_woke_them_up_flag
    }
    option = { #Let them sleep
        name = EVTOPTB_MNM_4212
        set_character_flag = 4212_let_them_sleep_flag
    }
    option = { # Prank
    	name = EVTOPTC_MNM_4212
    	set_character_flag = 4212_pranked_them_flag

		tooltip_info = lunatic
		trigger = { trait = lunatic }
    }

    after = {
    	FROM = { character_event = { id = MNM.4213 days = 1 } }
    }
}

#Ping event for other member (the sleeper)
character_event = {
    id = MNM.4213
    hide_window = yes
    is_triggered_only = yes
    immediate = {
    	FROM = {
	    	trigger_switch = { # which event to send
	            on_trigger = has_character_flag
	            4212_woke_them_up_flag = {
	                character_event = { id = MNM.4214 }
	                clr_character_flag = 4212_woke_them_up_flag
	            }
	            4212_let_them_sleep_flag = {
	                character_event = { id = MNM.4215 }
	                clr_character_flag = 4212_let_them_sleep_flag
	            }
	            4212_pranked_them_flag = {
			    	character_event = { id = MNM.4216 }
	                clr_character_flag = 4212_pranked_them_flag
	            }
	        }
        }
    }
}

# Woke them up
character_event = {
    id = MNM.4214
    desc = EVTDESC_MNM_4214
    picture = GFX_evt_gathering_of_minds
    border = GFX_event_normal_frame_religion
    is_triggered_only = yes

    option = { # Think nothing of it, friend
        name = EVTOPTA_MNM_4214

    	reverse_opinion = {
            who = FROM
            modifier = opinion_grateful
            years = 10
        }
    }

    option = { # Insinuate that they owe you
        name = EVTOPTB_MNM_4214
        if = {
			limit = {
				has_dlc = "Conclave"
			}
			add_favor = FROM
		}
		trigger = {
			has_dlc = "Conclave"
		}
    }
}

# I let them sleep
character_event = {
    id = MNM.4215
    desc = EVTDESC_MNM_4215
    picture = GFX_evt_gathering_of_minds
    border = GFX_event_normal_frame_religion
    is_triggered_only = yes

    option = { # They are embarrassed
    	name = EVTOPTA_MNM_4215

    	FROM = {
	    	add_character_modifier = {
	        	name = embarrassed_believer
	        	years = 5
			}
    	}
    }
}

#I pranked them
character_event = {
    id = MNM.4216
    desc = EVTDESC_MNM_4216
    picture = GFX_evt_gathering_of_minds
    border = GFX_event_normal_frame_religion
    is_triggered_only = yes

    option = { # Amazing
    	name = EVTOPTA_MNM_4216

    	reverse_opinion = {
            who = FROM
            modifier = opinion_insulted
            years = 10
        }
    }
}

character_event = { # Gain Groomed
	id = MNM.4900
	desc = EVTDESC_MNM_4900
	picture = GFX_evt_secluded_in_prayer

	is_triggered_only = yes

	option = {
		name = TBGREAT
		add_trait = groomed
	}
}

character_event = { # Lose Uncouth
	id = MNM.4901
	desc = EVTDESC_MNM_4901
	picture = GFX_evt_secluded_in_prayer

	is_triggered_only = yes

	option = {
		name = TBGREAT
		remove_trait = uncouth
	}
}

character_event = { # Gain Shrewd
	id = MNM.4902
	desc = EVTDESC_MNM_4902
	picture = GFX_evt_secluded_in_prayer

	is_triggered_only = yes

	option = {
		name = TBGREAT
		add_trait = shrewd
	}
}

character_event = { # Lose Dull
	id = MNM.4903
	desc = EVTDESC_MNM_4903
	picture = GFX_evt_secluded_in_prayer

	is_triggered_only = yes

	option = {
		name = TBGREAT
		remove_trait = dull
	}
}
