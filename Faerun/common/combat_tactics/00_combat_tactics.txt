### At the moment we have a pretty basic icon system for combat tactics showing
### the uniticon which has the biggest bonus value in the tactic.
### This is the sprite number for each unit:
### 1=LI 2=HI 3=PIKE 4=LC 5=KNIGHTS 6=ARCHERS 7=HORSE ARCH.

# Must be first in file. This tactic will be set if anything goes wrong
no_tactic = {
	days = 1 # tactic lasts one day
	sprite = 1 # index of icon

	trigger = {
		always = no # never use unless set explicitly by code
	}
}

generic_skirmish_tactic = {
	days = 6
	sprite = 4
	group = skirmish

	trigger = {
		phase = skirmish
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 0.80
			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 2 } } }
		}

		mult_modifier = {
			factor = 0.80
			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 4 } } }
		}

		mult_modifier = {
			factor = 0.80
			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 6 } } }
		}

		mult_modifier = {
			factor = 0.80
			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 8 } } }
		}
	}
}

harass_tactic = {	# exclusive for light cavalry
	days = 6
	sprite = 4
	group = harass

	trigger = {
		phase = skirmish

		OR = {
			light_cavalry = 0.01
			camel_cavalry = 0.01
			beast_troops = 0.01
		}

		OR = {
			NOT = {
				OR = {
					light_cavalry = 0.45
					camel_cavalry = 0.45
					beast_troops = 0.45
				}
			}
			AND = {
				flank_has_leader = yes
				leader = { martial >= 12 }
				NOT = {
					OR = {
						light_cavalry = 0.75
						camel_cavalry = 0.75
						beast_troops = 0.75
					}
				}
			}
		}
		#high level fighter exclusion
		leader = {
			NOR = {
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.7
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.7
				}
				light_troops = {
					who = beast_troops
					value >= 0.7
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.6
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.6
				}
				light_troops = {
					who = beast_troops
					value >= 0.6
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.5
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.5
				}
				light_troops = {
					who = beast_troops
					value >= 0.5
				}
			}
		}
	}

	light_cavalry_offensive = 2
	camel_cavalry_offensive = 2
	beast_troops_offensive = 2
	horse_archers_offensive = -1.5
	archers_offensive = -0.5
	mages_troops_offensive = -0.5
	gunpowder_troops_offensive = -0.5
	giant_troops_offensive = -0.25
	light_cavalry_defensive = -0.25
	camel_cavalry_defensive = -0.25
	beast_troops_defensive = -0.25

	enemy = {
		group = swarm
		factor = 1
	}
}

improved_harass_tactic = {	# fighter class light cavalry tactic
	days = 6
	sprite = 4
	group = harass

	trigger = {
		phase = skirmish
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_fighter
				trait = journeyman_fighter
				trait =	expert_fighter
				trait =	master_fighter
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}

		OR = {
			light_cavalry = 0.01
			camel_cavalry = 0.01
			beast_troops = 0.01
		}

		OR = {
			NOT = {
				OR = {
					light_cavalry = 0.45
					camel_cavalry = 0.45
					beast_troops = 0.45
				}
			}
			AND = {
				flank_has_leader = yes
				leader = { martial >= 12 }
				NOT = {
					OR = {
						light_cavalry = 0.75
						camel_cavalry = 0.75
						beast_troops = 0.75
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.7
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.7
				}
				light_troops = {
					who = beast_troops
					value >= 0.7
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.6
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.6
				}
				light_troops = {
					who = beast_troops
					value >= 0.6
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.5
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.5
				}
				light_troops = {
					who = beast_troops
					value >= 0.5
				}
			}
		}

		mult_modifier = {
			factor = 0.5

			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_fighter
					trait = journeyman_fighter
				}
			}
		}
	}

	light_cavalry_offensive = 3
	camel_cavalry_offensive = 3
	beast_troops_offensive = 3
	horse_archers_offensive = -0.75
	archers_offensive = -0.25
	mages_troops_offensive = -0.25
	gunpowder_troops_offensive = -0.25
	giant_troops_offensive = -0.12
	light_cavalry_defensive = -0.12
	camel_cavalry_defensive = -0.12
	beast_troops_defensive = -0.12

	enemy = {
		group = swarm
		factor = 1
	}
}

disorganised_harass_tactic = {
	days = 6
	sprite = 4
	group = harass

	trigger = {
		phase = skirmish

		OR = {
			light_cavalry = 0.4
			camel_cavalry = 0.4
			beast_troops = 0.4
		}

		OR = {
			flank_has_leader = no
			leader = { martial < 12 }

			OR = {
				light_cavalry = 0.75
				camel_cavalry = 0.75
				beast_troops = 0.75
			}
		}

	}

	mean_time_to_happen = {
		days = 2

		mult_modifier = {
			factor = 1.5

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.5
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.5
				}
				light_troops = {
					who = beast_troops
					value >= 0.5
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.7
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.7
				}
				light_troops = {
					who = beast_troops
					value >= 0.7
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.9
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.9
				}
				light_troops = {
					who = beast_troops
					value >= 0.9
				}
			}
		}

		mult_modifier = {
			factor = 0.80
			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 2 } } }
		}

		mult_modifier = {
			factor = 0.80
			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 4 } } }
		}

		mult_modifier = {
			factor = 0.80
			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 6 } } }
		}

		mult_modifier = {
			factor = 0.80
			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 8 } } }
		}
	}

	light_cavalry_offensive = 0.5
	camel_cavalry_offensive = 0.5
	beast_troops_offensive = 0.5
	horse_archers_offensive = -1.5
	archers_offensive = -1.0
	mages_troops_offensive = -1.0
	gunpowder_troops_offensive = -1.0
	giant_troops_offensive = -0.5
	light_cavalry_defensive = -0.5
	camel_cavalry_defensive = -0.5
	beast_troops_defensive = -0.5

	enemy = {
		group = swarm
		factor = 0.5
	}
}

volly_harass_tactic = {	# cooperative between light cavalry and archers
	days = 6
	sprite = 4
	group = harass

	trigger = {
		phase = skirmish
		archers = 0.01 # reverted to naked check to allow combinations of archers and mages to satisfy

		OR = {
			light_cavalry = 0.01
			camel_cavalry = 0.01
			beast_troops = 0.01
		}

		#high level fighter exclusion
		leader = {
			NOR = {
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 4

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.6
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.6
				}
				light_troops = {
					who = beast_troops
					value >= 0.6
				}
			}
			OR = {
				light_troops = {
					who = archers
					value >= 0.3
				}
				light_troops = {
					who = mages_troops
					value >= 0.3
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.5
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.5
				}
				light_troops = {
					who = beast_troops
					value >= 0.5
				}
			}
			OR = {
				light_troops = {
					who = archers
					value >= 0.3
				}
				light_troops = {
					who = mages_troops
					value >= 0.3
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.4
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.4
				}
				light_troops = {
					who = beast_troops
					value >= 0.4
				}
			}
			OR = {
				light_troops = {
					who = archers
					value >= 0.2
				}
				light_troops = {
					who = mages_troops
					value >= 0.2
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.2
				}
			}
		}
	}

	light_cavalry_offensive = 1.2
	camel_cavalry_offensive = 1.2
	beast_troops_offensive = 1.2
	archers_offensive = 0.6
	mages_troops_offensive = 0.6
	gunpowder_troops_offensive = 0.6
	giant_troops_offensive = 0.3
	light_infantry_offensive = 1.2
	mob_troops_offensive = 1.2
	undead_troops_offensive = 1.2
	illusory_troops_offensive = 1.2
	horse_archers_offensive = -1.8

	enemy = {
		group = swarm
		factor = 1
	}
}

improved_volley_harass_tactic = {	# fighter class cooperative between light cavalry and archers
	days = 6
	sprite = 4
	group = harass

	trigger = {
		phase = skirmish
		archers = 0.01 # reverted to naked check to allow combinations of archers and mages to satisfy
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_fighter
				trait = journeyman_fighter
				trait =	expert_fighter
				trait =	master_fighter
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}

		OR = {
			light_cavalry = 0.01
			camel_cavalry = 0.01
			beast_troops = 0.01
		}
	}

	mean_time_to_happen = {
		days = 4

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.6
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.6
				}
				light_troops = {
					who = beast_troops
					value >= 0.6
				}
			}
			OR = {
				light_troops = {
					who = archers
					value >= 0.3
				}
				light_troops = {
					who = mages_troops
					value >= 0.3
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.5
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.5
				}
				light_troops = {
					who = beast_troops
					value >= 0.5
				}
			}
			OR = {
				light_troops = {
					who = archers
					value >= 0.3
				}
				light_troops = {
					who = mages_troops
					value >= 0.3
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.4
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.4
				}
				light_troops = {
					who = beast_troops
					value >= 0.4
				}
			}
			OR = {
				light_troops = {
					who = archers
					value >= 0.2
				}
				light_troops = {
					who = mages_troops
					value >= 0.2
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.2
				}
			}
		}

		mult_modifier = {
			factor = 0.5

			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_fighter
					trait = journeyman_fighter
				}
			}
		}
	}

	light_cavalry_offensive = 1.8
	camel_cavalry_offensive = 1.8
	beast_troops_offensive = 1.8
	archers_offensive = 0.9
	mages_troops_offensive = 0.9
	gunpowder_troops_offensive = 0.9
	giant_troops_offensive = 0.45
	light_infantry_offensive = 1.8
	mob_troops_offensive = 1.8
	undead_troops_offensive = 1.8
	illusory_troops_offensive = 1.8
	horse_archers_offensive = -0.9

	enemy = {
		group = swarm
		factor = 1
	}
}

volley_tactic = {	# exclusive for archers
	days = 6
	sprite = 6
	group = volley

	trigger = {
		phase = skirmish
		archers = 0.01 # reverted to naked check

		NOR = {
			AND = { # to force longbow volley instead
				archers = 0.01 # only if you have actual archers
				flank_has_leader = yes
				leader = {
					OR = {
						culture = green_elf
						culture = moon_elf
						culture = sun_elf
						culture = wood_elf
						culture = eladrin
						culture = dalesman
					}
				}
			}
			AND = { # to force gray wall instead
				archers = 0.4 # reverted to naked check
				war_elephants = 0.025
			}
		}

		#high level fighter exclusion
		leader = {
			NOR = {
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				light_troops = {
					who = archers
					value >= 0.7
				}
				light_troops = {
					who = mages_troops
					value >= 0.7
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.7
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = archers
					value >= 0.6
				}
				light_troops = {
					who = mages_troops
					value >= 0.6
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.6
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				light_troops = {
					who = archers
					value >= 0.5
				}
				light_troops = {
					who = mages_troops
					value >= 0.5
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.5
				}
			}
		}
	}

	light_cavalry_offensive = -1.5
	camel_cavalry_offensive = -1.5
	beast_troops_offensive = -1.5
	horse_archers_offensive = -0.5
	archers_offensive = 2.0
	mages_troops_offensive = 2.0
	gunpowder_troops_offensive = 2.0
	giant_troops_offensive = 1.0

	enemy = {
		group = harass
		factor = 1
	}
}

improved_volley_tactic = {	# fighter class archer tactic
	days = 6
	sprite = 6
	group = volley

	trigger = {
		phase = skirmish
		archers = 0.01 # reverted to naked check
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_fighter
				trait = journeyman_fighter
				trait =	expert_fighter
				trait =	master_fighter
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
		NOR = {
			AND = { # to force longbow volley instead
				troops = { # only if you have actual archers
					who = archers
					value = 0.01
				}
				flank_has_leader = yes
				leader = {
					OR = {
						culture = green_elf
						culture = moon_elf
						culture = sun_elf
						culture = wood_elf
						culture = eladrin
						culture = dalesman
					}
				}
			}
			AND = { # to force gray wall instead
				archers = 0.4 # reverted to naked check
				troops = {
					who = war_elephants
					value = 0.025
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				light_troops = {
					who = archers
					value >= 0.7
				}
				light_troops = {
					who = mages_troops
					value >= 0.7
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.7
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = archers
					value >= 0.6
				}
				light_troops = {
					who = mages_troops
					value >= 0.6
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.6
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				light_troops = {
					who = archers
					value >= 0.5
				}
				light_troops = {
					who = mages_troops
					value >= 0.5
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.5
				}
			}
		}

		mult_modifier = {
			factor = 0.5
			flank_has_leader = yes

			leader = {
				OR = {
					trait = trained_fighter
					trait = journeyman_fighter
				}
			}
		}
	}

	light_cavalry_offensive = -0.75
	camel_cavalry_offensive = -0.75
	beast_troops_offensive = -0.75
	horse_archers_offensive = -0.25
	archers_offensive = 3.0
	mages_troops_offensive = 3.0
	gunpowder_troops_offensive = 3.0
	giant_troops_offensive = 1.5

	enemy = {
		group = harass
		factor = 1
	}
}

swarm_volley_tactic = {	# cooperative between archers and horse archers
	days = 6
	sprite = 6
	group = volley

	trigger = {
		phase = skirmish
		archers = 0.01 # reverted to naked check
		horse_archers = 0.01
		OR = {
			location = {
				num_of_settlements > 0
				NOR = {
					terrain = forest
					terrain = woods
					terrain = mountain
					terrain = impassable_mountains
					terrain = jungle
					terrain = marsh
				}
			}
			leader = {
				location = {
					NOR = {
						terrain = forest
						terrain = woods
						terrain = mountain
						terrain = impassable_mountains
						terrain = jungle
						terrain = marsh
					}
				}
			}
			enemy = {
				leader = {
					location = {
						NOR = {
							terrain = forest
							terrain = woods
							terrain = mountain
							terrain = impassable_mountains
							terrain = jungle
							terrain = marsh
						}
					}
				}
			}
		}

		#high level fighter exclusion
		leader = {
			NOR = {
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 4

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				light_troops = {
					who = archers
					value >= 0.6
				}
				light_troops = {
					who = mages_troops
					value >= 0.6
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.6
				}
				light_troops = {
					who = horse_archers
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = archers
					value >= 0.5
				}
				light_troops = {
					who = mages_troops
					value >= 0.5
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.5
				}
				light_troops = {
					who = horse_archers
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				light_troops = {
					who = archers
					value >= 0.4
				}
				light_troops = {
					who = mages_troops
					value >= 0.4
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.4
				}
				light_troops = {
					who = horse_archers
					value >= 0.2
				}
			}
		}
	}

	light_cavalry_offensive = -1.8
	camel_cavalry_offensive = -1.8
	beast_troops_offensive = -1.8
	horse_archers_offensive =  0.6
	archers_offensive = 1.2
	mages_troops_offensive = 1.2
	gunpowder_troops_offensive = 1.2
	giant_troops_offensive = 0.6

	enemy = {
		group = harass
		factor = 1
	}
}

improved_swarm_volley_tactic = {	# fighter class cooperative between archers and horse archers
	days = 6
	sprite = 6
	group = volley

	trigger = {
		phase = skirmish
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_fighter
				trait = journeyman_fighter
				trait =	expert_fighter
				trait =	master_fighter
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
		archers = 0.01 # reverted to naked check
		horse_archers = 0.01
		OR = {
			location = {
				num_of_settlements > 0
				NOR = {
					terrain = forest
					terrain = woods
					terrain = mountain
					terrain = impassable_mountains
					terrain = jungle
					terrain = marsh
				}
			}
			leader = {
				location = {
					NOR = {
						terrain = forest
						terrain = woods
						terrain = mountain
						terrain = impassable_mountains
						terrain = jungle
						terrain = marsh
					}
				}
			}
			enemy = {
				leader = {
					location = {
						NOR = {
							terrain = forest
							terrain = woods
							terrain = mountain
							terrain = impassable_mountains
							terrain = jungle
							terrain = marsh
						}
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 4

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				light_troops = {
					who = archers
					value >= 0.6
				}
				light_troops = {
					who = mages_troops
					value >= 0.6
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.6
				}
			}
			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = archers
					value >= 0.5
				}
				light_troops = {
					who = mages_troops
					value >= 0.5
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.5
				}
			}
			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				light_troops = {
					who = archers
					value >= 0.4
				}
				light_troops = {
					who = mages_troops
					value >= 0.4
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.4
				}
			}
			light_troops = {
				who = horse_archers
				value >= 0.2
			}
		}

		mult_modifier = {
			factor = 0.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_fighter
					trait = journeyman_fighter
				}
			}
		}
	}

	light_cavalry_offensive = -0.9
	camel_cavalry_offensive = -0.9
	beast_troops_offensive = -0.9
	horse_archers_offensive =  0.9
	archers_offensive = 1.8
	mages_troops_offensive = 1.8
	gunpowder_troops_offensive = 1.8
	giant_troops_offensive = 0.9

	enemy = {
		group = harass
		factor = 1
	}
}

swarm_tactic = {	# exclusive for horse archers
	days = 6
	sprite = 7
	group = swarm

	trigger = {
		phase = skirmish
		horse_archers = 0.01
		OR = {
			NOT = {
				troops = {
					who = horse_archers
					value = 0.35
				}
			}
			AND = {
				flank_has_leader = yes
				leader = { martial >= 12 }
				NOT = {
					troops = {
						who = horse_archers
						value = 0.65
					}
				}
			}
		}
		OR = {
			location = {
				num_of_settlements > 0
				NOR = {
					terrain = forest
					terrain = woods
					terrain = mountain
					terrain = impassable_mountains
					terrain = jungle
					terrain = marsh
				}
			}
			leader = {
				location = {
					NOR = {
						terrain = forest
						terrain = woods
						terrain = mountain
						terrain = impassable_mountains
						terrain = jungle
						terrain = marsh
					}
				}
			}
			enemy = {
				leader = {
					location = {
						NOR = {
							terrain = forest
							terrain = woods
							terrain = mountain
							terrain = impassable_mountains
							terrain = jungle
							terrain = marsh
						}
					}
				}
			}
		}

		#high level fighter exclusion
		leader = {
			NOR = {
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			light_troops = {
				who = horse_archers
				value >= 0.7
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = horse_archers
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			light_troops = {
				who = horse_archers
				value >= 0.5
			}
		}
	}

	light_cavalry_offensive = -0.5
	camel_cavalry_offensive = -0.5
	beast_troops_offensive = -0.5
	horse_archers_offensive = 2.0
	horse_archers_defensive = -0.25
	archers_offensive = -1.5
	mages_troops_offensive = -1.5
	gunpowder_troops_offensive = -1.5
	giant_troops_offensive = -0.75

	enemy = {
		group = volley
		factor = 1
	}
}

improved_swarm_tactic = {	# fighter class horse archer tactic
	days = 6
	sprite = 7
	group = swarm

	trigger = {
		phase = skirmish
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_fighter
				trait = journeyman_fighter
				trait =	expert_fighter
				trait =	master_fighter
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
		horse_archers = 0.01
		OR = {
			NOT = {
				horse_archers = 0.35
			}
			AND = {
				flank_has_leader = yes
				leader = { martial >= 12 }
				NOT = {
					horse_archers = 0.65
				}
			}
		}
		OR = {
			location = {
				num_of_settlements > 0
				NOR = {
					terrain = forest
					terrain = woods
					terrain = mountain
					terrain = impassable_mountains
					terrain = jungle
					terrain = marsh
				}
			}
			leader = {
				location = {
					NOR = {
						terrain = forest
						terrain = woods
						terrain = mountain
						terrain = impassable_mountains
						terrain = jungle
						terrain = marsh
					}
				}
			}
			enemy = {
				leader = {
					location = {
						NOR = {
							terrain = forest
							terrain = woods
							terrain = mountain
							terrain = impassable_mountains
							terrain = jungle
							terrain = marsh
						}
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			light_troops = {
				who = horse_archers
				value = 0.7
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = horse_archers
				value = 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			light_troops = {
				who = horse_archers
				value = 0.5
			}
		}

		mult_modifier = {
			factor = 0.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_fighter
					trait = journeyman_fighter
				}
			}
		}
	}

	light_cavalry_offensive = -0.25
	camel_cavalry_offensive = -0.25
	beast_troops_offensive = -0.25
	horse_archers_offensive = 3.0
	horse_archers_defensive = -0.12
	archers_offensive = -0.75
	mages_troops_offensive = -0.75
	gunpowder_troops_offensive = -0.75
	giant_troops_offensive = -0.37

	enemy = {
		group = volley
		factor = 1
	}
}

disorganised_swarm_tactic = {
	days = 6
	sprite = 7
	group = swarm

	trigger = {
		phase = skirmish
		horse_archers = 0.30

		OR = {
			flank_has_leader = no
			leader = { martial < 12 }
			horse_archers = 0.65
		}

		OR = {
			location = {
				num_of_settlements > 0
				NOR = {
					terrain = forest
					terrain = woods
					terrain = mountain
					terrain = impassable_mountains
					terrain = jungle
					terrain = marsh
				}
			}
			leader = {
				location = {
					NOR = {
						terrain = forest
						terrain = woods
						terrain = mountain
						terrain = impassable_mountains
						terrain = jungle
						terrain = marsh
					}
				}
			}
			enemy = {
				leader = {
					location = {
						NOR = {
							terrain = forest
							terrain = woods
							terrain = mountain
							terrain = impassable_mountains
							terrain = jungle
							terrain = marsh
						}
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 2

		mult_modifier = {
			factor = 1.5

			light_troops = {
				who = horse_archers
				value >= 0.5
			}
		}

		mult_modifier = {
			factor = 1.5

			light_troops = {
				who = horse_archers
				value >= 0.7
			}
		}

		mult_modifier = {
			factor = 1.5

			light_troops = {
				who = horse_archers
				value >= 0.9
			}
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 2 } } }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 4 } } }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 6 } } }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 8 } } }
		}
	}

	light_cavalry_offensive = -1.0
	camel_cavalry_offensive = -1.0
	beast_troops_offensive = -1.0
	horse_archers_offensive = 0.5
	horse_archers_defensive = -0.5
	archers_offensive = -1.5
	mages_troops_offensive = -1.5
	gunpowder_troops_offensive = -1.5
	giant_troops_offensive = -0.75

	enemy = {
		group = volley
		factor = 0.5
	}
}

harras_swarm_tactic = {	# cooperative between horse archers and light cavalry
	days = 6
	sprite = 7
	group = swarm

	trigger = {
		phase = skirmish
		horse_archers = 0.01

		OR = {
			troops = {
				who = light_cavalry
				value = 0.01
			}
			troops = {
				who = camel_cavalry
				value = 0.01
			}
			troops = {
				who = beast_troops
				value = 0.01
			}
		}

		OR = {
			location = {
				num_of_settlements > 0
				NOR = {
					terrain = forest
					terrain = woods
					terrain = mountain
					terrain = impassable_mountains
					terrain = jungle
					terrain = marsh
				}
			}
			leader = {
				location = {
					NOR = {
						terrain = forest
						terrain = woods
						terrain = mountain
						terrain = impassable_mountains
						terrain = jungle
						terrain = marsh
					}
				}
			}
			enemy = {
				leader = {
					location = {
						NOR = {
							terrain = forest
							terrain = woods
							terrain = mountain
							terrain = impassable_mountains
							terrain = jungle
							terrain = marsh
						}
					}
				}
			}
		}

		#high level fighter exclusion
		leader = {
			NOR = {
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 4

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			light_troops = {
				who = horse_archers
				value >= 0.6
			}

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.3
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.3
				}
				light_troops = {
					who = beast_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = horse_archers
				value >= 0.5
			}

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.3
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.3
				}
				light_troops = {
					who = beast_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			light_troops = {
				who = horse_archers
				value >= 0.4
			}

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.2
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.2
				}
				light_troops = {
					who = beast_troops
					value >= 0.2
				}
			}
		}
	}

	light_cavalry_offensive = 0.6
	camel_cavalry_offensive = 0.6
	beast_troops_offensive = 0.6
	horse_archers_offensive = 1.2
	archers_offensive = -1.8
	mages_troops_offensive = -1.8
	gunpowder_troops_offensive = -1.8
	giant_troops_offensive = -0.9

	enemy = {
		group = volley
		factor = 1
	}
}

improved_harass_swarm_tactic = {	# fighter class cooperative between horse archers and light cavalry
	days = 6
	sprite = 7
	group = swarm

	trigger = {
		phase = skirmish
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_fighter
				trait = journeyman_fighter
				trait =	expert_fighter
				trait =	master_fighter
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
		horse_archers = 0.01
		OR = {
			troops = {
				who = light_cavalry
				value = 0.01
			}
			troops = {
				who = camel_cavalry
				value = 0.01
			}
			troops = {
				who = beast_troops
				value = 0.01
			}
		}

		OR = {
			location = {
				num_of_settlements > 0
				NOR = {
					terrain = forest
					terrain = woods
					terrain = mountain
					terrain = impassable_mountains
					terrain = jungle
					terrain = marsh
				}
			}
			leader = {
				location = {
					NOR = {
						terrain = forest
						terrain = woods
						terrain = mountain
						terrain = impassable_mountains
						terrain = jungle
						terrain = marsh
					}
				}
			}
			enemy = {
				leader = {
					location = {
						NOR = {
							terrain = forest
							terrain = woods
							terrain = mountain
							terrain = impassable_mountains
							terrain = jungle
							terrain = marsh
						}
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 4

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			light_troops = {
				who = horse_archers
				value >= 0.6
			}
			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.3
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.3
				}
				light_troops = {
					who = beast_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = horse_archers
				value >= 0.5
			}
			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.3
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.3
				}
				light_troops = {
					who = beast_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			light_troops = {
				who = horse_archers
				value >= 0.4
			}
			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.2
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.2
				}
				light_troops = {
					who = beast_troops
					value >= 0.2
				}
			}
		}

		mult_modifier = {
			factor = 0.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_fighter
					trait = journeyman_fighter
				}
			}
		}
	}

	light_cavalry_offensive = 0.6
	camel_cavalry_offensive = 0.6
	beast_troops_offensive = 0.6
	horse_archers_offensive = 1.2
	archers_offensive = -1.8
	mages_troops_offensive = -1.8
	gunpowder_troops_offensive = -1.8
	giant_troops_offensive = -0.9

	enemy = {
		group = volley
		factor = 1
	}
}

shieldwall_tactic = {
	days = 6
	sprite = 2 # index of icon
	group = defensive

	trigger = {
		phase = skirmish
		archers = 0.01

		OR = {
			heavy_infantry = 0.2
			pikemen = 0.2
			AND = {
				light_infantry = 0.2 # reverted to naked check to allow combinations with undead and illusions to satisfy
				OR = {
					heavy_infantry = 0.01 # reverted to naked check
					pikemen = 0.01
				}
			}
		}

		#high level fighter exclusion
		leader = {
			NOR = {
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.3
				}
				heavy_troops = {
					who = sohei
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.3
				}
				heavy_troops = {
					who = warpriests
					value >= 0.3
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.3
				}
				heavy_troops = {
					who = sohei
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.3
				}
				heavy_troops = {
					who = warpriests
					value >= 0.3
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 0.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.3
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.3
				}
				light_troops = {
					who = beast_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 0.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 0.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.3
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.3
				}
				light_troops = {
					who = beast_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 0.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}
	}

	light_infantry_defensive = 1.2
	mob_troops_defensive = 1.2
	undead_troops_defensive = 1.2
	illusory_troops_defensive = 1.2
	heavy_infantry_defensive = 3
	warpriests_defensive = 3
	elemental_troops_defensive = 3
	pikemen_defensive = 2.4
	sohei_defensive = 2.4

	archers_offensive = 0.6
	mages_troops_offensive = 0.6
	gunpowder_troops_offensive = 0.6
	giant_troops_offensive = 0.3

	light_cavalry_defensive = -0.5
	camel_cavalry_defensive = -0.5
	beast_troops_defensive = -0.5
	knights_defensive = -0.5
	large_monsters_defensive = -0.5
	horse_archers_defensive = -0.5
}

improved_shieldwall_tactic = { # fighter class tactic
	days = 6
	sprite = 2 # index of icon
	group = defensive

	trigger = {
		phase = skirmish
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_fighter
				trait = journeyman_fighter
				trait =	expert_fighter
				trait =	master_fighter
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
		OR = {
			heavy_infantry = 0.2 # reverted to naked check to allow combinations with warpriests and elementals to satisfy
			pikemen = 0.2
			AND = {
				light_infantry = 0.2 # reverted to naked check to allow combinations with undead and illusions to satisfy
				OR = {
					heavy_infantry = 0.01 # reverted to naked check
					pikemen = 0.01
				}
			}
		}
		archers = 0.01 # reverted to naked check
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.3
				}
				heavy_troops = {
					who = sohei
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.3
				}
				heavy_troops = {
					who = warpriests
					value >= 0.3
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.3
				}
				heavy_troops = {
					who = sohei
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.3
				}
				heavy_troops = {
					who = warpriests
					value >= 0.3
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 0.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.3
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.3
				}
				light_troops = {
					who = beast_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 0.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 0.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.3
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.3
				}
				light_troops = {
					who = beast_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 0.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 0.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_fighter
					trait = journeyman_fighter
				}
			}
		}
	}

	light_infantry_defensive = 1.8
	mob_troops_defensive = 1.8
	undead_troops_defensive = 1.8
	illusory_troops_defensive = 1.8
	heavy_infantry_defensive = 4.5
	warpriests_defensive = 4.5
	elemental_troops_defensive = 4.5
	pikemen_defensive = 3.6
	sohei_defensive = 3.6

	archers_offensive = 0.9
	mages_troops_offensive = 0.9
	gunpowder_troops_offensive = 0.9
	giant_troops_offensive = 0.45

	light_cavalry_defensive = -0.25
	camel_cavalry_defensive = -0.25
	beast_troops_defensive = -0.25
	knights_defensive = -0.25
	large_monsters_defensive = -0.25
	horse_archers_defensive = -0.25
}

feint_tactic = {
	days = 6
	sprite = 2 # index of icon
	group = defensive

	trigger = {
		phase = skirmish
		OR = {
			light_infantry = 0.2 # reverted to naked check
			troops = {
				who = mob_troops
				value = 0.2
			}
		}
		OR = {
			archers = 0.2 # reverted to naked check
			AND = {
				archers = 0.01 # reverted to naked check
				NOR = {
					heavy_infantry = 0.01 # reverted to naked check
					pikemen = 0.01
				}
				NOR = {
					troops = {
						who = knights
						value = 0.01
					}
					troops = {
						who = large_monsters
						value = 0.01
					}
				}
			}
		}

		#high level fighter exclusion
		leader = {
			NOR = {
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = archers
					value >= 0.3
				}
				light_troops = {
					who = mages_troops
					value >= 0.3
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				troops = {
					who = light_infantry
					value >= 0.4
				}
				troops = {
					who = undead_troops
					value >= 0.4
				}
				troops = {
					who = mob_troops
					value >= 0.4
				}
				troops = {
					who = illusory_troops
					value >= 0.4
				}
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.5
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.5
				}
				light_troops = {
					who = beast_troops
					value >= 0.5
				}
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.6
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.6
				}
				light_troops = {
					who = beast_troops
					value >= 0.6
				}
			}
		}
	}

	light_infantry_offensive = 1.0
	mob_troops_offensive = 1.0
	light_infantry_defensive = 0.5
	mob_troops_defensive = 0.5
	undead_troops_offensive = 1.0
	undead_troops_defensive = 0.5
	illusory_troops_offensive = 1.0
	illusory_troops_defensive = 0.5
	archers_offensive = 1.5
	mages_troops_offensive = 1.5
	gunpowder_troops_offensive = 1.5
	giant_troops_offensive = 0.75

	heavy_infantry_offensive = -0.5
	heavy_infantry_defensive = -0.5
	warpriests_offensive = -0.5
	warpriests_defensive = -0.5
	elemental_troops_offensive = -0.5
	elemental_troops_defensive = -0.5
	animated_objects_offensive = -0.5
	animated_objects_defensive = -0.5
	knights_offensive = -0.5
	knights_defensive = -0.5
	large_monsters_offensive = -0.5
	large_monsters_defensive = -0.5
}

improved_feint_tactic = { # fighter class tactic
	days = 6
	sprite = 2 # index of icon
	group = defensive

	trigger = {
		phase = skirmish
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_fighter
				trait = journeyman_fighter
				trait =	expert_fighter
				trait =	master_fighter
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
		OR = {
			light_infantry = 0.2 # reverted to naked check
			troops = {
				who = mob_troops
				value = 0.2
			}
		}
		OR = {
			archers = 0.2 # reverted to naked check
			AND = {
				archers = 0.01 # reverted to naked check
				NOR = {
					heavy_infantry = 0.01 # reverted to naked check
					pikemen = 0.01
				}
				NOR = {
					troops = {
						who = knights
						value = 0.01
					}
					troops = {
						who = large_monsters
						value = 0.01
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = archers
					value >= 0.3
				}
				light_troops = {
					who = mages_troops
					value >= 0.3
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				troops = {
					who = light_infantry
					value >= 0.4
				}
				troops = {
					who = undead_troops
					value >= 0.4
				}
				troops = {
					who = mob_troops
					value >= 0.4
				}
				troops = {
					who = illusory_troops
					value >= 0.4
				}
			}
		}

		mult_modifier = {
			factor = 0.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.5
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.5
				}
				light_troops = {
					who = beast_troops
					value >= 0.5
				}
			}
		}

		mult_modifier = {
			factor = 0.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.6
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.6
				}
				light_troops = {
					who = beast_troops
					value >= 0.6
				}
			}
		}

		mult_modifier = {
			factor = 0.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_fighter
					trait = journeyman_fighter
				}
			}
		}
	}

	light_infantry_offensive = 1.5
	mob_troops_offensive = 1.5
	light_infantry_defensive = 0.75
	mob_troops_defensive = 0.75
	undead_troops_offensive = 1.5
	undead_troops_defensive = 0.75
	illusory_troops_offensive = 1.5
	illusory_troops_defensive = 0.75
	archers_offensive = 2.25
	mages_troops_offensive = 2.25
	gunpowder_troops_offensive = 2.25
	giant_troops_offensive = 1.5

	heavy_infantry_offensive = -0.25
	heavy_infantry_defensive = -0.25
	warpriests_offensive = -0.25
	warpriests_defensive = -0.25
	elemental_troops_offensive = -0.25
	elemental_troops_defensive = -0.25
	animated_objects_offensive = -0.25
	animated_objects_defensive = -0.25
	knights_offensive = -0.25
	knights_defensive = -0.25
	large_monsters_offensive = -0.25
	large_monsters_defensive = -0.25
}

prepare_tactic = {
	days = 1
	sprite = 2
	group = defensive

	trigger = {
		phase = skirmish
		days >= 15
	}

	mean_time_to_happen = {
		days = 1

		mult_modifier = {
			factor = 0.1

			flank_has_leader = yes
			leader = { martial >= 8 }
		}

		mult_modifier = {
			factor = 0.1

			flank_has_leader = yes
			leader = { martial >= 12 }
		}

		mult_modifier = {
			factor = 0.1

			flank_has_leader = yes
			leader = { martial >= 16 }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 2 } } }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 4 } } }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 6 } } }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_SKIRMISH >= 8 } } }
		}
	}

	change_phase_to = melee
}

charge_on_undefended_tactic = {
	days = 2
	sprite = 5
	group = charge

	trigger = {
		phase = skirmish
		is_flanking = no
		days >= 3
	}

	mean_time_to_happen = {
		days = 1

		mult_modifier = {
			factor = 100

			enemy = {
				troops = {
					who = archers
					value >= 0.6
				}
			}
		}
	}

	change_phase_to = melee
}

charge_of_opportunity_tactic = {
	days = 6
	sprite = 5 # index of icon
	group = charge

	trigger = {
		phase = skirmish
		is_flanking = no
		days >= 10 # duration of combat >= 10 days
		#high level fighter exclusion
		leader = {
			NOR = {
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 3 # this has nothing to do with days, it just represents relative chance of selecting this tactic, higher is better
	}

	change_phase_to = melee

	knights_offensive = 3
	large_monsters_offensive = 3
	horse_archers_offensive = 3
	heavy_infantry_offensive = 1.2
	warpriests_offensive = 1.2
	elemental_troops_offensive = 1.2
	animated_objects_offensive = 1.2
	giant_troops_offensive = 0.6
}

improved_charge_of_opportunity_tactic = {
	days = 6
	sprite = 5 # index of icon
	group = charge

	trigger = {
		phase = skirmish
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_fighter
				trait = journeyman_fighter
				trait =	expert_fighter
				trait =	master_fighter
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
		is_flanking = no
		days >= 10 # duration of combat >= 10 days
	}

	mean_time_to_happen = {
		days = 3 # this has nothing to do with days, it just represents relative chance of selecting this tactic, higher is better

		mult_modifier = {
			factor = 0.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_fighter
					trait = journeyman_fighter
				}
			}
		}
	}

	change_phase_to = melee

	knights_offensive = 4.5
	large_monsters_offensive = 4.5
	horse_archers_offensive = 4.5
	heavy_infantry_offensive = 1.8
	warpriests_offensive = 1.8
	elemental_troops_offensive = 1.8
	animated_objects_offensive = 1.8
	giant_troops_offensive = 0.9
}

charge_tactic = {
	days = 6
	sprite = 5 # index of icon
	group = charge

	trigger = {
		phase = skirmish
		is_flanking = no
		days >= 10 # duration of combat >= 10 days
		#high level fighter exclusion
		leader = {
			NOR = {
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 10 # this has nothing to do with days, it just represents relative chance of selecting this tactic, higher is better

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = knights
					value >= 0.1
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.1
				}
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.1
				}
				heavy_troops = {
					who = warpriests
					value >= 0.1
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.1
				}
			}
		}
	}

	change_phase_to = melee

	knights_offensive = 3
	large_monsters_offensive = 3
	horse_archers_offensive = 3
	heavy_infantry_offensive = 1.2
	warpriests_offensive = 1.2
	elemental_troops_offensive = 1.2
	animated_objects_offensive = 1.2
	giant_troops_offensive = 0.6
}

improved_charge_tactic = {
	days = 6
	sprite = 5 # index of icon
	group = charge

	trigger = {
		phase = skirmish
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_fighter
				trait = journeyman_fighter
				trait =	expert_fighter
				trait =	master_fighter
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
		is_flanking = no
		days >= 10 # duration of combat >= 10 days
	}

	mean_time_to_happen = {
		days = 10 # this has nothing to do with days, it just represents relative chance of selecting this tactic, higher is better

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = knights
					value >= 0.1
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.1
				}
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.1
				}
				heavy_troops = {
					who = warpriests
					value >= 0.1
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.1
				}
			}
		}

		mult_modifier = {
			factor = 0.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_fighter
					trait = journeyman_fighter
				}
			}
		}
	}

	change_phase_to = melee

	knights_offensive = 4.5
	large_monsters_offensive = 4.5
	horse_archers_offensive = 4.5
	heavy_infantry_offensive = 1.8
	warpriests_offensive = 1.8
	elemental_troops_offensive = 1.8
	animated_objects_offensive = 1.8
	giant_troops_offensive = 0.9
}

wait_tactic = {
	days = 1
	sprite = 2
	group = stand_fast

	trigger = {
		phase = melee
	}

	mean_time_to_happen = {
		days = 1

		mult_modifier = {
			factor = 0.1

			flank_has_leader = yes
			leader = { martial >= 8 }
		}

		mult_modifier = {
			factor = 0.1

			flank_has_leader = yes
			leader = { martial >= 12 }
		}

		mult_modifier = {
			factor = 0.1

			flank_has_leader = yes
			leader = { martial >= 16 }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_MELEE = 2 } } }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_MELEE = 4 } } }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_MELEE = 6 } } }
		}

		mult_modifier = {
			factor = 0.80

			flank_has_leader = yes
			leader = { liege = { capital_scope = { TECH_MELEE = 8 } } }
		}
	}
}

advance_tactic = {	# exclusive for heavy infantry
	days = 6
	sprite = 2
	group = advance

	trigger = {
		phase = melee
		heavy_infantry = 0.01 # reverted to naked check
		#high level fighter exclusion
		leader = {
			NOR = {
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.7
				}
				heavy_troops = {
					who = warpriests
					value >= 0.7
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.7
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.7
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.6
				}
				heavy_troops = {
					who = warpriests
					value >= 0.6
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.6
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.6
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.5
				}
				heavy_troops = {
					who = warpriests
					value >= 0.5
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.5
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.5
				}
			}
		}
	}

	knights_offensive = -0.5
	large_monsters_offensive = -0.5
	heavy_infantry_offensive = 3
	warpriests_offensive = 3
	elemental_troops_offensive = 3
	animated_objects_offensive = 3
	giant_troops_offensive = 1.5
	pikemen_offensive = -1.5
	sohei_offensive = -1.5
	enemy = {
		group = stand_fast
		factor = 3
	}
}

improved_advance_tactic = {	# fighter class heavy infantry tactic
	days = 6
	sprite = 2
	group = advance

	trigger = {
		phase = melee
		heavy_infantry = 0.01 # reverted to naked check
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_fighter
				trait = journeyman_fighter
				trait =	expert_fighter
				trait =	master_fighter
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.7
				}
				heavy_troops = {
					who = warpriests
					value >= 0.7
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.7
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.7
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.6
				}
				heavy_troops = {
					who = warpriests
					value >= 0.6
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.6
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.6
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.5
				}
				heavy_troops = {
					who = warpriests
					value >= 0.5
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.5
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.5
				}
			}
		}
		modifier = {
			factor = 0.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_fighter
					trait = journeyman_fighter
				}
			}
		}
	}

	knights_offensive = -0.25
	large_monsters_offensive = -0.25
	heavy_infantry_offensive = 4.5
	warpriests_offensive = 4.5
	elemental_troops_offensive = 4.5
	animated_objects_offensive = 4.5
	giant_troops_offensive = 2.25
	pikemen_offensive = -0.75
	sohei_offensive = -0.75
	enemy = {
		group = stand_fast
		factor = 3
	}
}

awesome_advance_tactic = {	# cooperative between heavy infantry and heavy cavalry
	days = 6
	sprite = 2
	group = advance

	trigger = {
		phase = melee
		heavy_infantry = 0.01 # reverted to naked check
		knights = 0.01
		large_monsters = 0.01

		#high level fighter exclusion
		leader = {
			NOR = {
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 4

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.6
				}
				heavy_troops = {
					who = warpriests
					value >= 0.6
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.6
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.6
				}
				heavy_troops = {
					who = knights
					value >= 0.3
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.5
				}
				heavy_troops = {
					who = warpriests
					value >= 0.5
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.5
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.5
				}
				heavy_troops = {
					who = knights
					value >= 0.3
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.4
				}
				heavy_troops = {
					who = warpriests
					value >= 0.4
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.4
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.4
				}
				heavy_troops = {
					who = knights
					value >= 0.2
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.2
				}
			}
		}
	}

	knights_offensive = 0.6
	large_monsters_offensive = 0.6
	heavy_infantry_offensive = 2.4
	warpriests_offensive = 2.4
	elemental_troops_offensive = 2.4
	animated_objects_offensive = 2.4
	giant_troops_offensive = 1.2
	pikemen_offensive = -1.8
	sohei_offensive = -1.8

	enemy = {
		group = stand_fast
		factor = 3
	}
}

improved_awesome_advance_tactic = {	# fighter class cooperative between heavy infantry and heavy cavalry
	days = 6
	sprite = 2
	group = advance

	trigger = {
		phase = melee
		heavy_infantry = 0.01 # reverted to naked check
		knights = 0.01
		large_monsters = 0.01

		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_fighter
				trait = journeyman_fighter
				trait =	expert_fighter
				trait =	master_fighter
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 4

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.6
				}
				heavy_troops = {
					who = warpriests
					value >= 0.6
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.6
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.6
				}
			}
			OR = {
				heavy_troops = {
					who = knights
					value >= 0.3
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.5
				}
				heavy_troops = {
					who = warpriests
					value >= 0.5
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.5
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.5
				}
			}
			OR = {
				heavy_troops = {
					who = knights
					value >= 0.3
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.4
				}
				heavy_troops = {
					who = warpriests
					value >= 0.4
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.4
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.4
				}
			}
			OR = {
				heavy_troops = {
					who = knights
					value >= 0.2
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.2
				}
			}
		}

		mult_modifier = {
			factor = 0.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_fighter
					trait = journeyman_fighter
				}
			}
		}
	}

	knights_offensive = 0.9
	large_monsters_offensive = 0.9
	heavy_infantry_offensive = 3.6
	warpriests_offensive = 3.6
	elemental_troops_offensive = 3.6
	animated_objects_offensive = 3.6
	giant_troops_offensive = 1.8
	pikemen_offensive = -0.9
	sohei_offensive = -0.9

	enemy = {
		group = stand_fast
		factor = 3
	}
}

stand_fast_tactic = {	# exclusive for pikemen
	days = 6
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		pikemen = 0.01

		#high level fighter exclusion
		leader = {
			NOR = {
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.7
				}
				heavy_troops = {
					who = sohei
					value >= 0.7
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.6
				}
				heavy_troops = {
					who = sohei
					value >= 0.6
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.5
				}
				heavy_troops = {
					who = sohei
					value >= 0.5
				}
			}
		}

		mult_modifier = {
			factor = 0.1

			flank_has_leader = yes
			leader = { martial >= 8 }

			troops = {
				who = war_elephants
				value >= 0.04
			}
		}

		mult_modifier = {
			factor = 0.1

			flank_has_leader = yes
			leader = { martial >= 12 }

			troops = {
				who = war_elephants
				value >= 0.02
			}
		}

		mult_modifier = {
			factor = 0.1

			flank_has_leader = yes
			leader = { martial >= 16 }

			troops = {
				who = war_elephants
				value >= 0.01
			}
		}
	}

	knights_offensive = -1.5
	large_monsters_offensive = -1.5
	heavy_infantry_offensive = -0.5
	warpriests_offensive = -0.5
	elemental_troops_offensive = -0.5
	animated_objects_offensive = -0.5
	giant_troops_offensive = -0.25
	pikemen_offensive = 3
	sohei_offensive = 3

	enemy = {
		group = charge
		factor = 3
	}
}

improved_stand_fast_tactic = {	# fighter class tactic for pikemen
	days = 6
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		pikemen = 0.01

		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_fighter
				trait = journeyman_fighter
				trait =	expert_fighter
				trait =	master_fighter
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.7
				}
				heavy_troops = {
					who = sohei
					value >= 0.7
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.6
				}
				heavy_troops = {
					who = sohei
					value >= 0.6
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.5
				}
				heavy_troops = {
					who = sohei
					value >= 0.5
				}
			}
		}

		mult_modifier = {
			factor = 0.1

			flank_has_leader = yes
			leader = { martial >= 8 }

			troops = {
				who = war_elephants
				value >= 0.04
			}
		}

		mult_modifier = {
			factor = 0.1

			flank_has_leader = yes
			leader = { martial >= 12 }

			troops = {
				who = war_elephants
				value >= 0.02
			}
		}

		mult_modifier = {
			factor = 0.1

			flank_has_leader = yes
			leader = { martial >= 16 }

			troops = {
				who = war_elephants
				value >= 0.01
			}
		}

		mult_modifier = {
			factor = 0.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_fighter
					trait = journeyman_fighter
				}
			}
		}
	}

	knights_offensive = -0.75
	large_monsters_offensive = -0.75
	heavy_infantry_offensive = -0.25
	warpriests_offensive = -0.25
	elemental_troops_offensive = -0.25
	animated_objects_offensive = -0.25
	giant_troops_offensive = -0.12
	pikemen_offensive = 4.5
	sohei_offensive = 4.5

	enemy = {
		group = charge
		factor = 3
	}
}

slow_advance_tactic = {	# cooperative between pikemen and heavy infantry
	days = 6
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		OR = {
			AND = {
				pikemen = 0.01
				heavy_infantry = 0.01 # reverted to naked check
			}
			troops = {
				who = war_elephants
				value = 0.005
			}
		}

		#high level fighter exclusion
		leader = {
			NOR = {
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 4

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				AND = {
					OR = {
						heavy_troops = {
							who = pikemen
							value >= 0.6
						}
						heavy_troops = {
							who = sohei
							value >= 0.6
						}
					}
					OR = {
						heavy_troops = {
							who = heavy_infantry
							value >= 0.3
						}
						heavy_troops = {
							who = warpriests
							value >= 0.3
						}
						heavy_troops = {
							who = elemental_troops
							value >= 0.3
						}
						heavy_troops = {
							who = giant_troops
							value >= 0.3
						}
					}
				}
				troops = {
					who = war_elephants
					value >= 0.04
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				AND = {
					OR = {
						heavy_troops = {
							who = pikemen
							value >= 0.5
						}
						heavy_troops = {
							who = sohei
							value >= 0.5
						}
					}
					OR = {
						heavy_troops = {
							who = heavy_infantry
							value >= 0.3
						}
						heavy_troops = {
							who = warpriests
							value >= 0.3
						}
						heavy_troops = {
							who = elemental_troops
							value >= 0.3
						}
						heavy_troops = {
							who = giant_troops
							value >= 0.3
						}
					}
				}
				troops = {
					who = war_elephants
					value >= 0.02
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				AND = {
					OR = {
						heavy_troops = {
							who = pikemen
							value >= 0.4
						}
						heavy_troops = {
							who = sohei
							value >= 0.4
						}
					}
					OR = {
						heavy_troops = {
							who = heavy_infantry
							value >= 0.2
						}
						heavy_troops = {
							who = warpriests
							value >= 0.2
						}
						heavy_troops = {
							who = elemental_troops
							value >= 0.2
						}
						heavy_troops = {
							who = giant_troops
							value >= 0.2
						}
					}
				}
				troops = {
					who = war_elephants
					value >= 0.01
				}
			}
		}
	}

	knights_offensive = -1.8
	large_monsters_offensive = -1.8
	heavy_infantry_offensive = 0.6
	warpriests_offensive = 0.6
	elemental_troops_offensive = 0.6
	animated_objects_offensive = 0.6
	giant_troops_offensive = 0.3
	pikemen_offensive = 2.4
	sohei_offensive = 2.4
	war_elephants_offensive = 1.2

	enemy = {
		group = charge
		factor = 3
	}
}

improved_slow_advance_tactic = {	# fighter class cooperative between pikemen and heavy infantry
	days = 6
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_fighter
				trait = journeyman_fighter
				trait =	expert_fighter
				trait =	master_fighter
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
		OR = {
			AND = {
				pikemen = 0.01
				heavy_infantry = 0.01 # reverted to naked check
			}
			troops = {
				who = war_elephants
				value = 0.005
			}
		}
	}

	mean_time_to_happen = {
		days = 4

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				AND = {
					OR = {
						heavy_troops = {
							who = pikemen
							value >= 0.6
						}
						heavy_troops = {
							who = sohei
							value >= 0.6
						}
					}
					OR = {
						heavy_troops = {
							who = heavy_infantry
							value >= 0.3
						}
						heavy_troops = {
							who = warpriests
							value >= 0.3
						}
						heavy_troops = {
							who = elemental_troops
							value >= 0.3
						}
						heavy_troops = {
							who = giant_troops
							value >= 0.3
						}
					}
				}
				troops = {
					who = war_elephants
					value >= 0.04
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				AND = {
					OR = {
						heavy_troops = {
							who = pikemen
							value >= 0.5
						}
						heavy_troops = {
							who = sohei
							value >= 0.5
						}
					}
					OR = {
						heavy_troops = {
							who = heavy_infantry
							value >= 0.3
						}
						heavy_troops = {
							who = warpriests
							value >= 0.3
						}
						heavy_troops = {
							who = elemental_troops
							value >= 0.3
						}
						heavy_troops = {
							who = giant_troops
							value >= 0.3
						}
					}
				}
				troops = {
					who = war_elephants
					value >= 0.02
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				AND = {
					OR = {
						heavy_troops = {
							who = pikemen
							value >= 0.4
						}
						heavy_troops = {
							who = sohei
							value >= 0.4
						}
					}
					OR = {
						heavy_troops = {
							who = heavy_infantry
							value >= 0.2
						}
						heavy_troops = {
							who = warpriests
							value >= 0.2
						}
						heavy_troops = {
							who = elemental_troops
							value >= 0.2
						}
						heavy_troops = {
							who = giant_troops
							value >= 0.2
						}
					}
				}
				troops = {
					who = war_elephants
					value >= 0.01
				}
			}
		}

		mult_modifier = {
			factor = 0.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_fighter
					trait = journeyman_fighter
				}
			}
		}
	}

	knights_offensive = -0.9
	large_monsters_offensive = -0.9
	heavy_infantry_offensive = 0.9
	warpriests_offensive = 0.9
	elemental_troops_offensive = 0.9
	animated_objects_offensive = 0.9
	giant_troops_offensive = 0.45
	pikemen_offensive = 3.6
	sohei_offensive = 3.6
	war_elephants_offensive = 1.8

	enemy = {
		group = charge
		factor = 3
	}
}

awesome_charge_tactic = {	# exclusive for heavy cavalry
	days = 6
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		knights = 0.01
		large_monsters = 0.01

		#high level fighter exclusion
		leader = {
			NOR = {
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				heavy_troops = {
					who = knights
					value >= 0.7
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.7
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = knights
					value >= 0.6
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.6
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = knights
					value >= 0.5
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.5
				}
			}
		}
	}

	knights_offensive = 3
	large_monsters_offensive = 3
	heavy_infantry_offensive = -1.5
	warpriests_offensive = -1.5
	elemental_troops_offensive = -1.5
	animated_objects_offensive = -1.5
	pikemen_offensive = -0.5
	sohei_offensive = -0.5

	enemy = {
		group = advance
		factor = 3
	}
}

improved_awesome_charge_tactic = {	# fighter class tactic for heavy cavalry
	days = 6
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_fighter
				trait = journeyman_fighter
				trait =	expert_fighter
				trait =	master_fighter
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
		knights = 0.01
		large_monsters = 0.01

	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				heavy_troops = {
					who = knights
					value >= 0.7
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.7
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = knights
					value >= 0.6
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.6
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = knights
					value >= 0.5
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.5
				}
			}
		}

		mult_modifier = {
			factor = 0.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_fighter
					trait = journeyman_fighter
				}
			}
		}
	}

	knights_offensive = 4.5
	large_monsters_offensive = 4.5
	heavy_infantry_offensive = -0.75
	warpriests_offensive = -0.75
	elemental_troops_offensive = -0.75
	animated_objects_offensive = -0.75
	pikemen_offensive = -0.25
	sohei_offensive = -0.25

	enemy = {
		group = advance
		factor = 3
	}
}

awesomer_charge_tactic = {	# cooperative between heavy cavalry and pikemen
	days = 6
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		OR = {
			knights = 0.01
			large_monsters = 0.01
		}
		pikemen = 0.01

		#high level fighter exclusion
		leader = {
			NOR = {
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 4

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				heavy_troops = {
					who = knights
					value >= 0.6
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.6
				}
				heavy_troops = {
					who = pikemen
					value >= 0.3
				}
				heavy_troops = {
					who = sohei
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = knights
					value >= 0.5
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.5
				}
				heavy_troops = {
					who = pikemen
					value >= 0.3
				}
				heavy_troops = {
					who = sohei
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = knights
					value >= 0.4
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.4
				}
				heavy_troops = {
					who = pikemen
					value >= 0.2
				}
				heavy_troops = {
					who = sohei
					value >= 0.2
				}
			}
		}
	}

	knights_offensive = 2.4
	large_monsters_offensive = 2.4
	heavy_infantry_offensive = -1.8
	warpriests_offensive = -1.8
	elemental_troops_offensive = -1.8
	animated_objects_offensive = -1.8
	pikemen_offensive = 0.6
	sohei_offensive = 0.6

	enemy = {
		group = advance
		factor = 3
	}
}
improved_awesomer_charge_tactic = {	# fighter class cooperative between heavy cavalry and pikemen
	days = 6
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_fighter
				trait = journeyman_fighter
				trait =	expert_fighter
				trait =	master_fighter
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
		OR = {
			knights = 0.01
			large_monsters = 0.01
		}
		pikemen = 0.01
	}

	mean_time_to_happen = {
		days = 4

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				heavy_troops = {
					who = knights
					value >= 0.6
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.6
				}
			}
			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.3
				}
				heavy_troops = {
					who = sohei
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = knights
					value >= 0.5
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.5
				}
			}
			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.3
				}
				heavy_troops = {
					who = sohei
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = knights
					value >= 0.4
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.4
				}
			}
			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.2
				}
				heavy_troops = {
					who = sohei
					value >= 0.2
				}
			}
		}

		mult_modifier = {
			factor = 0.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_fighter
					trait = journeyman_fighter
				}
			}
		}
	}

	knights_offensive = 3.6
	large_monsters_offensive = 3.6
	heavy_infantry_offensive = -0.9
	warpriests_offensive = -0.9
	elemental_troops_offensive = -0.9
	animated_objects_offensive = -0.9
	pikemen_offensive = 0.9
	sohei_offensive = 0.9

	enemy = {
		group = advance
		factor = 3
	}
}

barrage_tactic = {
	days = 6
	sprite = 6 # index of icon
	group = defensive

	trigger = {
		phase = melee
		archers = 0.2 # reverted to naked check

		#high level fighter exclusion
		leader = {
			NOR = {
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 2

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 2

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}
	}

	archers_offensive = 2.4
	mages_troops_offensive = 2.4
	gunpowder_troops_offensive = 2.4
	horse_archers_offensive = 1.2
}

improved_barrage_tactic = {
	days = 6
	sprite = 6 # index of icon
	group = defensive

	trigger = {
		phase = melee
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_fighter
				trait = journeyman_fighter
				trait =	expert_fighter
				trait =	master_fighter
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
		archers = 0.2 # reverted to naked check
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 2

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 2

			flank_has_leader = yes
			leader = { martial >= 12 }

			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 0.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_fighter
					trait = journeyman_fighter
				}
			}
		}
	}

	archers_offensive = 3.6
	mages_troops_offensive = 3.6
	gunpowder_troops_offensive = 3.6
	horse_archers_offensive = 1.8
}

raid_tactic = {
	days = 6
	sprite = 1
	group = defensive

	trigger = {
		phase = melee

		OR = {
			light_cavalry = 0.2
			camel_cavalry = 0.2
			beast_troops = 0.2
		}

		#high level fighter exclusion
		leader = {
			NOR = {
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 2

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				troops = {
					who = light_cavalry
					value >= 0.3
				}
				troops = {
					who = camel_cavalry
					value >= 0.3
				}
				troops = {
					who = beast_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 2

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				troops = {
					who = light_infantry
					value >= 0.3
				}
				troops = {
					who = undead_troops
					value >= 0.3
				}
				troops = {
					who = mob_troops
					value >= 0.3
				}
				troops = {
					who = illusory_troops
					value >= 0.3
				}
			}
		}
	}

	light_cavalry_offensive = 2.4
	camel_cavalry_offensive = 2.4
	beast_troops_offensive = 2.4
	light_infantry_offensive = 2.4
	mob_troops_offensive = 2.4
	undead_troops_offensive = 2.4
	illusory_troops_offensive = 2.4
	archers_offensive = 1.2
	mages_troops_offensive = 1.2
	gunpowder_troops_offensive = 1.2
}

improved_raid_tactic = {
	days = 6
	sprite = 1
	group = defensive

	trigger = {
		phase = melee
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_fighter
				trait = journeyman_fighter
				trait =	expert_fighter
				trait =	master_fighter
				trait =	renowned_fighter
				trait = legendary_fighter
			}
		}

		OR = {
			light_cavalry = 0.2
			camel_cavalry = 0.2
			beast_troops = 0.2
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 2

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				troops = {
					who = light_cavalry
					value >= 0.3
				}
				troops = {
					who = camel_cavalry
					value >= 0.3
				}
				troops = {
					who = beast_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 2

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				troops = {
					who = light_infantry
					value >= 0.3
				}
				troops = {
					who = undead_troops
					value >= 0.3
				}
				troops = {
					who = mob_troops
					value >= 0.3
				}
				troops = {
					who = illusory_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 0.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_fighter
					trait = journeyman_fighter
				}
			}
		}
	}

	light_cavalry_offensive = 3.6
	camel_cavalry_offensive = 3.6
	beast_troops_offensive = 3.6
	light_infantry_offensive = 3.6
	mob_troops_offensive = 3.6
	undead_troops_offensive = 3.6
	illusory_troops_offensive = 3.6
	archers_offensive = 1.8
	mages_troops_offensive = 1.8
	gunpowder_troops_offensive = 1.8
}

pursue_tactic = {
	days = 15
	sprite = 4
	group = charge

	trigger = {
		phase = pursue
	}

	mean_time_to_happen = {
		days = 10
	}
}

#########################
# Combat Flavor Tactics #
#########################

# Bad Tactics

reckless_charge_tactic = {
	days = 6
	sprite = 5 # index of icon
	group = charge

	trigger = {
		phase = skirmish
		is_flanking = no
		days >= 10 # duration of combat >= 10 days
		flank_has_leader = yes

		leader = {
			OR = {
				trait = aggressive_leader
				trait = wroth
			}
		}
	}

	mean_time_to_happen = {
		days = 10

		mult_modifier = {
			factor = 3
			flank_has_leader = yes
			leader = { martial < 7 }

			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial < 7 }

			OR = {
				heavy_troops = {
					who = knights
					value >= 0.1
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.1
				}
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial < 7 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.1
				}
				heavy_troops = {
					who = warpriests
					value >= 0.1
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.1
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.1
				}
			}
		}
	}

	change_phase_to = melee

	knights_defensive = -0.5
	large_monsters_defensive = -0.5
	horse_archers_defensive = -0.5
	heavy_infantry_defensive = -0.3
	warpriests_defensive = -0.3
	elemental_troops_defensive = -0.3
	animated_objects_defensive = -0.3
	giant_troops_defensive = -0.3

	knights_offensive = 1.2
	large_monsters_offensive = 1.2
	horse_archers_offensive = 1.2
	heavy_infantry_offensive = 0.6
	warpriests_offensive = 0.6
	elemental_troops_offensive = 0.6
	animated_objects_offensive = 0.6
	giant_troops_offensive = 0.6
}

timid_advance_tactic = {
	days = 6
	sprite = 2
	group = advance

	trigger = {
		phase = melee
		heavy_infantry = 0.01 # reverted to naked check
		flank_has_leader = yes

		leader = {
			OR = {
				trait = craven
				trait = organizer
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial < 7 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.5
				}
				heavy_troops = {
					who = warpriests
					value >= 0.5
				}
				heavy_troops = {
					who = elemental_troops
					value >= 0.5
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.5
				}
			}
		}
	}

	knights_offensive = -2.1
	large_monsters_offensive = -2.1
	heavy_infantry_offensive = -2.1
	warpriests_offensive = -2.1
	elemental_troops_offensive = -2.1
	animated_objects_offensive = -2.1
	giant_troops_offensive = -1.1
	pikemen_offensive = 1.2
	sohei_offensive = 1.2

	enemy = {
		group = stand_fast
		factor = 1.2
	}
}

confused_orders_tactic = {
	days = 6
	sprite = 6
	group = volley

	trigger = {
		phase = skirmish
		archers = 0.01 # reverted to naked check
		flank_has_leader = yes

		leader = {
			OR = {
				trait = lisp
				trait = stutter
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial < 7 }

			OR = {
				light_troops = {
					who = archers
					value >= 0.5
				}
				light_troops = {
					who = mages_troops
					value >= 0.5
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.5
				}
			}
		}
	}

	archers_offensive = -1.2
	mages_troops_offensive = -1.2
	gunpowder_troops_offensive = -1.2
	horse_archers_offensive = -1.2

	enemy = {
		group = charge
		factor = -1.2
	}
}

hesitant_commander_tactic = {
	days = 6
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		flank_has_leader = yes

		leader = {
			OR = {
				trait = slothful
				trait = shy
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial < 7 }
		}
	}

	knights_offensive = -1.5
	large_monsters_offensive = -1.5
	heavy_infantry_offensive = -1.5
	warpriests_offensive = -1.5
	elemental_troops_offensive = -1.5
	animated_objects_offensive = -1.5
	giant_troops_offensive = -0.75
}

charging_own_skirmishers_tactic = {
	days = 6
	sprite = 5 # index of icon
	group = charge

	trigger = {
		phase = skirmish
		is_flanking = no
		days >= 10 # duration of combat >= 10 days
		flank_has_leader = yes
		leader = {
			OR = {
				trait = cruel
				AND = {
					trait = slaughterer
					NOT = { trait = kind }
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 10 # this has nothing to do with days, it just represents relative chance of selecting this tactic, higher is better

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial < 10 }

			OR = {
				heavy_troops = {
					who = knights
					value >= 0.1
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.1
				}
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial < 10 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.1
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.1
				}
				light_troops = {
					who = beast_troops
					value >= 0.1
				}
			}
		}
	}

	change_phase_to = melee

	knights_offensive = 3
	large_monsters_offensive = 3
	light_cavalry_offensive = 1.8
	camel_cavalry_offensive = 1.8
	beast_troops_offensive = 1.8

	archers_offensive = -4.2
	mages_troops_offensive = -4.2
	gunpowder_troops_offensive = -4.2
	archers_defensive = -0.5
	mages_troops_defensive = -0.5
	gunpowder_troops_defensive = -0.5
	horse_archers_offensive = -1.2
	horse_archers_defensive = -0.3
}

# Good tactics

inspired_defense_tactic = {
	days = 6
	sprite = 2 # index of icon
	group = defensive

	trigger = {
		phase = skirmish
		flank_has_leader = yes

		leader = {
			OR = {
				trait = inspiring_leader
				trait = defensive_leader
				trait = shield_of_torm
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 14 }
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = {
				martial >= 14
				trait = defensive_leader
			}
		}
	}

	knights_defensive = 1.5
	large_monsters_defensive = 1.5
	heavy_infantry_defensive = 1.5
	warpriests_defensive = 1.5
	giant_troops_defensive = 1.5
	light_infantry_defensive = 1.5
	mob_troops_defensive = 1.5
	light_cavalry_defensive = 1.5
	camel_cavalry_defensive = 1.5
	beast_troops_defensive = 1.5
	archers_defensive = 1.5
	mages_troops_defensive = 1.5
	gunpowder_troops_defensive = 1.5
	horse_archers_defensive = 1.5
	pikemen_defensive = 1.5
	sohei_defensive = 1.5
	war_elephants_defensive = 1.5

	enemy = {
		group = charge
		factor = 1.2
	}
	enemy = {
		group = advance
		factor = 0.6
	}
}

sneaky_ambush_tactic = {
	days = 6
	sprite = 2
	group = defensive

	trigger = {
		phase = skirmish
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_ranger
				trait = journeyman_ranger
				trait =	expert_ranger
				trait =	master_ranger
				trait =	renowned_ranger
				trait = legendary_ranger
				trait = trained_rogue
				trait = journeyman_rogue
				trait =	expert_rogue
				trait =	master_rogue
				trait =	renowned_rogue
				trait = legendary_rogue
			}
		}
		OR = {
			AND = {
				light_cavalry = 0.1
				light_infantry = 0.1
			}
			AND = {
				light_cavalry = 0.1
				archers = 0.1
			}
			AND = {
				archers = 0.1
				light_infantry = 0.1
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				AND = {
					OR = {
						light_troops = {
							who = light_cavalry
							value >= 0.45
						}
						light_troops = {
							who = camel_cavalry
							value >= 0.45
						}
						light_troops = {
							who = beast_troops
							value >= 0.45
						}
						light_troops = {
							who = horse_archers
							value >= 0.45
						}
					}
					OR = {
						troops = {
							who = light_infantry
							value >= 0.45
						}
						troops = {
							who = undead_troops
							value >= 0.45
						}
						troops = {
							who = mob_troops
							value >= 0.45
						}
						troops = {
							who = illusory_troops
							value >= 0.45
						}
					}
				}
				AND = {
					OR = {
						light_troops = {
							who = light_cavalry
							value >= 0.45
						}
						light_troops = {
							who = camel_cavalry
							value >= 0.45
						}
						light_troops = {
							who = beast_troops
							value >= 0.45
						}
						light_troops = {
							who = horse_archers
							value >= 0.45
						}
					}
					OR = {
						light_troops = {
							who = archers
							value >= 0.45
						}
						light_troops = {
							who = mages_troops
							value >= 0.45
						}
						light_troops = {
							who = gunpowder_troops
							value >= 0.45
						}
					}
				}
				AND = {
					OR = {
						light_troops = {
							who = archers
							value >= 0.45
						}
						light_troops = {
							who = mages_troops
							value >= 0.45
						}
						light_troops = {
							who = gunpowder_troops
							value >= 0.45
						}
					}
					OR = {
						troops = {
							who = light_infantry
							value >= 0.45
						}
						troops = {
							who = undead_troops
							value >= 0.45
						}
						troops = {
							who = mob_troops
							value >= 0.45
						}
						troops = {
							who = illusory_troops
							value >= 0.45
						}
					}
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				AND = {
					OR = {
						light_troops = {
							who = light_cavalry
							value >= 0.4
						}
						light_troops = {
							who = camel_cavalry
							value >= 0.4
						}
						light_troops = {
							who = beast_troops
							value >= 0.4
						}
						light_troops = {
							who = horse_archers
							value >= 0.4
						}
					}
					OR = {
						troops = {
							who = light_infantry
							value >= 0.4
						}
						troops = {
							who = undead_troops
							value >= 0.4
						}
						troops = {
							who = mob_troops
							value >= 0.4
						}
						troops = {
							who = illusory_troops
							value >= 0.4
						}
					}
				}
				AND = {
					OR = {
						light_troops = {
							who = light_cavalry
							value >= 0.4
						}
						light_troops = {
							who = camel_cavalry
							value >= 0.4
						}
						light_troops = {
							who = beast_troops
							value >= 0.4
						}
						light_troops = {
							who = horse_archers
							value >= 0.4
						}
					}
					OR = {
						light_troops = {
							who = archers
							value >= 0.4
						}
						light_troops = {
							who = mages_troops
							value >= 0.4
						}
						light_troops = {
							who = gunpowder_troops
							value >= 0.4
						}
					}
				}
				AND = {
					OR = {
						light_troops = {
							who = archers
							value >= 0.4
						}
						light_troops = {
							who = mages_troops
							value >= 0.4
						}
						light_troops = {
							who = gunpowder_troops
							value >= 0.4
						}
					}
					OR = {
						troops = {
							who = light_infantry
							value >= 0.4
						}
						troops = {
							who = undead_troops
							value >= 0.4
						}
						troops = {
							who = mob_troops
							value >= 0.4
						}
						troops = {
							who = illusory_troops
							value >= 0.4
						}
					}
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				AND = {
					OR = {
						light_troops = {
							who = light_cavalry
							value >= 0.3
						}
						light_troops = {
							who = camel_cavalry
							value >= 0.3
						}
						light_troops = {
							who = beast_troops
							value >= 0.3
						}
						light_troops = {
							who = horse_archers
							value >= 0.3
						}
					}
					OR = {
						troops = {
							who = light_infantry
							value >= 0.3
						}
						troops = {
							who = undead_troops
							value >= 0.3
						}
						troops = {
							who = mob_troops
							value >= 0.3
						}
						troops = {
							who = illusory_troops
							value >= 0.3
						}
					}
				}
				AND = {
					OR = {
						light_troops = {
							who = light_cavalry
							value >= 0.3
						}
						light_troops = {
							who = camel_cavalry
							value >= 0.3
						}
						light_troops = {
							who = beast_troops
							value >= 0.3
						}
						light_troops = {
							who = horse_archers
							value >= 0.3
						}
					}
					OR = {
						light_troops = {
							who = archers
							value >= 0.3
						}
						light_troops = {
							who = mages_troops
							value >= 0.3
						}
						light_troops = {
							who = gunpowder_troops
							value >= 0.3
						}
					}
				}
				AND = {
					OR = {
						light_troops = {
							who = archers
							value >= 0.3
						}
						light_troops = {
							who = mages_troops
							value >= 0.3
						}
						light_troops = {
							who = gunpowder_troops
							value >= 0.3
						}
					}
					OR = {
						troops = {
							who = light_infantry
							value >= 0.3
						}
						troops = {
							who = undead_troops
							value >= 0.3
						}
						troops = {
							who = mob_troops
							value >= 0.3
						}
						troops = {
							who = illusory_troops
							value >= 0.3
						}
					}
				}
			}
		}

		mult_modifier = {
			factor = 0.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_ranger
					trait = journeyman_ranger
					trait = trained_rogue
					trait = journeyman_rogue
				}
				NOR = {
					trait =	expert_ranger
					trait =	master_ranger
					trait =	renowned_ranger
					trait = legendary_ranger
					trait =	expert_rogue
					trait =	master_rogue
					trait =	renowned_rogue
					trait = legendary_rogue
				}
			}
		}

		mult_modifier = {
			factor = 1.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait =	renowned_ranger
					trait = legendary_ranger
					trait =	renowned_rogue
					trait = legendary_rogue
				}
			}
		}
	}

	light_cavalry_offensive = 1.35
	camel_cavalry_offensive = 1.35
	beast_troops_offensive = 1.35
	light_infantry_offensive = 1.35
	mob_troops_offensive = 1.35
	undead_troops_offensive = 1.35
	illusory_troops_offensive = 1.35
	horse_archers_offensive = 1.35
	archers_offensive = 1.35
	mages_troops_offensive = 1.35
	gunpowder_troops_offensive = 1.35

	enemy = {
		group = advance
		factor = 1.2
	}
}

monk_melee_tactic = {
	days = 6
	sprite = 1
	group = defensive

	trigger = {
		phase = melee
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_monk
				trait = journeyman_monk
				trait =	expert_monk
				trait =	master_monk
				trait =	renowned_monk
				trait = legendary_monk
			}
		}
		sohei = 0.01
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.45
				}
				heavy_troops = {
					who = sohei
					value >= 0.45
				}
			}
			OR = {
				troops = {
					who = light_infantry
					value >= 0.45
				}
				troops = {
					who = undead_troops
					value >= 0.45
				}
				troops = {
					who = mob_troops
					value >= 0.45
				}
				troops = {
					who = illusory_troops
					value >= 0.45
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.4
				}
				heavy_troops = {
					who = sohei
					value >= 0.4
				}
			}
			OR = {
				troops = {
					who = light_infantry
					value >= 0.4
				}
				troops = {
					who = undead_troops
					value >= 0.4
				}
				troops = {
					who = mob_troops
					value >= 0.4
				}
				troops = {
					who = illusory_troops
					value >= 0.4
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.3
				}
				heavy_troops = {
					who = sohei
					value >= 0.3
				}
			}
			OR = {
				troops = {
					who = light_infantry
					value >= 0.3
				}
				troops = {
					who = undead_troops
					value >= 0.3
				}
				troops = {
					who = mob_troops
					value >= 0.3
				}
				troops = {
					who = illusory_troops
					value >= 0.3
				}
			}
		}

		modifier = {
			factor = 0.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait = trained_monk
					trait = journeyman_monk
				}
			}
		}
		modifier = {
			factor = 1.5
			flank_has_leader = yes
			leader = {
				OR = {
					trait =	renowned_monk
					trait = legendary_monk
				}
			}
		}
	}

	sohei_offensive = 3.6
	pikemen_offensive = 3.6
	light_infantry_offensive = 3.6
	mob_troops_offensive = 3.6
	undead_troops_offensive = 3.6
	illusory_troops_offensive = 3.6
	archers_offensive = 1.8
	mages_troops_offensive = 1.8
	gunpowder_troops_offensive = 1.8
}

heroic_countercharge_tactic = {
	days = 6
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		OR = {
			knights = 0.01
			large_monsters = 0.01
		}
		flank_has_leader = yes

		OR = {
			light_cavalry = 0.01
			camel_cavalry = 0.01
			beast_troops = 0.01
		}

		leader = {
			OR = {
				trait = aggressive_leader
				trait = brave
				trait = cavalry_leader
				trait = sword_of_torm
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 14 }

			OR = {
				heavy_troops = {
					who = knights
					value >= 0.1
				}
				heavy_troops = {
					who = large_monsters
					value >= 0.1
				}
			}
		}
	}

	knights_offensive = 3.6
	large_monsters_offensive = 3.6
	light_cavalry_offensive = 3.6
	camel_cavalry_offensive = 3.6
	beast_troops_offensive = 3.6
	heavy_infantry_offensive = 0.6
	warpriests_offensive = 0.6
	elemental_troops_offensive = 0.6
	giant_troops_offensive = 0.6
	pikemen_offensive = 0.6
	sohei_offensive = 0.6

	enemy = {
		group = charge
		factor = 3
	}
}

# Spellcaster tactics

light_range_spell_tactic = {
	days = 6
	sprite = 6
	group = defensive

	trigger = {
		phase = skirmish
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_wizard
				trait = journeyman_wizard
				trait = trained_warlock
				trait = journeyman_warlock
				trait = trained_sorcerer
				trait = journeyman_sorcerer
				trait = trained_druid
				trait = journeyman_druid
				trait = trained_psion
				trait = journeyman_psion
				trait = creature_beholder
				AND = {
					OR = {
						trait = trained_cleric
						trait = journeyman_cleric
					}
					OR = {
						trait = patron_kelemvor
						trait = patron_lathander
						trait = patron_urogalan
						trait = patron_sehanine_moonbow
						trait = patron_segojan_earthcaller
					}
				}
			}
			NOR = {
				trait = expert_wizard
				trait = master_wizard
				trait = renowned_wizard
				trait = legendary_wizard
				trait = expert_warlock
				trait = master_warlock
				trait = renowned_warlock
				trait = legendary_warlock
				trait = expert_sorcerer
				trait = master_sorcerer
				trait = renowned_sorcerer
				trait = legendary_sorcerer
				trait = expert_druid
				trait = master_druid
				trait = renowned_druid
				trait = legendary_druid
				trait = expert_psion
				trait = master_psion
				trait = renowned_psion
				trait = legendary_psion
				AND = {
					OR = {
						trait = expert_cleric
						trait = master_cleric
						trait = renowned_cleric
						trait = legendary_cleric
					}
					OR = {
						trait = patron_kelemvor
						trait = patron_lathander
						trait = patron_urogalan
						trait = patron_sehanine_moonbow
						trait = patron_segojan_earthcaller
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 8 }
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 16 }
		}

		mult_modifier = {
			factor = 0.25

			location = {
				OR = {
					has_province_modifier = plaguelands
					has_province_modifier = plaguelands_nerf
				}
			}

			NOT = {
				leader = { trait = spellscar }
			}
		}
	}

	light_cavalry_offensive = 1
	camel_cavalry_offensive = 1
	beast_troops_offensive = 1

	archers_offensive = 1
	mages_troops_offensive = 1.5
	gunpowder_troops_offensive = 1
	giant_troops_offensive = 0.5

	light_infantry_offensive = 1
	mob_troops_offensive = 1
	undead_troops_offensive = 1
	illusory_troops_offensive = 1

	horse_archers_offensive = 1
}

medium_range_spell_tactic = {
	days = 6
	sprite = 6
	group = defensive

	trigger = {
		phase = skirmish
		flank_has_leader = yes
		leader = {
			OR = {
				trait = expert_wizard
				trait = master_wizard
				trait = expert_warlock
				trait = master_warlock
				trait = expert_sorcerer
				trait = master_sorcerer
				trait = expert_druid
				trait = master_druid
				trait = expert_psion
				trait = master_psion
				AND = {
					OR = {
						trait = expert_cleric
						trait = master_cleric
					}
					OR = {
						trait = patron_kelemvor
						trait = patron_lathander
						trait = patron_urogalan
						trait = patron_sehanine_moonbow
						trait = patron_segojan_earthcaller
					}
				}
			}
			NOR = {
				trait = renowned_wizard
				trait = legendary_wizard
				trait = renowned_warlock
				trait = legendary_warlock
				trait = renowned_sorcerer
				trait = legendary_sorcerer
				trait = renowned_druid
				trait = legendary_druid
				trait = renowned_psion
				trait = legendary_psion
				AND = {
					OR = {
						trait = renowned_cleric
						trait = legendary_cleric
					}
					OR = {
						trait = patron_kelemvor
						trait = patron_lathander
						trait = patron_urogalan
						trait = patron_sehanine_moonbow
						trait = patron_segojan_earthcaller
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 8 }
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 16 }
		}

		mult_modifier = {
			factor = 0.25

			location = {
				OR = {
					has_province_modifier = plaguelands
					has_province_modifier = plaguelands_nerf
				}
			}

			NOT = {
				leader = { trait = spellscar }
			}
		}
	}

	light_cavalry_offensive = 1.5
	camel_cavalry_offensive = 1.5
	beast_troops_offensive = 1.5

	archers_offensive = 1.5
	mages_troops_offensive = 2.25
	gunpowder_troops_offensive = 1.5
	giant_troops_offensive = 0.75

	light_infantry_offensive = 1.5
	mob_troops_offensive = 1.5
	undead_troops_offensive = 1.5
	illusory_troops_offensive = 1.5

	horse_archers_offensive = 1.5
}

heavy_range_spell_tactic = {
	days = 6
	sprite = 6
	group = defensive

	trigger = {
		phase = skirmish
		flank_has_leader = yes
		leader = {
			OR = {
				trait = renowned_wizard
				trait = legendary_wizard
				trait = renowned_warlock
				trait = legendary_warlock
				trait = renowned_sorcerer
				trait = legendary_sorcerer
				trait = renowned_druid
				trait = legendary_druid
				trait = renowned_psion
				trait = legendary_psion
				AND = {
					OR = {
						trait = renowned_cleric
						trait = legendary_cleric
					}
					OR = {
						trait = patron_kelemvor
						trait = patron_lathander
						trait = patron_urogalan
						trait = patron_sehanine_moonbow
						trait = patron_segojan_earthcaller
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 8 }
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 16 }
		}

		mult_modifier = {
			factor = 0.25

			location = {
				OR = {
					has_province_modifier = plaguelands
					has_province_modifier = plaguelands_nerf
				}
			}

			NOT = {
				leader = { trait = spellscar }
			}
		}
	}

	light_cavalry_offensive = 2
	camel_cavalry_offensive = 2
	beast_troops_offensive = 2

	archers_offensive = 2
	mages_troops_offensive = 3
	gunpowder_troops_offensive = 2
	giant_troops_offensive = 1

	light_infantry_offensive = 2
	mob_troops_offensive = 2
	undead_troops_offensive = 2
	illusory_troops_offensive = 2

	horse_archers_offensive = 2
}

light_melee_spell_tactic = {
	days = 6
	sprite = 2
	group = defensive

	trigger = {
		phase = melee
		flank_has_leader = yes
		leader = {
			OR = {
				trait = trained_wizard
				trait = journeyman_wizard
				trait = trained_warlock
				trait = journeyman_warlock
				trait = trained_sorcerer
				trait = journeyman_sorcerer
				trait = trained_druid
				trait = journeyman_druid
				trait = trained_cleric
				trait = journeyman_cleric
				trait = trained_bard
				trait = journeyman_bard
				trait = trained_psion
				trait = journeyman_psion
			}
			NOR = {
				trait = expert_wizard
				trait = master_wizard
				trait = renowned_wizard
				trait = legendary_wizard
				trait = expert_warlock
				trait = master_warlock
				trait = renowned_warlock
				trait = legendary_warlock
				trait = expert_sorcerer
				trait = master_sorcerer
				trait = renowned_sorcerer
				trait = legendary_sorcerer
				trait = expert_druid
				trait = master_druid
				trait = renowned_druid
				trait = legendary_druid
				trait = expert_cleric
				trait = master_cleric
				trait = renowned_cleric
				trait = legendary_cleric
				trait = expert_bard
				trait = master_bard
				trait = renowned_bard
				trait = legendary_bard
				trait = expert_psion
				trait = master_psion
				trait = renowned_psion
				trait = legendary_psion
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 8 }
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 16 }
		}

		mult_modifier = {
			factor = 0.25

			location = {
				OR = {
					has_province_modifier = plaguelands
					has_province_modifier = plaguelands_nerf
				}
			}

			NOT = {
				leader = { trait = spellscar }
			}
		}
	}

	knights_offensive = 2
	war_elephants_offensive = 2
	large_monsters_offensive = 2

	heavy_infantry_offensive = 2
	warpriests_offensive = 3
	elemental_troops_offensive = 2
	giant_troops_offensive = 1
	animated_objects_offensive = 2

	pikemen_offensive = 2
	sohei_offensive = 2
}

medium_melee_spell_tactic = {
	days = 6
	sprite = 2
	group = defensive

	trigger = {
		phase = melee
		flank_has_leader = yes
		leader = {
			OR = {
				trait = expert_wizard
				trait = master_wizard
				trait = expert_warlock
				trait = master_warlock
				trait = expert_sorcerer
				trait = master_sorcerer
				trait = expert_druid
				trait = master_druid
				trait = expert_cleric
				trait = master_cleric
				trait = expert_bard
				trait = master_bard
				trait = expert_psion
				trait = master_psion
			}
			NOR = {
				trait = renowned_wizard
				trait = legendary_wizard
				trait = renowned_warlock
				trait = legendary_warlock
				trait = renowned_sorcerer
				trait = legendary_sorcerer
				trait = renowned_druid
				trait = legendary_druid
				trait = renowned_cleric
				trait = legendary_cleric
				trait = renowned_bard
				trait = legendary_bard
				trait = renowned_psion
				trait = legendary_psion
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 8 }
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 16 }
		}

		mult_modifier = {
			factor = 0.25

			location = {
				OR = {
					has_province_modifier = plaguelands
					has_province_modifier = plaguelands_nerf
				}
			}

			NOT = {
				leader = { trait = spellscar }
			}
		}
	}

	knights_offensive = 2.5
	war_elephants_offensive = 2.5
	large_monsters_offensive = 2.5

	heavy_infantry_offensive = 2.5
	warpriests_offensive = 3.75
	elemental_troops_offensive = 2.5
	giant_troops_offensive = 1.25
	animated_objects_offensive = 2.5

	pikemen_offensive = 2.5
	sohei_offensive = 2.5
}

heavy_melee_spell_tactic = {
	days = 6
	sprite = 2
	group = defensive

	trigger = {
		phase = melee
		flank_has_leader = yes
		leader = {
			OR = {
				trait = renowned_wizard
				trait = legendary_wizard
				trait = renowned_warlock
				trait = legendary_warlock
				trait = renowned_sorcerer
				trait = legendary_sorcerer
				trait = renowned_druid
				trait = legendary_druid
				trait = renowned_cleric
				trait = legendary_cleric
				trait = renowned_bard
				trait = legendary_bard
				trait = renowned_psion
				trait = legendary_psion
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 8 }
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 16 }
		}

		mult_modifier = {
			factor = 0.25

			location = {
				OR = {
					has_province_modifier = plaguelands
					has_province_modifier = plaguelands_nerf
				}
			}

			NOT = {
				leader = { trait = spellscar }
			}
		}
	}

	knights_offensive = 3
	war_elephants_offensive = 3
	large_monsters_offensive = 3

	heavy_infantry_offensive = 3
	warpriests_offensive = 4.5
	elemental_troops_offensive = 3
	giant_troops_offensive = 1.5
	animated_objects_offensive = 3

	pikemen_offensive = 3
	sohei_offensive = 3
}

# Warrior Lodge tactics

glorious_countercharge_tactic = { #Call to Glory tactic. - Generic
	days = 6
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		flank_has_leader = yes
		leader = { has_character_modifier = call_to_glory }

		OR = {
			light_cavalry = 0.01
			camel_cavalry = 0.01
			beast_troops = 0.01
			light_infantry = 0.01
			mob_troops = 0.01
			pikemen = 0.01
			sohei = 0.01
			horse_archers = 0.01
		}
	}

	mean_time_to_happen = {
		days = 15

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 14 }

			light_troops = {
				who = light_cavalry
				value >= 0.1
			}
			light_troops = {
				who = camel_cavalry
				value >= 0.1
			}
			light_troops = {
				who = beast_troops
				value >= 0.1
			}
		}
	}

	heavy_infantry_offensive = 1.75
	warpriests_offensive = 1.75
	giant_troops_offensive = 1.75
	light_infantry_offensive = 1.75
	mob_troops_offensive = 1.75
	light_cavalry_offensive = 1.75
	camel_cavalry_offensive = 1.75
	beast_troops_offensive = 1.75
	archers_offensive = 1.75
	mages_troops_offensive = 1.75
	gunpowder_troops_offensive = 1.75
	horse_archers_offensive = 1.75
	pikemen_offensive = 1.75
	sohei_offensive = 1.75

	enemy = {
		group = charge
		factor = 3
	}
}

#Call to Glory - Winter's Maw Tactic - Norse (heavy infantry)
glorious_norse_tactic = {
	days = 6
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		OR = {
			heavy_infantry = 0.01
			warpriests = 0.01
		}
		flank_has_leader = yes

		leader = {
			has_character_modifier = call_to_glory
			OR = {
				society_member_of = warrior_lodge_uthgardt
				society_member_of = warrior_lodge_rashemen
			}
		}
	}

	mean_time_to_happen = {
		days = 15

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.7
				}
				heavy_troops = {
					who = warpriests
					value >= 0.7
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.7
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.6
				}
				heavy_troops = {
					who = warpriests
					value >= 0.6
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.6
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.5
				}
				heavy_troops = {
					who = warpriests
					value >= 0.5
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.5
				}
			}
		}
	}

	light_infantry_defensive = 1.5
	mob_troops_defensive = 1.5

	heavy_infantry_offensive = 2.75
	warpriests_offensive = 2.75
	giant_troops_offensive = 2

	enemy = {
		group = stand_fast
		factor = 1
	}
}

#Call to Glory - Unyielding Bloodlust Tactic - Orcs (light infantry)
glorious_orcs_tactic = {
	days = 6
	sprite = 3
	group = charge

	trigger = {
		phase = melee
		light_infantry = 0.01
		flank_has_leader = yes

		leader = {
			has_character_modifier = call_to_glory
			society_member_of = warrior_lodge_orcs
		}
	}

	mean_time_to_happen = {
		days = 15

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			light_troops = {
				who = light_infantry
				value >= 0.7
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			light_troops = {
				who = light_infantry
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			light_troops = {
				who = light_infantry
				value >= 0.5
			}
		}
	}

	light_infantry_offensive = 2.5
	light_infantry_defensive = 1.25
	mob_troops_offensive = 2.5
	mob_troops_defensive = 1.25

	heavy_infantry_offensive = 1.25
	warpriests_offensive = 1.25

	enemy = {
		group = advance
		factor = 3
	}
}

#Call to Glory - Goblin Phalanx Tactic - Goblins (pikemen shieldwall)
glorious_goblins_tactic = {
	days = 6
	sprite = 2
	group = defensive

	trigger = {
		phase = skirmish
		pikemen = 0.2
		archers = 0.01
		flank_has_leader = yes
		leader = {
			has_character_modifier = call_to_glory
			society_member_of = warrior_lodge_goblins
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			leader = { martial >= 8 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.7
				}
				heavy_troops = {
					who = sohei
					value >= 0.7
				}
			}
		}

		mult_modifier = {
			factor = 3

			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.6
				}
				heavy_troops = {
					who = sohei
					value >= 0.6
				}
			}
		}

		mult_modifier = {
			factor = 3

			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.5
				}
				heavy_troops = {
					who = sohei
					value >= 0.5
				}
			}
		}
	}

	light_infantry_defensive = 1.2
	mob_troops_defensive = 1.2

	heavy_infantry_defensive = 3
	warpriests_defensive = 3

	pikemen_defensive = 4
	sohei_defensive = 4

	archers_offensive = 1.2
	mages_troops_offensive = 0.6
	gunpowder_troops_offensive = 0.6
	giant_troops_offensive = 0.3
}

#Call to Glory - Elven Ambush - Elven (archers)
glorious_elven_tactic = {
	days = 6
	sprite = 6
	group = volley

	trigger = {
		phase = melee
		archers = 0.05
		flank_has_leader = yes

		leader = {
			has_character_modifier = call_to_glory
			society_member_of = warrior_lodge_elven

			NOR = {
				any_current_enemy = {
					has_opinion_modifier = {
						name = opinion_honorable_combat
						who = PREV
					}
				}

				trigger_if = {
					limit = { is_playable = no }

					liege = {
						any_current_enemy = {
							has_opinion_modifier = {
								name = opinion_honorable_combat
								who = PREV
							}
						}
					}
				}
			}
		}

		location = {
			NOR = {
				terrain = farmlands
				terrain = steppe
				terrain = plains
			}
		}
	}

	mean_time_to_happen = {
		days = 15

		mult_modifier = {
			factor = 2

			leader = { martial >= 10 }

			OR = {
				light_troops = {
					who = archers
					value >= 0.3
				}
				light_troops = {
					who = mages_troops
					value >= 0.3
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 2

			leader = { martial >= 4 }

			OR = {
				light_troops = {
					who = archers
					value >= 0.4
				}
				light_troops = {
					who = mages_troops
					value >= 0.4
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.4
				}
			}
		}
	}

	change_phase_to = skirmish

	archers_offensive = 2.5
	mages_troops_offensive = 2.5
	gunpowder_troops_offensive = 2.5
	heavy_infantry_defensive = 1.25
	warpriests_defensive = 1.25
	light_infantry_defensive = 1.25
}

#Call to Glory - Defensive Stance Tactic - Dwarves (heavy infantry)
glorious_dwarven_tactic = {
	days = 6
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		OR = {
			heavy_infantry = 0.01
			warpriests = 0.01
		}
		flank_has_leader = yes

		leader = {
			has_character_modifier = call_to_glory
			society_member_of = warrior_lodge_dwarven
		}
	}

	mean_time_to_happen = {
		days = 15

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.7
				}
				heavy_troops = {
					who = warpriests
					value >= 0.7
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.7
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.6
				}
				heavy_troops = {
					who = warpriests
					value >= 0.6
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.6
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.5
				}
				heavy_troops = {
					who = warpriests
					value >= 0.5
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.5
				}
			}
		}
	}

	heavy_infantry_offensive = 1.25
	heavy_infantry_defensive = 2.5
	warpriests_offensive = 1.25
	warpriests_defensive = 2.5

	archers_defensive = 1.25
	mages_troops_defensive = 1.25
	gunpowder_troops_defensive = 1.25

	enemy = {
		group = charge
		factor = 3
	}
}

###########################

clever_ambush_tactic = {
	days = 6
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		light_infantry = 0.1 # reverted to naked check
		OR = {
			horse_archers = 0.1
			light_cavalry = 0.1
			camel_cavalry = 0.1
			beast_troops = 0.1
		}
		flank_has_leader = yes

		leader = {
			OR = {
				trait = trickster
				is_smart_trigger = yes
			}
			NOR = {
				any_current_enemy = {
					has_opinion_modifier = {
						name = opinion_honorable_combat
						who = PREV
					}
				}

				trigger_if = {
					limit = { is_playable = no }

					liege = {
						any_current_enemy = {
							has_opinion_modifier = {
								name = opinion_honorable_combat
								who = PREV
							}
						}
					}
				}
			}
		}

		location = {
			OR = {
				terrain = forest
				terrain = woods
				terrain = jungle
				terrain = hills
				terrain = marsh
				terrain = mountain
				terrain = subterranean
				terrain = glacier
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 14 }

			OR = {
				troops = {
					who = horse_archers
					value >= 0.2
				}
				troops = {
					who = light_cavalry
					value >= 0.2
				}
				troops = {
					who = camel_cavalry
					value >= 0.2
				}
				troops = {
					who = beast_troops
					value >= 0.2
				}
			}
			OR = {
				troops = {
					who = light_infantry
					value >= 0.2
				}
				troops = {
					who = undead_troops
					value >= 0.2
				}
				troops = {
					who = mob_troops
					value >= 0.2
				}
				troops = {
					who = illusory_troops
					value >= 0.2
				}
			}
		}

		mult_modifier = {
			factor = 3

			leader = {
				trait = trickster
				martial >= 14
			}
			OR = {
				troops = {
					who = horse_archers
					value >= 0.2
				}
				troops = {
					who = light_cavalry
					value >= 0.2
				}
				troops = {
					who = camel_cavalry
					value >= 0.2
				}
				troops = {
					who = beast_troops
					value >= 0.2
				}
			}
			OR = {
				troops = {
					who = light_infantry
					value >= 0.2
				}
				troops = {
					who = undead_troops
					value >= 0.2
				}
				troops = {
					who = mob_troops
					value >= 0.2
				}
				troops = {
					who = illusory_troops
					value >= 0.2
				}
			}
		}
	}

	light_cavalry_offensive = 2.4
	camel_cavalry_offensive = 2.4
	beast_troops_offensive = 2.4
	light_infantry_offensive = 1.2
	mob_troops_offensive = 1.2
	undead_troops_offensive = 1.2
	illusory_troops_offensive = 1.2
	horse_archers_offensive = 1.2
	archers_offensive = 1.2
	mages_troops_offensive = 1.2
	gunpowder_troops_offensive = 1.2

	enemy = {
		group = advance
		factor = 3
	}
}

religious_fervour_tactic = {
	days = 6
	sprite = 2
	group = advance

	trigger = {
		phase = melee
		flank_has_leader = yes

		leader = {
			OR = {
				AND = {
					trait = zealous
					trait = inspiring_leader
				}
				AND = {
					trait = possessed
					NOT = { trait = cynical }
				}
				AND = {
					z_paladin = yes
					NOT = { trait = cynical }
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			leader = {
				martial >= 14
				trait = possessed
			}
		}
	}

	knights_offensive = 1.5
	large_monsters_offensive = 1.5
	heavy_infantry_offensive = 1.5
	warpriests_offensive = 1.5
	giant_troops_offensive = 1.5
	light_infantry_offensive = 1.5
	mob_troops_offensive = 1.5
	light_cavalry_offensive = 1.5
	camel_cavalry_offensive = 1.5
	beast_troops_offensive = 1.5
	archers_offensive = 1.5
	mages_troops_offensive = 1.5
	gunpowder_troops_offensive = 1.5
	horse_archers_offensive = 1.5
	pikemen_offensive = 1.5
	sohei_offensive = 1.5
	war_elephants_offensive = 1.5
}

############################
# Culture Specific Tactics #
############################

# Taan group, Crinti
retreat_and_ambush_tactic = {
	days = 6
	sprite = 1
	group = defensive

	trigger = {
		phase = melee
		horse_archers = 0.2
		flank_has_leader = yes

		leader = {
			OR = {
				culture_group = taan_group
				culture = crinti
			}
			NOR = {
				any_current_enemy = {
					has_opinion_modifier = {
						name = opinion_honorable_combat
						who = PREV
					}
				}

				trigger_if = {
					limit = { is_playable = no }

					liege = {
						any_current_enemy = {
							has_opinion_modifier = {
								name = opinion_honorable_combat
								who = PREV
							}
						}
					}
				}
			}
		}

		location = {
			NOR = {
				terrain = forest
				terrain = woods
				terrain = mountain
				terrain = impassable_mountains
				terrain = jungle
				terrain = marsh
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 2

			leader = { martial >= 10 }

			light_troops = {
				who = horse_archers
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 2

			leader = { martial >= 4 }

			light_troops = {
				who = horse_archers
				value >= 0.4
			}
		}

		mult_modifier = {
			factor = 2

			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = light_cavalry
					value >= 0.3
				}
				light_troops = {
					who = camel_cavalry
					value >= 0.3
				}
				light_troops = {
					who = beast_troops
					value >= 0.3
				}
			}
		}
	}

	change_phase_to = skirmish

	horse_archers_offensive =  2.0
	light_cavalry_offensive = 1.2
	camel_cavalry_offensive = 1.2
	beast_troops_offensive = 1.2
#	archers_offensive = 1.0
}

# Orc, Illuskan group, Rashemi
berserker_charge_tactic = {
	days = 6
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		OR = {
			heavy_infantry = 0.01
			warpriests = 0.01
		}
		flank_has_leader = yes
		leader = {
			OR = {
				culture_group = illuskan_group
				culture = rashemi
				culture = orc # High Orc
				trait = slaughterer
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			leader = { martial >= 10 }

			OR = {
				heavy_troops = {
					who = heavy_infantry
					value >= 0.3
				}
				heavy_troops = {
					who = warpriests
					value >= 0.3
				}
				heavy_troops = {
					who = giant_troops
					value >= 0.3
				}
			}
		}
	}

	heavy_infantry_offensive = 3.6
	warpriests_offensive = 3.6
	giant_troops_offensive = 1.8
	light_infantry_offensive = 1.2
	mob_troops_offensive = 1.2
	undead_troops_offensive = 1.2
	illusory_troops_offensive = 1.2

	heavy_infantry_defensive = -0.5
	warpriests_defensive = -0.5
	giant_troops_defensive = -0.25
	light_infantry_defensive = -0.3
	mob_troops_defensive = -0.3
	undead_troops_defensive = -0.3
	illusory_troops_defensive = -0.3

	enemy = {
		group = stand_fast
		factor = 1
	}
}

# Scottish
#schiltron_formation_tactic = {
	#days = 6
	#sprite = 3
	#group = stand_fast

	#trigger = {
		#phase = melee
		#troops = {
			#who = pikemen
			#value = 0.01
		#}
		#flank_has_leader = yes
		#leader = { culture = scottish }
	#}

	#mean_time_to_happen = {
		#days = 4
		#modifier = {
			#factor = 1.5
			#flank_has_leader = yes
			#leader = {
				#martial = 8
			#}
			#heavy_troops = {
				#who = pikemen
				#value = 0.6
			#}
			#OR = {
				#heavy_troops = {
					#who = heavy_infantry
					#value = 0.3
				#}
				#heavy_troops = {
					#who = warpriests
					#value = 0.3
				#}
			#}
		#}
		#modifier = {
			#factor = 1.5
			#flank_has_leader = yes
			#leader = {
				#martial = 12
			#}
			#heavy_troops = {
				#who = pikemen
				#value = 0.5
			#}
			#OR = {
				#heavy_troops = {
					#who = heavy_infantry
					#value = 0.3
				#}
				#heavy_troops = {
					#who = warpriests
					#value = 0.3
				#}
			#}
		#}
		#modifier = {
			#factor = 1.5
			#flank_has_leader = yes
			#leader = {
				#martial = 16
			#}
			#heavy_troops = {
				#who = pikemen
				#value = 0.4
			#}
			#OR = {
				#heavy_troops = {
					#who = heavy_infantry
					#value = 0.2
				#}
				#heavy_troops = {
					#who = warpriests
					#value = 0.2
				#}
			#}
		#}
	#}

	#light_infantry_defensive = 1.2
	#mob_troops_defensive = 1.2
	#undead_troops_defensive = 1.2
	#illusory_troops_defensive = 1.2
	#heavy_infantry_defensive = 2.4
	#warpriests_defensive = 2.4
	#pikemen_defensive = 3.6

	#archers_offensive = 0.6
	#mages_troops_offensive = 0.6
	#gunpowder_troops_offensive = 0.6
	#pikemen_offensive = 2.4

	#light_cavalry_defensive = -0.4
	#camel_cavalry_defensive = -0.4
	#beast_troops_defensive = -0.4
	#knights_defensive = -0.4
	#large_monsters_defensive = -0.4
	#horse_archers_defensive = -0.4

	#enemy = {
		#group = charge
		#factor = 3
	#}
#}

# Amnian, Highcoaster, Chessentan
pike_column_advance_tactic = {
	days = 6
	sprite = 2
	group = advance

	trigger = {
		phase = melee
		pikemen = 0.01
		flank_has_leader = yes

		leader = {
			OR = {
				culture = amnian
				culture = highcoaster
				culture = chessentan
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			heavy_troops = {
				who = pikemen
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			heavy_troops = {
				who = pikemen
				value >= 0.5
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			heavy_troops = {
				who = pikemen
				value >= 0.4
			}
		}
	}

	knights_offensive = 0.6
	heavy_infantry_offensive = 1.2
	warpriests_offensive = 1.2
	elemental_troops_offensive = 1.2
	animated_objects_offensive = 1.2
	giant_troops_offensive = 0.6
	pikemen_offensive = 3
	sohei_offensive = 3

	enemy = {
		group = stand_fast
		factor = 3
	}
}

# Elven, Dalesmen
massive_longbow_volley_tactic = {
	days = 6
	sprite = 6
	group = volley

	trigger = {
		phase = skirmish
		archers = 0.01
		flank_has_leader = yes

		leader = {
			OR = {
				culture = green_elf
				culture = moon_elf
				culture = sun_elf
				culture = wood_elf
				culture = eladrin
				culture = sea_elf
				culture = snow_elf
				culture = drow
				culture = feyri
				culture = avariel
				culture = lorendrow
				culture = aevendrow
				culture = dalesman
				culture = maviddi
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			light_troops = {
				who = archers
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			light_troops = {
				who = archers
				value >= 0.5
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			light_troops = {
				who = archers
				value >= 0.4
			}
		}
	}

	archers_offensive = 3.5
	mages_troops_offensive = 2.0
	gunpowder_troops_offensive = 2.0
	giant_troops_offensive = 1.0

	enemy = {
		group = harass
		factor = 1
	}

	enemy = {
		group = charge
		factor = 1
	}
}

# Chondathan/Vilhonian/Cormyrean/Draeven/Tethyrian/Knight Order member
couched_lance_charge_tactic = {
	days = 6
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		knights = 0.01
		flank_has_leader = yes

		leader = {
			OR = {
				culture = chondathan
				culture = vilhonian
				culture = cormyrean
				culture = draeven
				culture = tethyrian
				is_member_of_any_knight_order_trigger = yes
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			heavy_troops = {
				who = knights
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			heavy_troops = {
				who = knights
				value >= 0.5
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			heavy_troops = {
				who = knights
				value >= 0.4
			}
		}
	}

	knights_offensive = 4.2
	heavy_infantry_offensive = -0.6
	warpriests_offensive = -0.6
	elemental_troops_offensive = -0.6
	animated_objects_offensive = -0.6
	giant_troops_offensive = -0.3
	pikemen_offensive = 0.6
	sohei_offensive = 0.6

	enemy = {
		group = advance
		factor = 3
	}
}

# Amaese group, Katakoro group, Dwarven
mountain_ambush_tactic = {
	days = 6
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		light_infantry = 0.1 # reverted to naked check
		flank_has_leader = yes

		leader = {
			martial >= 9
			OR = {
				culture_group = amaese_group
				culture_group = katakoro_group
				culture = kao
				culture = shield_dwarf
				culture = earthfast_dwarf
				culture = earthroot_dwarf
				culture = gold_dwarf
				culture = urdunnir
				culture = derro
				culture = duergar
				culture = yikarian
			}
			NOR = {
				any_current_enemy = {
					has_opinion_modifier = {
						name = opinion_honorable_combat
						who = PREV
					}
				}

				trigger_if = {
					limit = { is_playable = no }

					liege = {
						any_current_enemy = {
							has_opinion_modifier = {
								name = opinion_honorable_combat
								who = PREV
							}
						}
					}
				}
			}
		}

		location = {
			OR = {
				terrain = hills
				terrain = mountain
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			OR = {
				troops = {
					who = light_infantry
					value >= 0.2
				}
				troops = {
					who = undead_troops
					value >= 0.2
				}
				troops = {
					who = mob_troops
					value >= 0.2
				}
				troops = {
					who = illusory_troops
					value >= 0.2
				}
			}
		}

		mult_modifier = {
			factor = 2
			leader = { martial >= 14 }
		}

		mult_modifier = {
			factor = 3
			leader = { trait = trickster }
		}
	}

	light_cavalry_offensive = 2.4
	beast_troops_offensive = 2.4
	light_infantry_offensive = 1.5
	mob_troops_offensive = 1.5
	undead_troops_offensive = 1.5
	illusory_troops_offensive = 1.5
	heavy_infantry_offensive = 1.25
	warpriests_offensive = 1.25
	elemental_troops_offensive = 1.25
	animated_objects_offensive = 1.25
	giant_troops_offensive = 0.6
	horse_archers_offensive = 1.5
	archers_offensive = 1.2
	mages_troops_offensive = 1.2
	gunpowder_troops_offensive = 1.2

	enemy = {
		group = advance
		factor = 3
	}
}

# Bedine/Badia/Hadhar/Calishite/Shoon
desert_ambush_tactic = {
	days = 6
	sprite = 3
	group = stand_fast

	trigger = {
		location = { terrain = desert }
		phase = melee
		light_infantry = 0.1
		flank_has_leader = yes

		OR = {
			horse_archers = 0.1
			light_cavalry = 0.1
			camel_cavalry = 0.1
			beast_troops = 0.1
		}

		leader = {
			OR = {
				culture = bedine
				culture = badia
				culture = hadhar
				culture = calishite
				culture = shoon
			}
			NOR = {
				any_current_enemy = {
					has_opinion_modifier = {
						name = opinion_honorable_combat
						who = PREV
					}
				}

				trigger_if = {
					limit = { is_playable = no }

					liege = {
						any_current_enemy = {
							has_opinion_modifier = {
								name = opinion_honorable_combat
								who = PREV
							}
						}
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 10 }

			OR = {
				troops = {
					who = horse_archers
					value >= 0.2
				}
				troops = {
					who = light_cavalry
					value >= 0.2
				}
				troops = {
					who = camel_cavalry
					value >= 0.2
				}
				troops = {
					who = beast_troops
					value >= 0.2
				}
			}
			OR = {
				troops = {
					who = light_infantry
					value >= 0.2
				}
				troops = {
					who = undead_troops
					value >= 0.2
				}
				troops = {
					who = mob_troops
					value >= 0.2
				}
				troops = {
					who = illusory_troops
					value >= 0.2
				}
			}
		}

		mult_modifier = {
			factor = 3

			leader = {
				trait = trickster
				martial >= 10
			}

			OR = {
				troops = {
					who = horse_archers
					value >= 0.2
				}
				troops = {
					who = light_cavalry
					value >= 0.2
				}
				troops = {
					who = camel_cavalry
					value >= 0.2
				}
				troops = {
					who = beast_troops
					value >= 0.2
				}
			}
			OR = {
				troops = {
					who = light_infantry
					value >= 0.2
				}
				troops = {
					who = undead_troops
					value >= 0.2
				}
				troops = {
					who = mob_troops
					value >= 0.2
				}
				troops = {
					who = illusory_troops
					value >= 0.2
				}
			}
		}
	}

	light_cavalry_offensive = 1.8
	camel_cavalry_offensive = 2.4
	beast_troops_offensive = 1.8
	light_infantry_offensive = 1.2
	mob_troops_offensive = 1.2
	undead_troops_offensive = 1.2
	illusory_troops_offensive = 1.2
	horse_archers_offensive = 1.2
	archers_offensive = 1.2
	mages_troops_offensive = 1.2
	gunpowder_troops_offensive = 1.2

	enemy = {
		group = advance
		factor = 3
	}
}

# Wild Dwarf, Yuan-ti
jungle_ambush_tactic = {
	days = 6
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		archers = 0.1
		light_infantry = 0.1
		OR = {
			pikemen = 0.01
			sohei = 0.01
		}
		flank_has_leader = yes
		leader = {
			OR = {
				culture = wild_dwarf
				culture = yuanti
				culture = malison
				culture = abomination
			}
			NOR = {
				any_current_enemy = {
					has_opinion_modifier = {
						name = opinion_honorable_combat
						who = PREV
					}
				}

				trigger_if = {
					limit = { is_playable = no }

					liege = {
						any_current_enemy = {
							has_opinion_modifier = {
								name = opinion_honorable_combat
								who = PREV
							}
						}
					}
				}
			}
		}

		location = { terrain = jungle }
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			troops = {
				who = archers
				value >= 0.2
			}
			troops = {
				who = light_infantry
				value >= 0.2
			}
			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.3
				}
				heavy_troops = {
					who = sohei
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 3

			leader = {
				trait = trickster
				martial >= 12
			}
			troops = {
				who = archers
				value >= 0.2
			}
			troops = {
				who = light_infantry
				value >= 0.2
			}
			OR = {
				heavy_troops = {
					who = pikemen
					value >= 0.3
				}
				heavy_troops = {
					who = sohei
					value >= 0.3
				}
			}
		}
	}

	light_infantry_offensive = 1.5
	mob_troops_offensive = 1.5
	undead_troops_offensive = 1.5
	illusory_troops_offensive = 1.5
	archers_offensive = 1.5
	mages_troops_offensive = 1.5
	gunpowder_troops_offensive = 1.5
	pikemen_offensive = 1.5
	sohei_offensive = 1.5
	beast_troops_offensive = 1.5

	enemy = {
		group = advance
		factor = 3
	}
}

# Impilturan/Thayan/Non-Evil Tharian
embolon_charge_formation_tactic = {
	days = 6
	sprite = 5
	group = charge

	trigger = {
		phase = melee
		knights = 0.01
		flank_has_leader = yes
		leader = {
			OR = {
				AND = {
					culture = tharian
					NOT = { religion_group = evil_human_pantheon_group }
				}
				culture = impilturan
				culture = thayan
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			heavy_troops = {
				who = knights
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			heavy_troops = {
				who = knights
				value >= 0.5
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			heavy_troops = {
				who = knights
				value >= 0.4
			}
		}
	}

	knights_offensive = 2.4
	horse_archers_offensive = 1.2
	light_cavalry_offensive = 0.6
	camel_cavalry_offensive = 0.6
	beast_troops_offensive = 0.6
	heavy_infantry_offensive = -1.2
	warpriests_offensive = -1.2
	elemental_troops_offensive = -1.2
	animated_objects_offensive = -1.2
	giant_troops_offensive = -0.6
	pikemen_offensive = 0.6
	sohei_offensive = 0.6

	enemy = {
		group = advance
		factor = 3
	}
}

# Evil Tharian (Zhent)
phoulkon_tactic = {
	days = 6
	sprite = 2 # index of icon
	group = defensive

	trigger = {
		phase = skirmish
		heavy_infantry = 0.2
		archers = 0.01
		flank_has_leader = yes
		leader = {
			culture = tharian
			religion_group = evil_human_pantheon_group
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 3

			leader = { martial >= 8 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.7
			}
		}

		mult_modifier = {
			factor = 3

			leader = { martial >= 12 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.6
			}
		}

		mult_modifier = {
			factor = 3

			leader = { martial >= 16 }

			heavy_troops = {
				who = heavy_infantry
				value >= 0.5
			}
		}
	}

	light_infantry_defensive = 1.2
	mob_troops_defensive = 1.2
	undead_troops_defensive = 1.2
	illusory_troops_defensive = 1.2
	heavy_infantry_defensive = 4.5
	warpriests_defensive = 4.5
	elemental_troops_defensive = 4.5
	pikemen_defensive = 2.4
	sohei_defensive = 2.4

	archers_offensive = 1.2
	mages_troops_offensive = 1.2
	gunpowder_troops_offensive = 1.2
	archers_defensive = 0.6
	mages_troops_defensive = 0.6
	gunpowder_troops_defensive = 0.6

	light_cavalry_defensive = -0.5
	camel_cavalry_defensive = -0.5
	beast_troops_defensive = -0.5
	knights_defensive = -0.5
	large_monsters_defensive = -0.5
	horse_archers_defensive = -0.5
}

# Giants
boulder_volley_tactic = {
	days = 6
	sprite = 6
	group = volley

	trigger = {
		phase = skirmish
		giant_troops = 0.01
		flank_has_leader = yes
		leader = {
			is_giant_race = yes
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			heavy_troops = {
				who = giant_troops
				value >= 0.04
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			heavy_troops = {
				who = giant_troops
				value >= 0.03
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			heavy_troops = {
				who = giant_troops
				value >= 0.02
			}
		}
	}

	archers_offensive = 2.0
	mages_troops_offensive = 2.0
	gunpowder_troops_offensive = 2.0
	giant_troops_offensive = 2.0

	enemy = {
		group = harass
		factor = 1
	}

	enemy = {
		group = charge
		factor = 1
	}
}

# Draconic/Illithid/Fiends
startling_rush_tactic = {
	days = 6
	sprite = 6
	group = harass

	trigger = {
		phase = skirmish
		large_monsters = 0.01
		flank_has_leader = yes
		leader = {
			OR = {
				culture_group = draconic_culture_group
				culture_group = dragonkin_group
				culture = illithid
				culture = thoon
				culture = elder_brain
				culture_group = fiendish_group
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			heavy_troops = {
				who = large_monsters
				value >= 0.04
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			heavy_troops = {
				who = large_monsters
				value >= 0.03
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			heavy_troops = {
				who = large_monsters
				value >= 0.02
			}
		}
	}

	large_monsters_offensive = 1.8
	light_infantry_offensive = 1.8
	mob_troops_offensive = 1.8
	undead_troops_offensive = 1.8
	illusory_troops_offensive = 1.8
	light_cavalry_offensive = 1.2
	camel_cavalry_offensive = 1.2
	beast_troops_offensive = 1.2

	light_cavalry_defensive = -0.25
	camel_cavalry_defensive = -0.25
	beast_troops_defensive = -0.25

	enemy = {
		group = swarm
		factor = 1
	}
}

# Vilhonian/Spacer/Lantanna/Kozakuran
tercio_tactic = {
	days = 6
	sprite = 3
	group = stand_fast

	trigger = {
		phase = melee
		gunpowder_troops = 0.01
		pikemen = 0.01
		flank_has_leader = yes
		leader = {
			OR = {
				culture = vilhonian
				culture = wildspacer
				culture = kozakuran
				culture = lantanna
			}
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			light_troops = {
				who = gunpowder_troops
				value >= 0.3
			}
			heavy_troops = {
				who = pikemen
				value >= 0.3
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			light_troops = {
				who = gunpowder_troops
				value >= 0.25
			}
			heavy_troops = {
				who = pikemen
				value >= 0.25
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			light_troops = {
				who = gunpowder_troops
				value >= 0.2
			}
			heavy_troops = {
				who = pikemen
				value >= 0.2
			}
		}
	}

	gunpowder_troops_offensive = 3
	mages_troops_offensive = 1.5
	pikemen_offensive = 3

	gunpowder_troops_defensive = 0.6
	mages_troops_defensive = 0.3

	enemy = {
		group = charge
		factor = 3
	}
}

# Untheric
chariot_tactic = {
	days = 6
	sprite = 6
	group = harass

	trigger = {
		phase = skirmish
		knights = 0.01
		flank_has_leader = yes
		leader = {
			culture = untheric
		}
	}

	mean_time_to_happen = {
		days = 3

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 8 }

			heavy_troops = {
				who = knights
				value >= 0.2
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 12 }

			heavy_troops = {
				who = knights
				value >= 0.15
			}
		}

		mult_modifier = {
			factor = 1.5

			leader = { martial >= 16 }

			heavy_troops = {
				who = knights
				value >= 0.1
			}
		}
	}

	knights_offensive = 1.8
	light_infantry_offensive = 1.8
	mob_troops_offensive = 1.8
	undead_troops_offensive = 1.8
	illusory_troops_offensive = 1.8
	light_cavalry_offensive = 1.2
	camel_cavalry_offensive = 1.2
	beast_troops_offensive = 1.2

	light_cavalry_defensive = -0.25
	camel_cavalry_defensive = -0.25
	beast_troops_defensive = -0.25

	enemy = {
		group = swarm
		factor = 1
	}
}

# War Elephants
crushing_charge_tactic = {
	days = 6
	sprite = 5 # index of icon
	group = charge

	trigger = {
		phase = skirmish
		is_flanking = no
		days >= 10

		OR = {
			war_elephants = 0.01
			knights = 0.2
			large_monsters = 0.2
		}
	}

	mean_time_to_happen = {
		days = 2 # this has nothing to do with days, it just represents relative chance of selecting this tactic, higher is better

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 8 }
			war_elephants = 0.04
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }
			war_elephants = 0.03
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 18 }
			war_elephants = 0.02
		}

		mult_modifier = {
			factor = 8

			flank_has_leader = yes
			leader = { martial >= 18 }

			OR = {
				troops = {
					who = knights
					value >= 0.4
				}
				troops = {
					who = large_monsters
					value >= 0.4
				}
			}
		}
	}

	change_phase_to = melee

	knights_offensive = 1.75
	war_elephants_offensive = 2.5
	large_monsters_offensive = 1.75
}

gray_wall_tactic = {
	days = 6
	sprite = 2 # index of icon
	group = defensive

	trigger = {
		phase = skirmish
		war_elephants = 0.025
	}

	mean_time_to_happen = {
		days = 5

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
				light_troops = {
					who = archers
					value >= 0.3
				}
				light_troops = {
					who = mages_troops
					value >= 0.3
				}
				light_troops = {
					who = gunpowder_troops
					value >= 0.3
				}
			}
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }
			war_elephants = 0.05
		}

		mult_modifier = {
			factor = 3

			flank_has_leader = yes
			leader = { martial >= 12 }
			war_elephants = 0.075
		}
	}

	light_infantry_defensive = 1.2
	mob_troops_defensive = 1.2
	undead_troops_defensive = 1.2
	illusory_troops_defensive = 1.2
	heavy_infantry_defensive = 3
	warpriests_defensive = 3
	elemental_troops_defensive = 3
	pikemen_defensive = 2.4
	sohei_defensive = 2.4
	war_elephants_defensive = 1.5

	archers_offensive = 1.2
	mages_troops_offensive = 1.2
	gunpowder_troops_offensive = 1.2
	giant_troops_offensive = 0.6
	archers_defensive = 0.6
	mages_troops_defensive = 0.6
	gunpowder_troops_defensive = 0.6
	giant_troops_defensive = 0.3

	light_cavalry_defensive = -0.5
	camel_cavalry_defensive = -0.5
	beast_troops_defensive = -0.5
	knights_defensive = -0.5
	horse_archers_defensive = -0.5
}

# force_back_tactic = {
#	days = 24
#	sprite = 3
#	group = stand_fast
#
#	trigger = {
#		phase = melee
#		OR = {
#			war_elephants = 0.005
#			heavy_infantry = 0.25
#			pikemen = 0.25
#		}
#	}
#
#	mean_time_to_happen = {
#		days = 3
#		modifier = {
#			factor = 1.5
#			flank_has_leader = yes
#			leader = {
#				martial = 8
#			}
#			OR = {
#				heavy_troops = {
#					who = pikemen
#					value = 0.7
#				}
#				heavy_troops = {
#					who = heavy_infantry
#					value = 0.3
#				}
#				troops = {
#					who = war_elephants
#					value = 0.04
#				}
#			}
#		}
#		modifier = {
#			factor = 1.5
#			flank_has_leader = yes
#			leader = {
#				martial = 12
#			}
#			OR = {
#				heavy_troops = {
#					who = pikemen
#					value = 0.6
#				}
#				heavy_troops = {
#					who = heavy_infantry
#					value = 0.3
#				}
#				troops = {
#					who = war_elephants
#					value = 0.02
#				}
#			}
#		}
#		modifier = {
#			factor = 1.5
#			flank_has_leader = yes
#			leader = {
#				martial = 16
#			}
#			OR = {
#				heavy_troops = {
#					who = pikemen
#					value = 0.5
#				}
#				heavy_troops = {
#					who = heavy_infantry
#					value = 0.3
#				}
#				troops = {
#					who = war_elephants
#					value = 0.01
#				}
#			}
#		}
#	}
#
#	knights_offensive = -1.8
#	heavy_infantry_offensive = 1.6
#	pikemen_offensive = 2.4
#	war_elephants_offensive = 1.2
#	enemy = {
#		group = charge
#		factor = 3
#	}
#}

elephant_trample_tactic = { # not crazy about the multiplier logic
	days = 6
	sprite = 5
	group = advance

	trigger = {
		phase = melee
		war_elephants = 0.005
	}

	mean_time_to_happen = {
		days = 4

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 8 }

			OR = {
#				heavy_troops = {
#					who = pikemen
#					value = 0.7
#				}
				heavy_troops = {
					who = heavy_infantry
					value >= 0.6
				}
				troops = {
					who = war_elephants
					value >= 0.04
				}
				troops = {
					who = knights
					value >= 0.25
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 12 }

			OR = {
#				heavy_troops = {
#					who = pikemen
#					value = 0.6
#				}
				heavy_troops = {
					who = heavy_infantry
					value >= 0.5
				}
				troops = {
					who = war_elephants
					value >= 0.02
				}
				troops = {
					who = knights
					value >= 0.25
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			flank_has_leader = yes
			leader = { martial >= 16 }

			OR = {
#				heavy_troops = {
#					who = pikemen
#					value = 0.5
#				}
				heavy_troops = {
					who = heavy_infantry
					value >= 0.4
				}
				troops = {
					who = war_elephants
					value >= 0.01
				}
				troops = {
					who = knights
					value >= 0.25
				}
			}
		}
	}

	knights_offensive = 2.0
	heavy_infantry_offensive = 2.0
	warpriests_offensive = 2.0
	elemental_troops_offensive = 2.0
	animated_objects_offensive = 2.0
	giant_troops_offensive = 1.0
	pikemen_offensive = 2.0
	sohei_offensive = 2.0
	war_elephants_offensive = 2.5
	war_elephants_defensive = -0.4
	light_cavalry_offensive = 0.5
	light_cavalry_defensive = -0.2
	beast_troops_offensive = 0.5
	beast_troops_defensive = -0.2
#	archers_offensive = -1.0
#	horse_archers_offensive = -1.0
}

blinded_skirmish_tactic = {
	days = 6
	sprite = 1
	group = skirmish

	trigger = {
		phase = skirmish

		location = {
			terrain = subterranean
		}

		NAND = {
			flank_has_leader = yes
			leader = {
				OR = {
					is_faerun_subterranean_culture = yes
					culture_group = draconic_culture_group
					culture_group = celestial_group
					culture_group = fiendish_group
					culture_group = monster_group
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 20

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 8 }
		}

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 12 }
		}

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 16 }
		}

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 20 }
		}
	}

	light_infantry_offensive = -1
	mob_troops_offensive = -1
	undead_troops_offensive = -0.5
	heavy_infantry_offensive = -1
	pikemen_offensive = -1
	warpriests_offensive = -1
	knights_offensive = -2
	large_monsters_offensive = -2
	elemental_troops_offensive = -0.5
	animated_objects_offensive = -0.5
	giant_troops_offensive = -1
	light_cavalry_offensive = -2
	camel_cavalry_offensive = -2
	war_elephants_offensive = -3
	beast_troops_offensive = -1
	horse_archers_offensive = -2
	archers_offensive = -2
	mages_troops_offensive = -2
	gunpowder_troops_offensive = -2
	sohei_offensive = -1
}

blinded_melee_tactic = {
	days = 6
	sprite = 1
	group = stand_fast

	trigger = {
		phase = melee

		location = {
			terrain = subterranean
		}

		NAND = {
			flank_has_leader = yes
			leader = {
				OR = {
					is_faerun_subterranean_culture = yes
					culture_group = draconic_culture_group
					culture_group = celestial_group
					culture_group = fiendish_group
					culture_group = monster_group
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 20

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 8 }
		}

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 12 }
		}

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 16 }
		}

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 20 }
		}
	}

	light_infantry_offensive = -1
	mob_troops_offensive = -1
	undead_troops_offensive = -0.5
	heavy_infantry_offensive = -1
	pikemen_offensive = -1
	warpriests_offensive = -1
	knights_offensive = -2
	large_monsters_offensive = -2
	elemental_troops_offensive = -0.5
	animated_objects_offensive = -0.5
	giant_troops_offensive = -1
	light_cavalry_offensive = -2
	camel_cavalry_offensive = -2
	war_elephants_offensive = -3
	beast_troops_offensive = -1
	horse_archers_offensive = -2
	archers_offensive = -2
	mages_troops_offensive = -2
	gunpowder_troops_offensive = -2
	sohei_offensive = -1
}

glacial_skirmish_tactic = {
	days = 6
	sprite = 1
	group = skirmish

	trigger = {
		phase = skirmish

		location = {
			terrain = glacier
		}

		NAND = {
			flank_has_leader = yes
			leader = { is_faerun_arctic_culture = yes }
		}
	}

	mean_time_to_happen = {
		days = 20

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 8 }
		}

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 12 }
		}

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 16 }
		}

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 20 }
		}

		mult_modifier = {
			factor = 0.50
			flank_has_leader = yes
			leader = { trait = winter_soldier }
		}

		mult_modifier = {
			factor = 0.75
			flank_has_leader = yes
			leader = { trait = patron_auril }
		}
	}

	light_infantry_offensive = -1
	mob_troops_offensive = -1
	undead_troops_offensive = -0.5
	heavy_infantry_offensive = -2
	pikemen_offensive = -2
	warpriests_offensive = -1
	knights_offensive = -3
	large_monsters_offensive = -2
	elemental_troops_offensive = -1
	animated_objects_offensive = -0.5
	light_cavalry_offensive = -2
	camel_cavalry_offensive = -2
	war_elephants_offensive = -1
	beast_troops_offensive = -1
	horse_archers_offensive = -2
	archers_offensive = -0.5
	mages_troops_offensive = -0.5
	gunpowder_troops_offensive = -0.5
	sohei_offensive = -1
}

glacial_melee_tactic = {
	days = 6
	sprite = 1
	group = stand_fast

	trigger = {
		phase = melee

		location = {
			terrain = glacier
		}

		NAND = {
			flank_has_leader = yes
			leader = { is_faerun_arctic_culture = yes }
		}
	}

	mean_time_to_happen = {
		days = 20

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 8 }
		}

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 12 }
		}

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 16 }
		}

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 20 }
		}

		mult_modifier = {
			factor = 0.50
			flank_has_leader = yes
			leader = { trait = winter_soldier }
		}

		mult_modifier = {
			factor = 0.75
			flank_has_leader = yes
			leader = { trait = patron_auril }
		}
	}

	light_infantry_offensive = -1
	mob_troops_offensive = -1
	undead_troops_offensive = -0.5
	heavy_infantry_offensive = -2
	pikemen_offensive = -2
	warpriests_offensive = -1
	knights_offensive = -3
	large_monsters_offensive = -2
	elemental_troops_offensive = -1
	animated_objects_offensive = -0.5
	light_cavalry_offensive = -2
	camel_cavalry_offensive = -2
	war_elephants_offensive = -1
	beast_troops_offensive = -1
	horse_archers_offensive = -2
	archers_offensive = -0.5
	mages_troops_offensive = -0.5
	gunpowder_troops_offensive = -0.5
	sohei_offensive = -1
}

flooded_skirmish_tactic = {
	days = 6
	sprite = 1
	group = skirmish

	trigger = {
		phase = skirmish

		location = {
			OR = {
				has_province_modifier = flooded_mod
				has_province_modifier = flooded_mod_nerf
			}
		}

		NAND = {
			flank_has_leader = yes
			leader = { is_faerun_aquatic_culture = yes }
		}
	}

	mean_time_to_happen = {
		days = 20

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 8 }
		}

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 12 }
		}

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 16 }
		}

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 20 }
		}
	}

	light_infantry_offensive = -1
	mob_troops_offensive = -1
	undead_troops_offensive = -0.5
	heavy_infantry_offensive = -2
	pikemen_offensive = -2
	warpriests_offensive = -1
	knights_offensive = -3
	large_monsters_offensive = -2
	elemental_troops_offensive = -0.5
	animated_objects_offensive = -0.5
	giant_troops_offensive = -1
	light_cavalry_offensive = -2
	camel_cavalry_offensive = -2
	war_elephants_offensive = -1
	beast_troops_offensive = -1
	horse_archers_offensive = -2
	archers_offensive = -0.5
	mages_troops_offensive = -0.5
	gunpowder_troops_offensive = -2
	sohei_offensive = -1
}

flooded_melee_tactic = {
	days = 6
	sprite = 1
	group = stand_fast

	trigger = {
		phase = melee

		location = {
			OR = {
				has_province_modifier = flooded_mod
				has_province_modifier = flooded_mod_nerf
			}
		}

		NAND = {
			flank_has_leader = yes
			leader = { is_faerun_aquatic_culture = yes }
		}
	}

	mean_time_to_happen = {
		days = 20

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 8 }
		}

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 12 }
		}

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 16 }
		}

		mult_modifier = {
			factor = 0.90
			flank_has_leader = yes
			leader = { martial >= 20 }
		}
	}

	light_infantry_offensive = -1
	mob_troops_offensive = -1
	undead_troops_offensive = -0.5
	heavy_infantry_offensive = -2
	pikemen_offensive = -2
	warpriests_offensive = -1
	knights_offensive = -3
	large_monsters_offensive = -2
	elemental_troops_offensive = -0.5
	animated_objects_offensive = -0.5
	giant_troops_offensive = -1
	light_cavalry_offensive = -2
	camel_cavalry_offensive = -2
	war_elephants_offensive = -1
	beast_troops_offensive = -1
	horse_archers_offensive = -2
	archers_offensive = -0.5
	mages_troops_offensive = -0.5
	gunpowder_troops_offensive = -2
	sohei_offensive = -1
}

##########################################################################
# Siege offensive tactics
##########################################################################
# Must be first "siege = attacker"
no_siege_offense_tactic = {
	days = 1 # tactic lasts one day
	sprite = 1 # index of icon
	siege = attacker

	trigger = {
		always = no # never use unless set explicitly by code
	}
}

default_siege_offense_tactic = {
	days = 5
	sprite = 1
	siege = attacker

	trigger = {
		always = yes
	}

	mean_time_to_happen = {
		days = 10
	}
}


##########################################################################
# Siege defensive tactics
##########################################################################

# Must be first "siege = defender"
no_siege_defense_tactic = {
	days = 1 # tactic lasts one day
	sprite = 1 # index of icon
	siege = defender
	trigger = {
		always = no # never use unless set explicitly by code
	}
}

default_siege_defense_tactic = {
	days = 5
	sprite = 1

	siege = defender

	trigger = {
		always = yes
	}

	mean_time_to_happen = {
		days = 10
	}
}


##########################################################################
# Combat MTTH definitions(do not remove)
##########################################################################

flank_retreat_odds =
{
	# MTTH range is 0-100, if flank morale is below MTTH, flank will retreat
	mean_time_to_happen = {
		days = 20
	}
}

flank_pursue_odds =
{
	# MTTH range is 0-100, chance (in %) of pursuing a fleeing flank
	mean_time_to_happen = {
		days = 25
	}
}
