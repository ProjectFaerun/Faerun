join_prev_knight_order_society_effect = {
	if = {
		limit = { PREV = { society_member_of = knight_order_purple_dragons } }
		join_society = knight_order_purple_dragons
	}
	if = {
		limit = { PREV = { society_member_of = knight_order_imphras } }
		join_society = knight_order_imphras
	}
	if = {
		limit = { PREV = { society_member_of = knight_order_silver_chalice } }
		join_society = knight_order_silver_chalice
	}
	if = {
		limit = { PREV = { society_member_of = knight_order_samular } }
		join_society = knight_order_samular
	}
	if = {
		limit = { PREV = { society_member_of = knight_order_golden_cup } }
		join_society = knight_order_golden_cup
	}
	if = {
		limit = { PREV = { society_member_of = knight_order_radiant_heart } }
		join_society = knight_order_radiant_heart
	}
}

join_from_knight_order_society_effect = {
	if = {
		limit = { FROM = { society_member_of = knight_order_purple_dragons } }
		join_society = knight_order_purple_dragons
	}
	if = {
		limit = { FROM = { society_member_of = knight_order_imphras } }
		join_society = knight_order_imphras
	}
	if = {
		limit = { FROM = { society_member_of = knight_order_silver_chalice } }
		join_society = knight_order_silver_chalice
	}
	if = {
		limit = { FROM = { society_member_of = knight_order_samular } }
		join_society = knight_order_samular
	}
	if = {
		limit = { FROM = { society_member_of = knight_order_golden_cup } }
		join_society = knight_order_golden_cup
	}
	if = {
		limit = { FROM = { society_member_of = knight_order_radiant_heart } }
		join_society = knight_order_radiant_heart
	}
}

detract_society_currency_massive_effect = {
	if = {
		limit = { is_in_society = yes }
		change_society_currency = -1000
	}
}

random_magic_item_effect = {
	custom_tooltip = {
		text = random_magic_item_effect_tooltip
		random_list = {
			38 = {
				random_minor_magic_weapon_effect = yes
			}
			11 = {
				random_minor_magic_armor_effect = yes
			}
			23 = {
				random_minor_magic_jewelry_effect = yes
			}
			23 = {
				random_minor_magic_clothing_effect = yes
			}
			11 = {
				random_minor_magic_instrument_effect = yes
			}
		}
		if = {
			limit = {
				new_artifact = {
					always = yes
					is_artifact_active = no
				}
			}
			new_artifact = { unsafe_destroy_artifact = yes }
			random_magic_item_effect = yes #repeat effect
		}
	}
}
random_minor_magic_weapon_effect = {
	random_list = {
		4 = {
			trigger = { NOT = { has_artifact = berserker_axe } }

			add_artifact = berserker_axe
		}
		2 = {
			trigger = { NOT = { has_artifact = flame_tongue } }

			add_artifact = flame_tongue
		}
		2 = {
			trigger = { NOT = { has_artifact = frost_brand } }

			add_artifact = frost_brand
		}
		2 = {
			trigger = { NOT = { has_artifact = life_drinker } }

			add_artifact = life_drinker
		}
		2 = {
			trigger = { NOT = { has_artifact = mace_of_terror } }

			add_artifact = mace_of_terror
		}
		2 = {
			trigger = { NOT = { has_artifact = oathbow } }

			add_artifact = oathbow
		}
		2 = {
			trigger = { NOT = { has_artifact = sword_of_sharpness } }

			add_artifact = sword_of_sharpness
		}
		4 = {
			trigger = { NOT = { has_artifact = sword_of_life_stealing } }

			add_artifact = sword_of_life_stealing
		}
		4 = {
			trigger = { NOT = { has_artifact = sword_of_wounding } }

			add_artifact = sword_of_wounding
		}
		4 = {
			trigger = { NOT = { has_artifact = trident_of_warning } }

			add_artifact = trident_of_warning
		}
		4 = {
			trigger = { NOT = { has_artifact = lesser_rod_pact_keeper } }

			add_artifact = lesser_rod_pact_keeper
		}
		2 = {
			trigger = { NOT = { has_artifact = normal_rod_pact_keeper } }

			add_artifact = normal_rod_pact_keeper
		}
		2 = {
			trigger = { NOT = { has_artifact = staff_of_swarming_insects } }

			add_artifact = staff_of_swarming_insects
		}
		2 = {
			trigger = { NOT = { has_artifact = staff_python } }

			add_artifact = staff_python
		}
		2 = {
			trigger = { NOT = { has_artifact = dagger_of_lifekeeping } }

			add_artifact = dagger_of_lifekeeping
		}
		2 = {
			trigger = { NOT = { has_artifact = sylvan_scimitar } }

			add_artifact = sylvan_scimitar
		}
		2 = {
			trigger = { NOT = { has_artifact = sword_of_subtlety } }

			add_artifact = sword_of_subtlety
		}
		2 = {
			trigger = { NOT = { has_artifact = wand_of_binding } }

			add_artifact = wand_of_binding
		}
		2 = {
			trigger = { NOT = { has_artifact = wand_of_fear } }

			add_artifact = wand_of_fear
		}
		2 = {
			trigger = { NOT = { has_artifact = wand_of_fireballs } }

			add_artifact = wand_of_fireballs
		}
		2 = {
			trigger = { NOT = { has_artifact = wand_of_lightning } }

			add_artifact = wand_of_lightning
		}
		2 = {
			trigger = { NOT = { has_artifact = greater_wand_war_mage } }

			add_artifact = greater_wand_war_mage
		}
		4 = {
			trigger = { NOT = { has_artifact = dagger_of_venom } }

			add_artifact = dagger_of_venom
		}
		4 = {
			trigger = { NOT = { has_artifact = javelin_of_lightning } }

			add_artifact = javelin_of_lightning
		}
		4 = {
			trigger = { NOT = { has_artifact = wand_magic_missile } }

			add_artifact = wand_magic_missile
		}
		4 = {
			trigger = { NOT = { has_artifact = wand_of_web } }

			add_artifact = wand_of_web
		}
		4 = {
			trigger = { NOT = { has_artifact = normal_wand_war_mage } }

			add_artifact = normal_wand_war_mage
		}
		fallback = { wealth = 200 }
	}
}
random_minor_magic_armor_effect = {
	random_list = {
		2 = {
			trigger = { NOT = { has_artifact = arrowcatching_shield } }

			add_artifact = arrowcatching_shield
		}
		4 = {
			trigger = { NOT = { has_artifact = flensing_gauntlet } }

			add_artifact = flensing_gauntlet
		}
		4 = {
			trigger = { NOT = { has_artifact = sentinel_shield } }

			add_artifact = sentinel_shield
		}
		4 = {
			trigger = { NOT = { has_artifact = shield_missile_attraction } }

			add_artifact = shield_missile_attraction
		}
		4 = {
			trigger = { NOT = { has_artifact = glamoured_studded_leather } }

			add_artifact = glamoured_studded_leather
		}
		2 = {
			trigger = { NOT = { has_artifact = demon_armor } }

			add_artifact = demon_armor
		}
		2 = {
			trigger = { NOT = { has_artifact = elven_chain } }

			add_artifact = elven_chain
		}
		2 = {
			trigger = { NOT = { has_artifact = dragon_scale_mail } }

			add_artifact = dragon_scale_mail
		}
		2 = {
			trigger = { NOT = { has_artifact = robe_of_eyes } }

			add_artifact = robe_of_eyes
		}
		fallback = { wealth = 200 }
	}
}
random_minor_magic_jewelry_effect = {
	random_list = {
		2 = {
			trigger = { NOT = { has_artifact = amulet_of_no_detection } }

			add_artifact = amulet_of_no_detection
		}
		2 = {
			trigger = { NOT = { has_artifact = medallion_of_thoughts } }

			add_artifact = medallion_of_thoughts
		}
		2 = {
			trigger = { NOT = { has_artifact = periapt_of_health } }

			add_artifact = periapt_of_health
		}
		2 = {
			trigger = { NOT = { has_artifact = ring_of_jumping } }

			add_artifact = ring_of_jumping
		}
		1 = {
			trigger = { NOT = { has_artifact = amulet_of_health } }

			add_artifact = amulet_of_health
		}
		1 = {
			trigger = { NOT = { has_artifact = ring_of_protection } }

			add_artifact = ring_of_protection
		}
		1 = {
			trigger = { NOT = { has_artifact = ring_of_free_action } }

			add_artifact = ring_of_free_action
		}
		1 = {
			trigger = { NOT = { has_artifact = ring_of_mind_shield } }

			add_artifact = ring_of_mind_shield
		}
		fallback = { wealth = 200 }
	}
}
random_minor_magic_clothing_effect = {
	random_list = {
		2 = {
			trigger = { NOT = { has_artifact = gloves_of_missile_snaring } }

			add_artifact = gloves_of_missile_snaring
		}
		2 = {
			trigger = { NOT = { has_artifact = gloves_of_swimming_and_climbing } }

			add_artifact = gloves_of_swimming_and_climbing
		}
		2 = {
			trigger = { NOT = { has_artifact = gloves_of_thievery } }

			add_artifact = gloves_of_thievery
		}
		2 = {
			trigger = { NOT = { has_artifact = boots_of_elvenkind } }

			add_artifact = boots_of_elvenkind
		}
		2 = {
			trigger = { NOT = { has_artifact = boots_of_striding_and_springing } }

			add_artifact = boots_of_striding_and_springing
		}
		2 = {
			trigger = { NOT = { has_artifact = boots_of_the_winterlands } }

			add_artifact = boots_of_the_winterlands
		}
		1 = {
			trigger = { NOT = { has_artifact = cape_of_the_mountebank } }

			add_artifact = cape_of_the_mountebank
		}
		1 = {
			trigger = { NOT = { has_artifact = cloak_of_elvenkind } }

			add_artifact = cloak_of_elvenkind
		}
		1 = {
			trigger = { NOT = { has_artifact = cloak_of_protection } }

			add_artifact = cloak_of_protection
		}
		1 = {
			trigger = { NOT = { has_artifact = gauntlets_of_ogre_power } }

			add_artifact = gauntlets_of_ogre_power
		}
		1 = {
			trigger = { NOT = { has_artifact = bracers_of_archery } }

			add_artifact = bracers_of_archery
		}
		1 = {
			trigger = { NOT = { has_artifact = boots_of_levitation } }

			add_artifact = boots_of_levitation
		}
		1 = {
			trigger = { NOT = { has_artifact = belt_of_dwarvenkind } }

			add_artifact = belt_of_dwarvenkind
		}
		1 = {
			trigger = { NOT = { has_artifact = belt_of_giant_strength_hill } }

			add_artifact = belt_of_giant_strength_hill
		}
		fallback = { wealth = 200 }
	}
}
random_minor_magic_instrument_effect = {
	random_list = {
		4 = {
			trigger = { NOT = { has_artifact = caveharp } }

			add_artifact = caveharp
		}
		4 = {
			trigger = { NOT = { has_artifact = harp_of_screams } }

			add_artifact = harp_of_screams
		}
		4 = {
			trigger = { NOT = { has_artifact = harp_of_charming } }

			add_artifact = harp_of_charming
		}
		4 = {
			trigger = { NOT = { has_artifact = harp_of_haunting } }

			add_artifact = harp_of_haunting
		}
		4 = {
			trigger = { NOT = { has_artifact = harp_of_pandemonium } }

			add_artifact = harp_of_pandemonium
		}
		4 = {
			trigger = { NOT = { has_artifact = harp_of_the_beastmaster } }

			add_artifact = harp_of_the_beastmaster
		}
		4 = {
			trigger = { NOT = { has_artifact = sailors_harp } }

			add_artifact = sailors_harp
		}
		2 = {
			trigger = { NOT = { has_artifact = charming_lute } }

			add_artifact = charming_lute
		}
		4 = {
			trigger = { NOT = { has_artifact = oonagh_lute } }

			add_artifact = oonagh_lute
		}
		2 = {
			trigger = { NOT = { has_artifact = lute_of_rest } }

			add_artifact = lute_of_rest
		}
		4 = {
			trigger = { NOT = { has_artifact = sewer_pipes } }

			add_artifact = sewer_pipes
		}
		2 = {
			trigger = { NOT = { has_artifact = lyre_of_progression } }

			add_artifact = lyre_of_progression
		}
		fallback = { wealth = 200 }
	}
}

random_major_magic_item_effect = {
	custom_tooltip = {
		text = random_major_magic_item_effect_tooltip
		random_list = {
			38 = {
				random_magic_weapon_effect = yes
			}
			11 = {
				random_magic_armor_effect = yes
			}
			23 = {
				random_magic_jewelry_effect = yes
			}
			23 = {
				random_magic_clothing_effect = yes
			}
			11 = {
				random_magic_instrument_effect = yes
			}
		}
		if = {
			limit = {
				new_artifact = {
					always = yes
					is_artifact_active = no
				}
			}
			new_artifact = { unsafe_destroy_artifact = yes }
			random_major_magic_item_effect = yes #repeat effect
		}
	}
}
random_magic_weapon_effect = {
	random_list = {
		2 = {
			trigger = { NOT = { has_artifact = dancing_sword } }

			add_artifact = dancing_sword
		}
		2 = {
			trigger = { NOT = { has_artifact = defender_sword } }

			add_artifact = defender_sword
		}
		2 = {
			trigger = { NOT = { has_artifact = dwarven_thrower } }

			add_artifact = dwarven_thrower
		}
		2 = {
			trigger = { NOT = { has_artifact = luck_blade } }

			add_artifact = luck_blade
		}
		2 = {
			trigger = { NOT = { has_artifact = nine_lives_stealer } }

			add_artifact = nine_lives_stealer
		}
		2 = {
			trigger = { NOT = { has_artifact = scimitar_of_speed } }

			add_artifact = scimitar_of_speed
		}
		2 = {
			trigger = { NOT = { has_artifact = staff_of_striking } }

			add_artifact = staff_of_striking
		}
		2 = {
			trigger = { NOT = { has_artifact = staff_thunder_lightning } }

			add_artifact = staff_thunder_lightning
		}
		2 = {
			trigger = { NOT = { has_artifact = sun_blade } }

			add_artifact = sun_blade
		}
		2 = {
			trigger = { NOT = { has_artifact = greater_rod_pact_keeper } }

			add_artifact = greater_rod_pact_keeper
		}
		2 = {
			trigger = { NOT = { has_artifact = staff_of_fire } }

			add_artifact = staff_of_fire
		}
		2 = {
			trigger = { NOT = { has_artifact = staff_of_frost } }

			add_artifact = staff_of_frost
		}
		2 = {
			trigger = { NOT = { has_artifact = staff_of_healing } }

			add_artifact = staff_of_healing
		}
		2 = {
			trigger = { NOT = { has_artifact = staff_of_power } }

			add_artifact = staff_of_power
		}
		2 = {
			trigger = { NOT = { has_artifact = staff_of_woodlands } }

			add_artifact = staff_of_woodlands
		}
		2 = {
			trigger = { NOT = { has_artifact = defending_dagger } }

			add_artifact = defending_dagger
		}
		4 = {
			trigger = { NOT = { has_artifact = frost_brand } }

			add_artifact = frost_brand
		}
		4 = {
			trigger = { NOT = { has_artifact = life_drinker } }

			add_artifact = life_drinker
		}
		4 = {
			trigger = { NOT = { has_artifact = mace_of_terror } }

			add_artifact = mace_of_terror
		}
		4 = {
			trigger = { NOT = { has_artifact = oathbow } }

			add_artifact = oathbow
		}
		4 = {
			trigger = { NOT = { has_artifact = normal_rod_pact_keeper } }

			add_artifact = normal_rod_pact_keeper
		}
		4 = {
			trigger = { NOT = { has_artifact = staff_of_swarming_insects } }

			add_artifact = staff_of_swarming_insects
		}
		4 = {
			trigger = { NOT = { has_artifact = staff_python } }

			add_artifact = staff_python
		}
		4 = {
			trigger = { NOT = { has_artifact = dagger_of_lifekeeping } }

			add_artifact = dagger_of_lifekeeping
		}
		4 = {
			trigger = { NOT = { has_artifact = flame_tongue } }

			add_artifact = flame_tongue
		}
		4 = {
			trigger = { NOT = { has_artifact = sword_of_sharpness } }

			add_artifact = sword_of_sharpness
		}
		4 = {
			trigger = { NOT = { has_artifact = greater_wand_war_mage } }

			add_artifact = greater_wand_war_mage
		}
		4 = {
			trigger = { NOT = { has_artifact = wand_of_lightning } }

			add_artifact = wand_of_lightning
		}
		4 = {
			trigger = { NOT = { has_artifact = wand_of_fireballs } }

			add_artifact = wand_of_fireballs
		}
		4 = {
			trigger = { NOT = { has_artifact = wand_of_fear } }

			add_artifact = wand_of_fear
		}
		4 = {
			trigger = { NOT = { has_artifact = wand_of_binding } }

			add_artifact = wand_of_binding
		}
		4 = {
			trigger = { NOT = { has_artifact = sword_of_subtlety } }

			add_artifact = sword_of_subtlety
		}
		4 = {
			trigger = { NOT = { has_artifact = sylvan_scimitar } }

			add_artifact = sylvan_scimitar
		}
		fallback = { wealth = 400 }
	}
}
random_magic_armor_effect = {
	random_list = {
		2 = {
			trigger = { NOT = { has_artifact = animated_shield } }

			add_artifact = animated_shield
		}
		2 = {
			trigger = { NOT = { has_artifact = spellguard_shield } }

			add_artifact = spellguard_shield
		}
		2 = {
			trigger = { NOT = { has_artifact = dwarven_plate } }

			add_artifact = dwarven_plate
		}
		2 = {
			trigger = { NOT = { has_artifact = efreeti_chain } }

			add_artifact = efreeti_chain
		}
		2 = {
			trigger = { NOT = { has_artifact = robe_of_colors } }

			add_artifact = robe_of_colors
		}
		2 = {
			trigger = { NOT = { has_artifact = robe_of_stars } }

			add_artifact = robe_of_stars
		}
		4 = {
			trigger = { NOT = { has_artifact = arrowcatching_shield } }

			add_artifact = arrowcatching_shield
		}
		4 = {
			trigger = { NOT = { has_artifact = demon_armor } }

			add_artifact = demon_armor
		}
		4 = {
			trigger = { NOT = { has_artifact = elven_chain } }

			add_artifact = elven_chain
		}
		4 = {
			trigger = { NOT = { has_artifact = dragon_scale_mail } }

			add_artifact = dragon_scale_mail
		}
		4 = {
			trigger = { NOT = { has_artifact = robe_of_eyes } }

			add_artifact = robe_of_eyes
		}
		fallback = { wealth = 400 }
	}
}
random_magic_jewelry_effect = {
	random_list = {
		2 = {
			trigger = { NOT = { has_artifact = amulet_of_health } }

			add_artifact = amulet_of_health
		}
		2 = {
			trigger = { NOT = { has_artifact = ring_of_protection } }

			add_artifact = ring_of_protection
		}
		2 = {
			trigger = { NOT = { has_artifact = ring_of_free_action } }

			add_artifact = ring_of_free_action
		}
		2 = {
			trigger = { NOT = { has_artifact = ring_of_mind_shield } }

			add_artifact = ring_of_mind_shield
		}
		1 = {
			trigger = { NOT = { has_artifact = ring_of_evasion } }

			add_artifact = ring_of_evasion
		}
		1 = {
			trigger = { NOT = { has_artifact = ring_of_regen } }

			add_artifact = ring_of_regen
		}
		1 = {
			trigger = { NOT = { has_artifact = ring_of_shooting_stars } }

			add_artifact = ring_of_shooting_stars
		}
		1 = {
			trigger = { NOT = { has_artifact = ring_of_spell_turning } }

			add_artifact = ring_of_spell_turning
		}
		fallback = { wealth = 400 }
	}
}
random_magic_clothing_effect = {
	random_list = {
		2 = {
			trigger = { NOT = { has_artifact = cape_of_the_mountebank } }

			add_artifact = cape_of_the_mountebank
		}
		2 = {
			trigger = { NOT = { has_artifact = cloak_of_elvenkind } }

			add_artifact = cloak_of_elvenkind
		}
		2 = {
			trigger = { NOT = { has_artifact = cloak_of_protection } }

			add_artifact = cloak_of_protection
		}
		2 = {
			trigger = { NOT = { has_artifact = boots_of_levitation } }

			add_artifact = boots_of_levitation
		}
		2 = {
			trigger = { NOT = { has_artifact = belt_of_dwarvenkind } }

			add_artifact = belt_of_dwarvenkind
		}
		2 = {
			trigger = { NOT = { has_artifact = belt_of_giant_strength_hill } }

			add_artifact = belt_of_giant_strength_hill
		}
		1 = {
			trigger = { NOT = { has_artifact = cloak_of_arachnida } }

			add_artifact = cloak_of_arachnida
		}
		1 = {
			trigger = { NOT = { has_artifact = cloak_of_displacement } }

			add_artifact = cloak_of_displacement
		}
		1 = {
			trigger = { NOT = { has_artifact = cloak_of_the_bat } }

			add_artifact = cloak_of_the_bat
		}
		1 = {
			trigger = { NOT = { has_artifact = mantle_of_spell_resistance } }

			add_artifact = mantle_of_spell_resistance
		}
		2 = {
			trigger = { NOT = { has_artifact = gauntlets_of_ogre_power } }

			add_artifact = gauntlets_of_ogre_power
		}
		2 = {
			trigger = { NOT = { has_artifact = bracers_of_archery } }

			add_artifact = bracers_of_archery
		}
		1 = {
			trigger = { NOT = { has_artifact = bracers_of_defense } }

			add_artifact = bracers_of_defense
		}
		1 = {
			trigger = { NOT = { has_artifact = boots_of_speed } }

			add_artifact = boots_of_speed
		}
		1 = {
			trigger = { NOT = { has_artifact = belt_of_giant_strength_stone } }

			add_artifact = belt_of_giant_strength_stone
		}
		1 = {
			trigger = { NOT = { has_artifact = belt_of_giant_strength_frost } }

			add_artifact = belt_of_giant_strength_frost
		}
		1 = {
			trigger = { NOT = { has_artifact = belt_of_giant_strength_fire } }

			add_artifact = belt_of_giant_strength_fire
		}
		fallback = { wealth = 400 }
	}
}
random_magic_instrument_effect = {
	random_list = {
		4 = {
			trigger = { NOT = { has_artifact = charming_lute } }

			add_artifact = charming_lute
		}
		4 = {
			trigger = { NOT = { has_artifact = lute_of_rest } }

			add_artifact = lute_of_rest
		}
		4 = {
			trigger = { NOT = { has_artifact = lyre_of_progression } }

			add_artifact = lyre_of_progression
		}
		2 = {
			trigger = { NOT = { has_artifact = fochlucan_bandore } }

			add_artifact = fochlucan_bandore
		}
		2 = {
			trigger = { NOT = { has_artifact = doves_harp } }

			add_artifact = doves_harp
		}
		2 = {
			trigger = { NOT = { has_artifact = anstruth_harp } }

			add_artifact = anstruth_harp
		}
		2 = {
			trigger = { NOT = { has_artifact = harp_of_healing } }

			add_artifact = harp_of_healing
		}
		2 = {
			trigger = { NOT = { has_artifact = doss_lute } }

			add_artifact = doss_lute
		}
		2 = {
			trigger = { NOT = { has_artifact = singing_wind } }

			add_artifact = singing_wind
		}
		2 = {
			trigger = { NOT = { has_artifact = canaith_mandolin } }

			add_artifact = canaith_mandolin
		}
		2 = {
			trigger = { NOT = { has_artifact = mac_fuirmidh_cittern } }

			add_artifact = mac_fuirmidh_cittern
		}
		2 = {
			trigger = { NOT = { has_artifact = cli_lyre } }

			add_artifact = cli_lyre
		}
		fallback = { wealth = 400 }
	}
}

random_minor_art_object_effect = {
	custom_tooltip = {
		text = random_art_object_effect_tooltip
		random_list = {
			8 = {
				trigger = { NOT = { has_artifact = precious_cup_1 } }

				add_artifact = precious_cup_1
			}
			8 = {
				trigger = { NOT = { has_artifact = magnificent_painting } }

				add_artifact = magnificent_painting
			}
			8 = {
				trigger = { NOT = { has_artifact = precious_mask_1 } }

				add_artifact = precious_mask_1
			}
			8 = {
				trigger = { NOT = { has_artifact = precious_statuette_1 } }

				add_artifact = precious_statuette_1
			}
			8 = {
				trigger = { NOT = { has_artifact = precious_ceremonial_robes_1 } }

				add_artifact = precious_ceremonial_robes_1
			}
			8 = {
				trigger = { NOT = { has_artifact = precious_tapestry_1 } }

				add_artifact = precious_tapestry_1
			}
			8 = {
				trigger = { NOT = { has_artifact = precious_gem_1 } }

				add_artifact = precious_gem_1
			}
			2 = {
				trigger = { NOT = { has_artifact = the_lily_crown } }

				add_artifact = the_lily_crown
			}
			8 = {
				trigger = { NOT = { has_artifact = noble_scepter } }

				add_artifact = noble_scepter
			}
			2 = {
				trigger = { NOT = { has_artifact = engraved_sword } }

				add_artifact = engraved_sword
			}
			2 = {
				trigger = { NOT = { has_artifact = engraved_dagger } }

				add_artifact = engraved_dagger
			}
			8 = {
				trigger = { NOT = { has_artifact = silver_bracelets } }

				add_artifact = silver_bracelets
			}
			8 = {
				trigger = { NOT = { has_artifact = collar_of_pearls } }

				add_artifact = collar_of_pearls
			}
			2 = {
				trigger = { NOT = { has_artifact = circlet_of_twilight } }

				add_artifact = circlet_of_twilight
			}
			2 = {
				trigger = { NOT = { has_artifact = silver_staff } }

				add_artifact = silver_staff
			}
			2 = {
				trigger = { NOT = { has_artifact = iron_crown } }

				add_artifact = iron_crown
			}
			2 = {
				trigger = { NOT = { has_artifact = engraved_crown } }

				add_artifact = engraved_crown
			}
			2 = {
				trigger = { NOT = { has_artifact = ceremonial_axe } }

				add_artifact = ceremonial_axe
			}

			4 = {
				trigger = { NOT = { has_artifact = precious_cup_2 } }

				add_artifact = precious_cup_2
			}
			4 = {
				trigger = { NOT = { has_artifact = magnificent_painting_2 } }

				add_artifact = magnificent_painting_2
			}
			4 = {
				trigger = { NOT = { has_artifact = precious_mask_2 } }

				add_artifact = precious_mask_2
			}
			4 = {
				trigger = { NOT = { has_artifact = precious_statuette_2 } }

				add_artifact = precious_statuette_2
			}
			4 = {
				trigger = { NOT = { has_artifact = precious_ceremonial_robes_2 } }

				add_artifact = precious_ceremonial_robes_2
			}
			4 = {
				trigger = { NOT = { has_artifact = precious_tapestry_2 } }

				add_artifact = precious_tapestry_2
			}
			4 = {
				trigger = { NOT = { has_artifact = precious_gem_2 } }

				add_artifact = precious_gem_2
			}
			1 = {
				trigger = { NOT = { has_artifact = crown_of_pearls } }

				add_artifact = crown_of_pearls
			}
			4 = {
				trigger = { NOT = { has_artifact = ruby_scepter } }

				add_artifact = ruby_scepter
			}
			1 = {
				trigger = { NOT = { has_artifact = golden_sword } }

				add_artifact = golden_sword
			}
			1 = {
				trigger = { NOT = { has_artifact = bejeweled_dagger } }

				add_artifact = bejeweled_dagger
			}
			4 = {
				trigger = { NOT = { has_artifact = golden_bracelets } }

				add_artifact = golden_bracelets
			}
			4 = {
				trigger = { NOT = { has_artifact = necklace_of_radiance } }

				add_artifact = necklace_of_radiance
			}
			1 = {
				trigger = { NOT = { has_artifact = circlet_of_the_sun } }

				add_artifact = circlet_of_the_sun
			}
			1 = {
				trigger = { NOT = { has_artifact = golden_staff } }

				add_artifact = golden_staff
			}
			1 = {
				trigger = { NOT = { has_artifact = crown_of_the_sea } }

				add_artifact = crown_of_the_sea
			}
			1 = {
				trigger = { NOT = { has_artifact = amber_crown } }

				add_artifact = amber_crown
			}
			1 = {
				trigger = { NOT = { has_artifact = obsidian_axe } }

				add_artifact = obsidian_axe
			}
			fallback = { wealth = 100 }
		}
	}
}
random_art_object_effect = {
	custom_tooltip = {
		text = random_art_object_effect_tooltip
		random_list = {
			8 = {
				trigger = { NOT = { has_artifact = precious_cup_2 } }

				add_artifact = precious_cup_2
			}
			8 = {
				trigger = { NOT = { has_artifact = magnificent_painting_2 } }

				add_artifact = magnificent_painting_2
			}
			8 = {
				trigger = { NOT = { has_artifact = precious_mask_2 } }

				add_artifact = precious_mask_2
			}
			8 = {
				trigger = { NOT = { has_artifact = precious_statuette_2 } }

				add_artifact = precious_statuette_2
			}
			8 = {
				trigger = { NOT = { has_artifact = precious_ceremonial_robes_2 } }

				add_artifact = precious_ceremonial_robes_2
			}
			8 = {
				trigger = { NOT = { has_artifact = precious_tapestry_2 } }

				add_artifact = precious_tapestry_2
			}
			8 = {
				trigger = { NOT = { has_artifact = precious_gem_2 } }

				add_artifact = precious_gem_2
			}
			2 = {
				trigger = { NOT = { has_artifact = crown_of_pearls } }

				add_artifact = crown_of_pearls
			}
			8 = {
				trigger = { NOT = { has_artifact = ruby_scepter } }

				add_artifact = ruby_scepter
			}
			2 = {
				trigger = { NOT = { has_artifact = golden_sword } }

				add_artifact = golden_sword
			}
			2 = {
				trigger = { NOT = { has_artifact = bejeweled_dagger } }

				add_artifact = bejeweled_dagger
			}
			8 = {
				trigger = { NOT = { has_artifact = golden_bracelets } }

				add_artifact = golden_bracelets
			}
			8 = {
				trigger = { NOT = { has_artifact = necklace_of_radiance } }

				add_artifact = necklace_of_radiance
			}
			2 = {
				trigger = { NOT = { has_artifact = circlet_of_the_sun } }

				add_artifact = circlet_of_the_sun
			}
			2 = {
				trigger = { NOT = { has_artifact = golden_staff } }

				add_artifact = golden_staff
			}
			2 = {
				trigger = { NOT = { has_artifact = crown_of_the_sea } }

				add_artifact = crown_of_the_sea
			}
			2 = {
				trigger = { NOT = { has_artifact = amber_crown } }

				add_artifact = amber_crown
			}
			2 = {
				trigger = { NOT = { has_artifact = obsidian_axe } }

				add_artifact = obsidian_axe
			}

			4 = {
				trigger = { NOT = { has_artifact = precious_cup_3 } }

				add_artifact = precious_cup_3
			}
			4 = {
				trigger = { NOT = { has_artifact = magnificent_painting_3 } }

				add_artifact = magnificent_painting_3
			}
			4 = {
				trigger = { NOT = { has_artifact = precious_mask_3 } }

				add_artifact = precious_mask_3
			}
			4 = {
				trigger = { NOT = { has_artifact = precious_statuette_3 } }

				add_artifact = precious_statuette_3
			}
			4 = {
				trigger = { NOT = { has_artifact = precious_ceremonial_robes_3 } }

				add_artifact = precious_ceremonial_robes_3
			}
			4 = {
				trigger = { NOT = { has_artifact = precious_tapestry_3 } }

				add_artifact = precious_tapestry_3
			}
			4 = {
				trigger = { NOT = { has_artifact = precious_gem_3 } }

				add_artifact = precious_gem_3
			}
			1 = {
				trigger = { NOT = { has_artifact = crown_of_majesty } }

				add_artifact = crown_of_majesty
			}
			4 = {
				trigger = { NOT = { has_artifact = emerald_scepter } }

				add_artifact = emerald_scepter
			}
			1 = {
				trigger = { NOT = { has_artifact = sword_of_heroes } }

				add_artifact = sword_of_heroes
			}
			1 = {
				trigger = { NOT = { has_artifact = dagger_of_glory } }

				add_artifact = dagger_of_glory
			}
			4 = {
				trigger = { NOT = { has_artifact = ruby_bracelets } }

				add_artifact = ruby_bracelets
			}
			4 = {
				trigger = { NOT = { has_artifact = celestial_necklace } }

				add_artifact = celestial_necklace
			}
			1 = {
				trigger = { NOT = { has_artifact = circlet_of_the_heavens } }

				add_artifact = circlet_of_the_heavens
			}
			1 = {
				trigger = { NOT = { has_artifact = staff_of_majesty } }

				add_artifact = staff_of_majesty
			}
			1 = {
				trigger = { NOT = { has_artifact = crown_of_crows } }

				add_artifact = crown_of_crows
			}
			1 = {
				trigger = { NOT = { has_artifact = heros_crown } }

				add_artifact = heros_crown
			}
			1 = {
				trigger = { NOT = { has_artifact = axe_of_the_ancestors } }

				add_artifact = axe_of_the_ancestors
			}
			fallback = { wealth = 100 }
		}
	}
}

#random_major_art_object_effect = { #WIP
#}

increase_adv_fatigue_effect = {
	if = {
		limit = {
			NOR = {
				has_character_modifier = adv_fatigue_1
				has_character_modifier = adv_fatigue_2
				has_character_modifier = adv_fatigue_3
				has_character_modifier = adv_fatigue_4
				has_character_modifier = adv_fatigue_5
				has_character_modifier = adv_fatigue_6
			}
		}
		custom_tooltip = { text = adventuring_fatigue_tt }
		hidden_effect = {
			add_character_modifier = {
					name = adv_fatigue_1
					duration = 60
				}
		}
	}
	else = {
		custom_tooltip = { text = adventuring_fatigue_tt }
		hidden_effect = {
			trigger_switch = {
				on_trigger = has_character_modifier
				adv_fatigue_1 = {
					remove_character_modifier = adv_fatigue_1
					add_character_modifier = {
							name = adv_fatigue_2
							duration = 60
						}
				}
				adv_fatigue_2 = {
					remove_character_modifier = adv_fatigue_2
					add_character_modifier = {
							name = adv_fatigue_3
							duration = 60
						}
				}
				adv_fatigue_3 = {
					remove_character_modifier = adv_fatigue_3
					add_character_modifier = {
							name = adv_fatigue_4
							duration = 60
						}
				}
				adv_fatigue_4 = {
					remove_character_modifier = adv_fatigue_4
					add_character_modifier = {
							name = adv_fatigue_5
							duration = 60
						}
				}
				adv_fatigue_5 = {
					remove_character_modifier = adv_fatigue_5
					add_character_modifier = {
							name = adv_fatigue_6
							duration = 60
						}
				}
			}
		}
	}
}
decrease_adv_fatigue_effect = {
	if = {
		limit = {
			OR = {
				has_character_modifier = adv_fatigue_1
				has_character_modifier = adv_fatigue_2
				has_character_modifier = adv_fatigue_3
				has_character_modifier = adv_fatigue_4
				has_character_modifier = adv_fatigue_5
				has_character_modifier = adv_fatigue_6
			}
		}
		custom_tooltip = { text = less_adventuring_fatigue_tt }
		hidden_effect = {
			trigger_switch = {
				on_trigger = has_character_modifier
				adv_fatigue_1 = {
					remove_character_modifier = adv_fatigue_1
				}
				adv_fatigue_2 = {
					remove_character_modifier = adv_fatigue_2
					add_character_modifier = {
						name = adv_fatigue_1
						duration = 60
					}
				}
				adv_fatigue_3 = {
					remove_character_modifier = adv_fatigue_3
					add_character_modifier = {
						name = adv_fatigue_2
						duration = 60
					}
				}
				adv_fatigue_4 = {
					remove_character_modifier = adv_fatigue_4
					add_character_modifier = {
						name = adv_fatigue_3
						duration = 60
					}
				}
				adv_fatigue_5 = {
					remove_character_modifier = adv_fatigue_5
					add_character_modifier = {
						name = adv_fatigue_4
						duration = 60
					}
				}
				adv_fatigue_6 = {
					remove_character_modifier = adv_fatigue_6
					add_character_modifier = {
						name = adv_fatigue_5
						duration = 60
					}
				}
			}
		}
	}
}
heal_wounds_adv_effect = {
	if = {
		limit = {
			trait = mangled
		}
		remove_trait = mangled
		add_trait = severely_injured
	}
	else_if = {
		limit = {
			trait = severely_injured
		}
		remove_trait = severely_injured
		add_trait = wounded
	}
	else_if = {
		limit = {
			trait = wounded
		}
		remove_trait = wounded
		remove_character_modifier = badly_bruised
		remove_character_modifier = black_eye
		remove_character_modifier = swollen_ankle
		remove_character_modifier = swollen_wrist
		remove_character_modifier = sore_muscles
		remove_character_modifier = cracked_ribs
		remove_character_modifier = concussion
	}
}

trivial_adv_xp_effect = {
	if = {
		limit = {
			trait = barbarian
		}
		hidden_tooltip = {
			change_variable = { which = barbarian_xp value = 50 }
		}
	}
	else_if = {
		limit = {
			trait = trained_barbarian
		}
		hidden_tooltip = {
			change_variable = { which = barbarian_xp value = 30 }
		}
	}
	if = {
		limit = {
			trait = bard
		}
		hidden_tooltip = {
			change_variable = { which = bard_xp value = 50 }
		}
	}
	else_if = {
		limit = {
			trait = trained_bard
		}
		hidden_tooltip = {
			change_variable = { which = bard_xp value = 30 }
		}
	}
	if = {
		limit = {
			trait = cleric
		}
		hidden_tooltip = {
			change_variable = { which = cleric_xp value = 50 }
		}
	}
	else_if = {
		limit = {
			trait = trained_cleric
		}
		hidden_tooltip = {
			change_variable = { which = cleric_xp value = 30 }
		}
	}
	if = {
		limit = {
			trait = druid
		}
		hidden_tooltip = {
			change_variable = { which = druid_xp value = 50 }
		}
	}
	else_if = {
		limit = {
			trait = trained_druid
		}
		hidden_tooltip = {
			change_variable = { which = druid_xp value = 30 }
		}
	}
	if = {
		limit = {
			trait = fighter
		}
		hidden_tooltip = {
			change_variable = { which = fighter_xp value = 50 }
		}
	}
	else_if = {
		limit = {
			trait = trained_fighter
		}
		hidden_tooltip = {
			change_variable = { which = fighter_xp value = 30 }
		}
	}
	if = {
		limit = {
			trait = class_monk
		}
		hidden_tooltip = {
			change_variable = { which = monk_xp value = 50 }
		}
	}
	else_if = {
		limit = {
			trait = trained_monk
		}
		hidden_tooltip = {
			change_variable = { which = monk_xp value = 30 }
		}
	}
	if = {
		limit = {
			trait = paladin
		}
		hidden_tooltip = {
			change_variable = { which = paladin_xp value = 50 }
		}
	}
	else_if = {
		limit = {
			trait = trained_paladin
		}
		hidden_tooltip = {
			change_variable = { which = paladin_xp value = 30 }
		}
	}
	if = {
		limit = {
			trait = ranger
		}
		hidden_tooltip = {
			change_variable = { which = ranger_xp value = 50 }
		}
	}
	else_if = {
		limit = {
			trait = trained_ranger
		}
		hidden_tooltip = {
			change_variable = { which = ranger_xp value = 30 }
		}
	}
	if = {
		limit = {
			trait = rogue
		}
		hidden_tooltip = {
			change_variable = { which = rogue_xp value = 50 }
		}
	}
	else_if = {
		limit = {
			trait = trained_rogue
		}
		hidden_tooltip = {
			change_variable = { which = rogue_xp value = 30 }
		}
	}
	if = {
		limit = {
			trait = shadow
		}
		hidden_tooltip = {
			change_variable = { which = shadow_xp value = 50 }
		}
	}
	else_if = {
		limit = {
			trait = trained_shadow
		}
		hidden_tooltip = {
			change_variable = { which = shadow_xp value = 30 }
		}
	}
	if = {
		limit = {
			trait = sorcerer
		}
		hidden_tooltip = {
			change_variable = { which = sorcerer_xp value = 50 }
		}
	}
	else_if = {
		limit = {
			trait = trained_sorcerer
		}
		hidden_tooltip = {
			change_variable = { which = sorcerer_xp value = 30 }
		}
	}
	if = {
		limit = {
			trait = warlock
		}
		hidden_tooltip = {
			change_variable = { which = warlock_xp value = 50 }
		}
	}
	else_if = {
		limit = {
			trait = trained_warlock
		}
		hidden_tooltip = {
			change_variable = { which = warlock_xp value = 30 }
		}
	}
	if = {
		limit = {
			trait = wizard
		}
		hidden_tooltip = {
			change_variable = { which = wizard_xp value = 50 }
		}
	}
	else_if = {
		limit = {
			trait = trained_wizard
		}
		hidden_tooltip = {
			change_variable = { which = wizard_xp value = 30 }
		}
	}
	if = {
		limit = {
			trait = psion
		}
		hidden_tooltip = {
			change_variable = { which = psion_xp value = 50 }
		}
	}
	else_if = {
		limit = {
			trait = trained_psion
		}
		hidden_tooltip = {
			change_variable = { which = psion_xp value = 30 }
		}
	}
}
easy_adv_xp_effect = {
	hidden_tooltip = {
		set_variable = { which = local_xp_to_add value = 100 }
		add_custom_xp_effect = yes
	}
}
mod_adv_xp_effect = {
	hidden_tooltip = {
		set_variable = { which = local_xp_to_add value = 200 }
		add_custom_xp_effect = yes
	}
}

adventurer_reward_effect = {
	if = {
		limit = { is_alive = yes }

		if = {
			limit = {
				ROOT = { has_character_flag = adv_mod_difficulty }
			}
			wealth = 200
			prestige = 200
			random_major_magic_item_effect = yes
			mod_adv_xp_effect = yes
		}
		else = {
			wealth = 100
			prestige = 100
			random_magic_item_effect = yes
			easy_adv_xp_effect = yes
		}

		if = {
			limit = { NOT = { trait = adventurer } }
			add_trait = adventurer
		}
		if = {
			limit = { trait = craven }
			random = {
				chance = 50
				remove_trait = craven
			}
		}
		random_list = { #friendship
			10 = {
				trigger = {
					event_target:party_member_1 = {
						is_alive = yes
						NOT = { character = PREV }
					}
				}
				add_friend = event_target:party_member_1
			}
			10 = {
				trigger = {
					event_target:party_member_2 = {
						is_alive = yes
						NOT = { character = PREV }
					}
				}
				add_friend = event_target:party_member_2
			}
			10 = {
				trigger = {
					event_target:party_member_3 = {
						is_alive = yes
						NOT = { character = PREV }
					}
				}
				add_friend = event_target:party_member_3
			}
			10 = {
				trigger = {
					event_target:party_member_4 = {
						is_alive = yes
						NOT = { character = PREV }
					}
				}
				add_friend = event_target:party_member_4
			}
			70 = {
				#nothing
			}
		}
		opinion = {
			modifier = opinion_very_grateful
			who = ROOT
			years = 5
		}
		reverse_opinion = {
			modifier = opinion_very_grateful
			who = ROOT
			years = 5
		}
		heal_wounds_adv_effect = yes
	}
}

adventure_cleanup_effect = {
	remove_character_modifier = sent_adventurers
	clr_character_flag = adv_mod_difficulty
	clr_character_flag = adv_vs_host
	clr_character_flag = adv_researched_loc
	clr_character_flag = adv_negotiated_locals
	clr_character_flag = adv_bad_weather
	clr_character_flag = adv_did_forage
	clr_character_flag = adv_got_lost
	clr_character_flag = adv_did_pinpoint
	clr_character_flag = adv_its_a_trap
	clr_character_flag = adv_strange_magic
	clr_character_flag = adv_met_mercs
	clr_character_flag = adv_cave_in
	clr_character_flag = adv_passive_monster
	clr_character_flag = adv_talked_mercs
	clr_character_flag = adv_drugged_supplies
	clr_character_flag = adv_diversion
	clr_character_flag = adv_blend_in
	clr_character_flag = adv_nosy_priests
	clr_character_flag = party_member_1
	clr_character_flag = party_member_2
	clr_character_flag = party_member_3
	clr_character_flag = party_member_4
	clr_character_flag = party_member_1_ai_pick
	clr_character_flag = party_member_2_ai_pick
	clr_character_flag = party_member_3_ai_pick
	clr_character_flag = party_member_4_ai_pick
	remove_trait = travelling
}
