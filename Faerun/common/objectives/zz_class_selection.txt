# Supported types:
# character, spouse, rivals, friends, liege_titles, vassal_titles, realm_titles, realm_characters, realm_characters_plus, independent_rulers


# Misc Ambitions

obj_cls_wizard = {
	type = character
	
	allow = {
		is_adult = yes
		NOT = { trait = legendary_wizard }
		NOT = {
			#z_artificer = yes
			z_sorcerer = yes
			z_warlock = yes
		}
		NOR = {
			has_character_modifier = class_cd
			trait = incapable
		}
		NOR = {
			trait = dim
			trait = dumb
			trait = slow
			trait = idiot
			trait = imbecile
			trait = dull
			trait = inbred
		}
		OR = {
			NOT = { trait = creature_beholder }
			AND = {
				trait = creature_beholder
				OR = {
					trait = one_eyed
					trait = blinded
				}
			}
		}
		learning = 5
	}
	chance = {
		factor = 40
		modifier = {
			factor = 0.01
			NOT = { z_wizard = yes }
			z_has_class = yes
		}
		modifier = {
			factor = 0
			trait = stressed
		}
		modifier = {
			factor = 0.25
			trait = depressed
		}
		modifier = {
			factor = 0.5
			trait = slothful
		}
		modifier = {
			factor = 0.5
			trait = content
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = diligent
				trait = ambitious
			}
		}
		modifier = {
			factor = 2.0
			trait = erudite
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = brilliant
				trait = genius
				trait = quick
				trait = smart
				trait = bright
				trait = shrewd
			}
		}
		modifier = {
			factor = 2.0
			trait = patient
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = detached_priest
				trait = martial_cleric
				trait = scholarly_theologian
				trait = mastermind_theologian
			}
		}
		modifier = {
			factor = 3.0
			trait = scholar
		}
		modifier = {
			factor = 3.0
			government = magocratic_feudal_government
		}
	}
	success = {
		hidden_tooltip = {
			OR = {
				AND = {
					has_character_flag = tier1
					trait = trained_wizard
				}
				AND = {
					has_character_flag = tier2
					trait = journeyman_wizard
				}
				AND = {
					has_character_flag = tier3
					trait = expert_wizard
				}
				AND = {
					has_character_flag = tier4
					trait = master_wizard
				}
				AND = {
					has_character_flag = tier5
					trait = renowned_wizard
				}
				AND = {
					has_character_flag = tier6
					trait = legendary_wizard
				}
			}
		}
		custom_tooltip = {
			text = GAIN_CLASS_LEVEL
		}
	}
	effect = {
		prestige = 50
		add_character_modifier = { name = class_cd years = 3 hidden = yes}
		clr_character_flag = tier1
		clr_character_flag = tier2
		clr_character_flag = tier3
		clr_character_flag = tier4
		clr_character_flag = tier5
		clr_character_flag = tier6
	}
	abort = {
		trait = incapable
	}
	abort_effect = {
		prestige = -10
	}
	creation_effect = {
		if = {
			limit = {
				NOT = {
					trait = wizard
					trait = trained_wizard
					trait = journeyman_wizard
					trait = expert_wizard
					trait = master_wizard
					trait = renowned_wizard
					trait = legendary_wizard
				}
			}
			add_trait = wizard
			character_event = { id = wizinit.1 }
			if = {
				limit = { ai = no }
				long_character_event = { id = wizinit.3 }
			}
		}
		trigger_switch = {
			on_trigger = trait
			wizard = { set_character_flag = tier1 }
			trained_wizard = { set_character_flag = tier2 }
			journeyman_wizard = { set_character_flag = tier3 }
			expert_wizard = { set_character_flag = tier4 }
			master_wizard = { set_character_flag = tier5 }
			renowned_wizard = { set_character_flag = tier6 }
		}
		character_event = { id = tbxp.1 }
	}
}

obj_cls_bard = {
	type = character
	
	allow = {
		is_adult = yes
		NOT = { trait = legendary_bard }
		NOT = {
			z_shadow = yes
			z_rogue = yes
		}
		NOR = { 
			has_character_modifier = class_cd
			trait = incapable
		}
		NOR = {
			trait = inbred
			trait = slow
			trait = idiot
			trait = imbecile
			trait = uncouth
			trait = lisp
			trait = one_handed
		}
		OR = {
			NOT = { trait = creature_beholder }
			AND = {
				trait = creature_beholder
				OR = {
					trait = one_eyed
					trait = blinded
				}
			}
		}
		#If any religions get ascetic features, place them here
		diplomacy = 5
	}
	chance = {
		factor = 40
		modifier = {
			factor = 0.01
			NOT = { z_bard = yes }
			z_has_class = yes
		}
		modifier = {
			factor = 0
			trait = stressed
		}
		modifier = {
			factor = 0.25
			trait = depressed
		}
		modifier = {
			factor = 0.5
			trait = slothful
		}
		modifier = {
			factor = 2.0
			trait = diligent
		}
		modifier = {
			factor = 0.25
			trait = shy
		}
		modifier = {
			factor = 0.2
			trait = disfigured
		}
		modifier = {
			factor = 2.0
			trait = shrewd
		}
		modifier = {
			factor = 3.0
			trait = socializer
		}
		modifier = {
			factor = 3.0
			trait = gregarious
		}
		modifier = {
			factor = 2.5
			OR = {
				trait = naive_appeaser
				trait = underhanded_rogue
				trait = charismatic_negotiator
				trait = grey_eminence
				trait = amateurish_plotter
				trait = flamboyant_schemer
				trait = intricate_webweaver
				trait = elusive_shadow
			}
		}
		modifier = {
			factor = 0.1
			trait = possessed
		}
	}
	success = {
		hidden_tooltip = {
			OR = {
				AND = {
					has_character_flag = tier1
					trait = trained_bard
				}
				AND = {
					has_character_flag = tier2
					trait = journeyman_bard
				}
				AND = {
					has_character_flag = tier3
					trait = expert_bard
				}
				AND = {
					has_character_flag = tier4
					trait = master_bard
				}
				AND = {
					has_character_flag = tier5
					trait = renowned_bard
				}
				AND = {
					has_character_flag = tier6
					trait = legendary_bard
				}
			}
		}
		custom_tooltip = {
			text = GAIN_CLASS_LEVEL
		}
	}
	effect = {
		prestige = 50
		add_character_modifier = { name = class_cd years = 3 hidden = yes}
		clr_character_flag = tier1
		clr_character_flag = tier2
		clr_character_flag = tier3
		clr_character_flag = tier4
		clr_character_flag = tier5
		clr_character_flag = tier6
	}
	abort = {
		trait = incapable
	}
	abort_effect = {
		prestige = -10
	}
	creation_effect = {
		if = {
			limit = {
				NOT = {
					trait = bard
					trait = trained_bard
					trait = journeyman_bard
					trait = expert_bard
					trait = master_bard
					trait = renowned_bard
					trait = legendary_bard
				}
			}
			add_trait = bard
		}
		trigger_switch = {
			on_trigger = trait
			bard = { set_character_flag = tier1 }
			trained_bard = { set_character_flag = tier2 }
			journeyman_bard = { set_character_flag = tier3 }
			expert_bard = { set_character_flag = tier4 }
			master_bard = { set_character_flag = tier5 }
			renowned_bard = { set_character_flag = tier6 }
		}
		character_event = { id = tbxp.1 }
	}
}

obj_cls_warlock = {
	type = character
	
	allow = {
		is_adult = yes
		NOT = { trait = legendary_warlock }
		NOT = {
			z_wizard = yes
			#z_artificer = yes
			z_sorcerer = yes
		}
		NOR = { 
			has_character_modifier = class_cd
			trait = incapable
		}
		NOR = {
			trait = dim
			trait = dumb
			trait = slow
			trait = idiot
			trait = imbecile
			trait = dull
			trait = inbred
		}
		OR = {
			NOT = { trait = creature_beholder }
			AND = {
				trait = creature_beholder
				OR = {
					trait = one_eyed
					trait = blinded
				}
			}
		}
		learning = 5
	}
	chance = {
		factor = 40
		modifier = {
			factor = 0.01
			NOT = { z_warlock = yes }
			z_has_class = yes
		}
		modifier = {
			factor = 0
			trait = stressed
		}
		modifier = {
			factor = 0.25
			trait = depressed
		}
		modifier = {
			factor = 2.0
			trait = cynical
		}
		modifier = {
			factor = 0.5
			trait = humble
		}
		modifier = {
			factor = 3.0
			trait = ambitious
		}
		modifier = {
			factor = 0.3
			trait = content
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = brilliant
				trait = genius
				trait = quick
				trait = smart
				trait = bright
				trait = shrewd
			}
		}
		modifier = {
			factor = 2.0
			trait = proud
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = detached_priest
				trait = martial_cleric
				trait = scholarly_theologian
				trait = mastermind_theologian
			}
		}
		modifier = {
			factor = 2.0
			trait = mystic
		}
		modifier = {
			factor = 1.5
			trait = wroth
		}
		modifier = {
			factor = 3.0
			government = magocratic_feudal_government
		}
	}
	success = {
		hidden_tooltip = {
			OR = {
				AND = {
					has_character_flag = tier1
					trait = trained_warlock
				}
				AND = {
					has_character_flag = tier2
					trait = journeyman_warlock
				}
				AND = {
					has_character_flag = tier3
					trait = expert_warlock
				}
				AND = {
					has_character_flag = tier4
					trait = master_warlock
				}
				AND = {
					has_character_flag = tier5
					trait = renowned_warlock
				}
				AND = {
					has_character_flag = tier6
					trait = legendary_warlock
				}
			}
		}
		custom_tooltip = {
			text = GAIN_CLASS_LEVEL
		}
	}
	effect = {
		prestige = 50
		add_character_modifier = { name = class_cd years = 3 hidden = yes}
		clr_character_flag = tier1
		clr_character_flag = tier2
		clr_character_flag = tier3
		clr_character_flag = tier4
		clr_character_flag = tier5
		clr_character_flag = tier6
	}
	abort = {
		trait = incapable
	}
	abort_effect = {
		prestige = -10
	}
	creation_effect = {
		if = {
			limit = {
				NOT = {
					trait = warlock
					trait = trained_warlock
					trait = journeyman_warlock
					trait = expert_warlock
					trait = master_warlock
					trait = renowned_warlock
					trait = legendary_warlock
				}
			}
			add_trait = warlock
		}
		trigger_switch = {
			on_trigger = trait
			warlock = { set_character_flag = tier1 }
			trained_warlock = { set_character_flag = tier2 }
			journeyman_warlock = { set_character_flag = tier3 }
			expert_warlock = { set_character_flag = tier4 }
			master_warlock = { set_character_flag = tier5 }
			renowned_warlock = { set_character_flag = tier6 }
		}
		character_event = { id = tbxp.1 }
	}
}

obj_cls_sorcerer = {
	type = character
	
	allow = {
		is_adult = yes
		has_character_flag = sorc_originrevealed
		evilcat_has_sorc_origin = yes
		NOT = { trait = legendary_sorcerer }
		NOT = {
			#z_artificer = yes
			z_wizard = yes
			z_warlock = yes
		}
		NOR = {
			has_character_modifier = class_cd
			trait = incapable
		}
		NOR = {
			trait = dim
			trait = dumb
			trait = slow
			trait = idiot
			trait = imbecile
			trait = dull
			trait = inbred
		}
		OR = {
			NOT = { trait = creature_beholder }
			AND = {
				trait = creature_beholder
				OR = {
					trait = one_eyed
					trait = blinded
				}
			}
		}
		learning = 5
		#later add the sorcerous origins here
	}
	chance = {
		factor = 40
		modifier = {
			factor = 0.01
			NOT = { z_sorcerer = yes }
			z_has_class = yes
		}
		modifier = {
			factor = 0
			trait = stressed
		}
		modifier = {
			factor = 0.25
			trait = depressed
		}
		modifier = {
			factor = 0.5
			trait = slothful
		}
		modifier = {
			factor = 0.5
			trait = humble
		}
		modifier = {
			factor = 2.0
			trait = diligent
		}
		modifier = {
			factor = 3.0
			trait = ambitious
		}
		modifier = {
			factor = 0.3
			trait = content
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = brilliant
				trait = genius
				trait = quick
				trait = smart
				trait = bright
				trait = shrewd
			}
		}
		modifier = {
			factor = 2.0
			trait = proud
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = detached_priest
				trait = martial_cleric
				trait = scholarly_theologian
				trait = mastermind_theologian
			}
		}
		modifier = {
			factor = 2.0
			trait = mystic
		}
		modifier = {
			factor = 1.5
			trait = wroth
		}
		modifier = {
			factor = 3.0
			government = magocratic_feudal_government
		}
	}
	success = {
		hidden_tooltip = {
			OR = {
				AND = {
					has_character_flag = tier1
					trait = trained_sorcerer
				}
				AND = {
					has_character_flag = tier2
					trait = journeyman_sorcerer
				}
				AND = {
					has_character_flag = tier3
					trait = expert_sorcerer
				}
				AND = {
					has_character_flag = tier4
					trait = master_sorcerer
				}
				AND = {
					has_character_flag = tier5
					trait = renowned_sorcerer
				}
				AND = {
					has_character_flag = tier6
					trait = legendary_sorcerer
				}
			}
		}
		custom_tooltip = {
			text = GAIN_CLASS_LEVEL
		}
	}
	effect = {
		prestige = 50
		add_character_modifier = { name = class_cd years = 3 hidden = yes}
		clr_character_flag = tier1
		clr_character_flag = tier2
		clr_character_flag = tier3
		clr_character_flag = tier4
		clr_character_flag = tier5
		clr_character_flag = tier6
	}
	abort = {
		trait = incapable
	}
	abort_effect = {
		prestige = -10
	}
	creation_effect = {
		if = {
			limit = {
				NOT = {
					trait = sorcerer
					trait = trained_sorcerer
					trait = journeyman_sorcerer
					trait = expert_sorcerer
					trait = master_sorcerer
					trait = renowned_sorcerer
					trait = legendary_sorcerer
				}
			}
			add_trait = sorcerer
		}
		trigger_switch = {
			on_trigger = trait
			sorcerer = { set_character_flag = tier1 }
			trained_sorcerer = { set_character_flag = tier2 }
			journeyman_sorcerer = { set_character_flag = tier3 }
			expert_sorcerer = { set_character_flag = tier4 }
			master_sorcerer = { set_character_flag = tier5 }
			renowned_sorcerer = { set_character_flag = tier6 }
		}
		character_event = { id = tbxp.1 }
	}
}

obj_cls_paladin = {
	type = character
	
	allow = {
		is_adult = yes
		NOT = { trait = legendary_paladin }
		NOT = { religion = faithless }
		NOT = {
			z_cleric = yes
			z_druid = yes
		}
		NOR = {
			has_character_modifier = class_cd
			trait = incapable
		}
		NOR = {
			trait = inbred
			trait = weak
			trait = soft
			trait = feeble
			trait = cynical
		}
		martial = 5
		learning = 3
	}
	chance = {
		factor = 40
		modifier = {
			factor = 0.01
			NOT = { z_shadow = yes }
			z_has_class = yes
		}
		modifier = {
			factor = 0
			trait = stressed
		}
		modifier = {
			factor = 0.25
			trait = depressed
		}
		modifier = {
			factor = 2.0
			trait = diligent
		}
		modifier = {
			factor = 0.2
			trait = slothful
		}
		modifier = {
			factor = 3.0
			trait = patient
		}
		modifier = {
			factor = 2.0
			trait = wroth
		}
		modifier = {
			factor = 2.0
			trait = duelist
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = sturdy
				trait = robust
				trait = tough
				trait = strong
				trait = hardy
			}
		}
		modifier = {
			factor = 2.5
			trait = zealous
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = misguided_warrior
				trait = tough_soldier
				trait = skilled_tactician
				trait = brilliant_strategist
				trait = detached_priest
				trait = martial_cleric
				trait = scholarly_theologian
				trait = mastermind_theologian
			}
		}
		modifier = {
			factor = 2.0
			trait = theologian
		}
		modifier = {
			factor = 0.5
			trait = gluttonous
		}
		modifier = {
			factor = 0.2
			trait = drunkard
		}
		modifier = {
			factor = 0.1
			OR = {
				trait = one_handed
				trait = one_legged
				trait = mangled
				trait = maimed
			}
		}
		modifier = {
			factor = 2.0
			OR = {
				government = divine_feudal_government
				government = theocracy_government
			}
		}
	}
	success = {
		hidden_tooltip = {
			OR = {
				AND = {
					has_character_flag = tier1
					trait = trained_paladin
				}
				AND = {
					has_character_flag = tier2
					trait = journeyman_paladin
				}
				AND = {
					has_character_flag = tier3
					trait = expert_paladin
				}
				AND = {
					has_character_flag = tier4
					trait = master_paladin
				}
				AND = {
					has_character_flag = tier5
					trait = renowned_paladin
				}
				AND = {
					has_character_flag = tier6
					trait = legendary_paladin
				}
			}
		}
		custom_tooltip = {
			text = GAIN_CLASS_LEVEL
		}
	}
	effect = {
		prestige = 50
		add_character_modifier = { name = class_cd years = 3 hidden = yes}
		clr_character_flag = tier1
		clr_character_flag = tier2
		clr_character_flag = tier3
		clr_character_flag = tier4
		clr_character_flag = tier5
		clr_character_flag = tier6
	}
	abort = {
		trait = incapable
	}
	abort_effect = {
		prestige = -10
	}
	creation_effect = {
		if = {
			limit = {
				NOT = {
					trait = paladin
					trait = trained_paladin
					trait = journeyman_paladin
					trait = expert_paladin
					trait = master_paladin
					trait = renowned_paladin
					trait = legendary_paladin
				}
			}
			add_trait = paladin
		}
		trigger_switch = {
			on_trigger = trait
			paladin = { set_character_flag = tier1 }
			trained_paladin = { set_character_flag = tier2 }
			journeyman_paladin = { set_character_flag = tier3 }
			expert_paladin = { set_character_flag = tier4 }
			master_paladin = { set_character_flag = tier5 }
			renowned_paladin = { set_character_flag = tier6 }
		}
		character_event = { id = tbxp.1 }
	}
}

obj_cls_cleric = {
	type = character
	
	allow = {
		is_adult = yes
		NOT = { trait = legendary_cleric }
		NOT = { religion = faithless }
		NOT = {
			z_paladin = yes
			z_druid = yes
		}
		NOR = {
			has_character_modifier = class_cd
			trait = incapable
		}
		NOR = {
			trait = cynical
			trait = inbred
			trait = idiot
			trait = imbecile
		}
		learning = 5
		#Probably require having a patron deity
	}
	chance = {
		factor = 40
		modifier = {
			factor = 0.01
			NOT = { z_cleric = yes }
			z_has_class = yes
		}
		modifier = {
			factor = 0
			trait = stressed
		}
		modifier = {
			factor = 0.25
			trait = depressed
		}
		modifier = {
			factor = 4.0
			trait = zealous
		}
		modifier = {
			factor = 3.0
			OR = {
				trait = detached_priest
				trait = martial_cleric
				trait = scholarly_theologian
				trait = mastermind_theologian
			}
		}
		modifier = {
			factor = 3.0
			trait = theologian
		}
		modifier = {
			factor = 2.0
			trait = mystic
		}
		modifier = {
			factor = 2.0
			OR = {
				government = divine_feudal_government
				government = theocracy_government
			}
		}
	}
	success = {
		hidden_tooltip = {
			OR = {
				AND = {
					has_character_flag = tier1
					trait = trained_cleric
				}
				AND = {
					has_character_flag = tier2
					trait = journeyman_cleric
				}
				AND = {
					has_character_flag = tier3
					trait = expert_cleric
				}
				AND = {
					has_character_flag = tier4
					trait = master_cleric
				}
				AND = {
					has_character_flag = tier5
					trait = renowned_cleric
				}
				AND = {
					has_character_flag = tier6
					trait = legendary_cleric
				}
			}
		}
		custom_tooltip = {
			text = GAIN_CLASS_LEVEL
		}
	}
	effect = {
		prestige = 50
		add_character_modifier = { name = class_cd years = 3 hidden = yes}
		clr_character_flag = tier1
		clr_character_flag = tier2
		clr_character_flag = tier3
		clr_character_flag = tier4
		clr_character_flag = tier5
		clr_character_flag = tier6
	}
	abort = {
		trait = incapable
	}
	abort_effect = {
		prestige = -10
	}
	creation_effect = {
		if = {
			limit = {
				NOT = {
					trait = cleric
					trait = trained_cleric
					trait = journeyman_cleric
					trait = expert_cleric
					trait = master_cleric
					trait = renowned_cleric
					trait = legendary_cleric
				}
			}
			add_trait = cleric
		}
		trigger_switch = {
			on_trigger = trait
			cleric = { set_character_flag = tier1 }
			trained_cleric = { set_character_flag = tier2 }
			journeyman_cleric = { set_character_flag = tier3 }
			expert_cleric = { set_character_flag = tier4 }
			master_cleric = { set_character_flag = tier5 }
			renowned_cleric = { set_character_flag = tier6 }
		}
		character_event = { id = tbxp.1 }
	}
}

obj_cls_druid = {
	type = character
	
	allow = {
		is_adult = yes
		NOT = { trait = legendary_druid }
		NOT = { religion = faithless }
		NOT = {
			z_paladin = yes
			z_cleric = yes
		}
		NOR = {
			has_character_modifier = class_cd
			trait = incapable
		}
		NOR = {
			trait = cynical
			trait = inbred
			trait = idiot
			trait = imbecile
		}
		learning = 5
		stewardship = 3
	}
	chance = {
		factor = 40
		modifier = {
			factor = 0.01
			NOT = { z_druid = yes }
			z_has_class = yes
		}
		modifier = {
			factor = 0
			trait = stressed
		}
		modifier = {
			factor = 0.25
			trait = depressed
		}
		modifier = {
			factor = 4.0
			trait = zealous
		}
		modifier = {
			factor = 3.0
			OR = {
				trait = detached_priest
				trait = martial_cleric
				trait = scholarly_theologian
				trait = mastermind_theologian
			}
		}
		modifier = {
			factor = 2.0
			trait = gardener
		}
		modifier = {
			factor = 2.0
			trait = theologian
		}
		modifier = {
			factor = 2.0
			trait = mystic
		}
		modifier = {
			factor = 2.0
			OR = {
				government = divine_feudal_government
				government = theocracy_government
			}
		}
	}
	success = {
		hidden_tooltip = {
			OR = {
				AND = {
					has_character_flag = tier1
					trait = trained_druid
				}
				AND = {
					has_character_flag = tier2
					trait = journeyman_druid
				}
				AND = {
					has_character_flag = tier3
					trait = expert_druid
				}
				AND = {
					has_character_flag = tier4
					trait = master_druid
				}
				AND = {
					has_character_flag = tier5
					trait = renowned_druid
				}
				AND = {
					has_character_flag = tier6
					trait = legendary_druid
				}
			}
		}
		custom_tooltip = {
			text = GAIN_CLASS_LEVEL
		}
	}
	effect = {
		prestige = 50
		add_character_modifier = { name = class_cd years = 3 hidden = yes}
		clr_character_flag = tier1
		clr_character_flag = tier2
		clr_character_flag = tier3
		clr_character_flag = tier4
		clr_character_flag = tier5
		clr_character_flag = tier6
	}
	abort = {
		trait = incapable
	}
	abort_effect = {
		prestige = -10
	}
	creation_effect = {
		if = {
			limit = {
				NOT = {
					trait = druid
					trait = trained_druid
					trait = journeyman_druid
					trait = expert_druid
					trait = master_druid
					trait = renowned_druid
					trait = legendary_druid
				}
			}
			add_trait = druid
		}
		trigger_switch = {
			on_trigger = trait
			druid = { set_character_flag = tier1 }
			trained_druid = { set_character_flag = tier2 }
			journeyman_druid = { set_character_flag = tier3 }
			expert_druid = { set_character_flag = tier4 }
			master_druid = { set_character_flag = tier5 }
			renowned_druid = { set_character_flag = tier6 }
		}
		character_event = { id = tbxp.1 }
	}
}

obj_cls_fighter = {
	type = character
	
	allow = {
		is_adult = yes
		NOT = { trait = legendary_fighter }
		NOT = {
			z_monk = yes
			z_ranger = yes
			z_barbarian = yes
		}
		NOR = {
			has_character_modifier = class_cd
			trait = incapable
		}
		NOR = {
			trait = inbred
			trait = weak
			trait = soft
			trait = feeble
		}
		martial = 5
	}
	chance = {
		factor = 40
		modifier = {
			factor = 0.01
			NOT = { z_fighter = yes }
			z_has_class = yes
		}
		modifier = {
			factor = 0
			trait = stressed
		}
		modifier = {
			factor = 0.25
			trait = depressed
		}
		modifier = {
			factor = 2.0
			trait = diligent
		}
		modifier = {
			factor = 0.2
			trait = slothful
		}
		modifier = {
			factor = 3.0
			trait = brave
		}
		modifier = {
			factor = 2.0
			trait = wroth
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = sturdy
				trait = robust
				trait = tough
				trait = strong
				trait = hardy
			}
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = misguided_warrior
				trait = tough_soldier
				trait = skilled_tactician
				trait = brilliant_strategist
			}
		}
		modifier = {
			factor = 2.0
			trait = duelist
		}
		modifier = {
			factor = 2.0
			trait = strategist
		}
		modifier = {
			factor = 0.1
			OR = {
				trait = one_handed
				trait = one_legged
				trait = mangled
				trait = maimed
			}
		}
	}
	success = {
		hidden_tooltip = {
			OR = {
				AND = {
					has_character_flag = tier1
					trait = trained_fighter
				}
				AND = {
					has_character_flag = tier2
					trait = journeyman_fighter
				}
				AND = {
					has_character_flag = tier3
					trait = expert_fighter
				}
				AND = {
					has_character_flag = tier4
					trait = master_fighter
				}
				AND = {
					has_character_flag = tier5
					trait = renowned_fighter
				}
				AND = {
					has_character_flag = tier6
					trait = legendary_fighter
				}
			}
		}
		custom_tooltip = {
			text = GAIN_CLASS_LEVEL
		}
	}
	effect = {
		prestige = 50
		add_character_modifier = { name = class_cd years = 3 hidden = yes}
		clr_character_flag = tier1
		clr_character_flag = tier2
		clr_character_flag = tier3
		clr_character_flag = tier4
		clr_character_flag = tier5
		clr_character_flag = tier6
	}
	abort = {
		trait = incapable
	}
	abort_effect = {
		prestige = -10
	}
	creation_effect = {
		if = {
			limit = {
				NOT = {
					trait = fighter
					trait = trained_fighter
					trait = journeyman_fighter
					trait = expert_fighter
					trait = master_fighter
					trait = renowned_fighter
					trait = legendary_fighter
				}
			}
			add_trait = fighter
		}
		trigger_switch = {
			on_trigger = trait
			fighter = { set_character_flag = tier1 }
			trained_fighter = { set_character_flag = tier2 }
			journeyman_fighter = { set_character_flag = tier3 }
			expert_fighter = { set_character_flag = tier4 }
			master_fighter = { set_character_flag = tier5 }
			renowned_fighter = { set_character_flag = tier6 }
		}
		character_event = { id = tbxp.1 }
	}
}

obj_cls_barbarian = {
	type = character
	
	allow = {
		is_adult = yes
		NOT = { trait = legendary_barbarian }
		NOT = {
			z_fighter = yes
			z_monk = yes
			z_ranger = yes
		}
		NOR = { 
			has_character_modifier = class_cd
			trait = incapable
		}
		NOR = {
			trait = inbred
			trait = weak
			trait = soft
			trait = feeble
		}
		martial = 5
	}
	chance = {
		factor = 40
		modifier = {
			factor = 0.01
			NOT = { z_barbarian = yes }
			z_has_class = yes
		}
		modifier = {
			factor = 0
			trait = stressed
		}
		modifier = {
			factor = 0.25
			trait = depressed
		}
		modifier = {
			factor = 2.0
			trait = diligent
		}
		modifier = {
			factor = 0.2
			trait = slothful
		}
		modifier = {
			factor = 3.0
			trait = brave
		}
		modifier = {
			factor = 3.0
			trait = wroth
		}
		modifier = {
			factor = 3.0
			trait = berserker
		}
		modifier = {
			factor = 2.0
			trait = stubborn
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = sturdy
				trait = robust
				trait = tough
				trait = strong
				trait = hardy
			}
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = misguided_warrior
				trait = tough_soldier
				trait = skilled_tactician
				trait = brilliant_strategist
			}
		}
		modifier = {
			factor = 2.0
			trait = duelist
		}
		modifier = {
			factor = 2.0
			trait = hunter
		}
		modifier = {
			factor = 0.1
			OR = {
				trait = one_handed
				trait = one_legged
				trait = mangled
				trait = maimed
			}
		}
	}
	success = {
		hidden_tooltip = {
			OR = {
				AND = {
					has_character_flag = tier1
					trait = trained_barbarian
				}
				AND = {
					has_character_flag = tier2
					trait = journeyman_barbarian
				}
				AND = {
					has_character_flag = tier3
					trait = expert_barbarian
				}
				AND = {
					has_character_flag = tier4
					trait = master_barbarian
				}
				AND = {
					has_character_flag = tier5
					trait = renowned_barbarian
				}
				AND = {
					has_character_flag = tier6
					trait = legendary_barbarian
				}
			}
		}
		custom_tooltip = {
			text = GAIN_CLASS_LEVEL
		}
	}
	effect = {
		prestige = 50
		add_character_modifier = { name = class_cd years = 3 hidden = yes}
		clr_character_flag = tier1
		clr_character_flag = tier2
		clr_character_flag = tier3
		clr_character_flag = tier4
		clr_character_flag = tier5
		clr_character_flag = tier6
	}
	abort = {
		trait = incapable
	}
	abort_effect = {
		prestige = -10
	}
	creation_effect = {
		if = {
			limit = {
				NOT = {
					trait = barbarian
					trait = trained_barbarian
					trait = journeyman_barbarian
					trait = expert_barbarian
					trait = master_barbarian
					trait = renowned_barbarian
					trait = legendary_barbarian
				}
			}
			add_trait = barbarian
		}
		trigger_switch = {
			on_trigger = trait
			barbarian = { set_character_flag = tier1 }
			trained_barbarian = { set_character_flag = tier2 }
			journeyman_barbarian = { set_character_flag = tier3 }
			expert_barbarian = { set_character_flag = tier4 }
			master_barbarian = { set_character_flag = tier5 }
			renowned_barbarian = { set_character_flag = tier6 }
		}
		character_event = { id = tbxp.1 }
	}
}

obj_cls_ranger = {
	type = character
	
	allow = {
		is_adult = yes
		NOT = { trait = legendary_ranger }
		NOT = {
			z_fighter = yes
			z_barbarian = yes
			z_monk = yes
		}
		NOR = { 
			has_character_modifier = class_cd
			trait = incapable
		}
		NOR = {
			trait = inbred
			trait = weak
			trait = soft
			trait = feeble
		}
		martial = 5
		OR = {
			intrigue = 3
			stewardship = 3
		}
	}
	chance = {
		factor = 40
		modifier = {
			factor = 0.01
			NOT = { z_ranger = yes }
			z_has_class = yes
		}
		modifier = {
			factor = 0
			trait = stressed
		}
		modifier = {
			factor = 0.25
			trait = depressed
		}
		modifier = {
			factor = 2.0
			trait = diligent
		}
		modifier = {
			factor = 0.2
			trait = slothful
		}
		modifier = {
			factor = 3.0
			trait = brave
		}
		modifier = {
			factor = 2.0
			trait = temperate
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = sturdy
				trait = robust
				trait = tough
				trait = strong
				trait = hardy
			}
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = misguided_warrior
				trait = tough_soldier
				trait = skilled_tactician
				trait = brilliant_strategist
			}
		}
		modifier = {
			factor = 2.0
			trait = duelist
		}
		modifier = {
			factor = 2.0
			trait = hunter
		}
		modifier = {
			factor = 2.0
			trait = gardener
		}
		modifier = {
			factor = 0.1
			OR = {
				trait = one_handed
				trait = one_legged
				trait = mangled
				trait = maimed
			}
		}
	}
	success = {
		hidden_tooltip = {
			OR = {
				AND = {
					has_character_flag = tier1
					trait = trained_ranger
				}
				AND = {
					has_character_flag = tier2
					trait = journeyman_ranger
				}
				AND = {
					has_character_flag = tier3
					trait = expert_ranger
				}
				AND = {
					has_character_flag = tier4
					trait = master_ranger
				}
				AND = {
					has_character_flag = tier5
					trait = renowned_ranger
				}
				AND = {
					has_character_flag = tier6
					trait = legendary_ranger
				}
			}
		}
		custom_tooltip = {
			text = GAIN_CLASS_LEVEL
		}
	}
	effect = {
		prestige = 50
		add_character_modifier = { name = class_cd years = 3 hidden = yes}
		clr_character_flag = tier1
		clr_character_flag = tier2
		clr_character_flag = tier3
		clr_character_flag = tier4
		clr_character_flag = tier5
		clr_character_flag = tier6
	}
	abort = {
		trait = incapable
	}
	abort_effect = {
		prestige = -10
	}
	creation_effect = {
		if = {
			limit = {
				NOT = {
					trait = ranger
					trait = trained_ranger
					trait = journeyman_ranger
					trait = expert_ranger
					trait = master_ranger
					trait = renowned_ranger
					trait = legendary_ranger
				}
			}
			add_trait = ranger
		}
		trigger_switch = {
			on_trigger = trait
			ranger = { set_character_flag = tier1 }
			trained_ranger = { set_character_flag = tier2 }
			journeyman_ranger = { set_character_flag = tier3 }
			expert_ranger = { set_character_flag = tier4 }
			master_ranger = { set_character_flag = tier5 }
			renowned_ranger = { set_character_flag = tier6 }
		}
		character_event = { id = tbxp.1 }
	}
}


obj_cls_monk = {
	type = character
	
	allow = {
		is_adult = yes
		NOT = { trait = legendary_monk }
		NOT = {
			z_fighter = yes
			z_barbarian = yes
			z_ranger = yes
		}
		NOR = {
			has_character_modifier = class_cd
			trait = incapable
		}
		NOR = {
			trait = inbred
			trait = weak
			trait = soft
			trait = feeble
		}
		learning = 5
		martial = 3
	}
	chance = {
		factor = 40
		modifier = {
			factor = 0.01
			NOT = { z_monk = yes }
			z_has_class = yes
		}
		modifier = {
			factor = 0
			trait = stressed
		}
		modifier = {
			factor = 0.25
			trait = depressed
		}
		modifier = {
			factor = 2.0
			trait = diligent
		}
		modifier = {
			factor = 0.2
			trait = slothful
		}
		modifier = {
			factor = 3.0
			trait = patient
		}
		modifier = {
			factor = 2.0
			trait = humble
		}
		modifier = {
			factor = 2.0
			trait = temperate
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = sturdy
				trait = robust
				trait = tough
				trait = strong
				trait = hardy
			}
		}
		modifier = {
			factor = 2.5
			trait = zealous
		}
		modifier = {
			factor = 0.1
			trait = cynical
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = detached_priest
				trait = martial_cleric
				trait = scholarly_theologian
				trait = mastermind_theologian
			}
		}
		modifier = {
			factor = 2.0
			trait = theologian
		}
		modifier = {
			factor = 2.0
			trait = mystic
		}
		modifier = {
			factor = 0.5
			trait = hedonist
		}
		modifier = {
			factor = 0.5
			trait = gluttonous
		}
		modifier = {
			factor = 0.2
			trait = drunkard
		}
		modifier = {
			factor = 0.1
			OR = {
				trait = one_handed
				trait = one_legged
				trait = mangled
				trait = maimed
			}
		}
		modifier = {
			factor = 2.0
			OR = {
				government = divine_feudal_government
				government = theocracy_government
			}
		}		
	}
	success = {
		hidden_tooltip = {
			OR = {
				AND = {
					has_character_flag = tier1
					trait = trained_monk
				}
				AND = {
					has_character_flag = tier2
					trait = journeyman_monk
				}
				AND = {
					has_character_flag = tier3
					trait = expert_monk
				}
				AND = {
					has_character_flag = tier4
					trait = master_monk
				}
				AND = {
					has_character_flag = tier5
					trait = renowned_monk
				}
				AND = {
					has_character_flag = tier6
					trait = legendary_monk
				}
			}
		}
		custom_tooltip = {
			text = GAIN_CLASS_LEVEL
		}
	}
	effect = {
		prestige = 50
		add_character_modifier = { name = class_cd years = 3 hidden = yes}
		clr_character_flag = tier1
		clr_character_flag = tier2
		clr_character_flag = tier3
		clr_character_flag = tier4
		clr_character_flag = tier5
		clr_character_flag = tier6
	}
	abort = {
		trait = incapable
	}
	abort_effect = {
		prestige = -10
	}
	creation_effect = {
		if = {
			limit = {
				NOT = {
					trait = monk
					trait = trained_monk
					trait = journeyman_monk
					trait = expert_monk
					trait = master_monk
					trait = renowned_monk
					trait = legendary_monk
				}
			}
			add_trait = class_monk
		}
		trigger_switch = {
			on_trigger = trait
			class_monk = { set_character_flag = tier1 }
			trained_monk = { set_character_flag = tier2 }
			journeyman_monk = { set_character_flag = tier3 }
			expert_monk = { set_character_flag = tier4 }
			master_monk = { set_character_flag = tier5 }
			renowned_monk = { set_character_flag = tier6 }
		}
		character_event = { id = tbxp.1 }
	}
}

obj_cls_rogue = {
	type = character
	
	allow = {
		is_adult = yes
		NOT = { trait = legendary_rogue }
		NOT = {
			z_bard = yes
			z_shadow = yes
		}
		NOR = {
			has_character_modifier = class_cd
			trait = incapable
		}
		NOR = {
			trait = idiot
			trait = imbecile
			trait = inbred
		}
		intrigue = 5
	}
	chance = {
		factor = 40
		modifier = {
			factor = 0.01
			NOT = { z_rogue = yes }
			z_has_class = yes
		}
		modifier = {
			factor = 0
			trait = stressed
		}
		modifier = {
			factor = 0.25
			trait = depressed
		}
		modifier = {
			factor = 2.0
			trait = diligent
		}
		modifier = {
			factor = 0.2
			trait = trusting
		}
		modifier = {
			factor = 0.8
			trait = content
		}
		modifier = {
			factor = 0.6
			trait = just
		}
		modifier = {
			factor = 2.0
			trait = ambitious
		}
		modifier = {
			factor = 2.0
			trait = paranoid
		}
		modifier = {
			factor = 3.0
			trait = deceitful
		}
		modifier = {
			factor = 2.0
			trait = arbitrary
		}
		modifier = {
			factor = 3.0
			OR = {
				trait = amateurish_plotter
				trait = flamboyant_schemer
				trait = intricate_webweaver
				trait = elusive_shadow
			}
		}
		modifier = {
			factor = 3.0
			trait = schemer
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = seducer
				trait = seductress
			}
		}
		modifier = {
			factor = 1.5
			trait = impaler
		}
		modifier = {
			factor = 2.0
			trait = shrewd
		}
	}
	success = {
		hidden_tooltip = {
			OR = {
				AND = {
					has_character_flag = tier1
					trait = trained_rogue
				}
				AND = {
					has_character_flag = tier2
					trait = journeyman_rogue
				}
				AND = {
					has_character_flag = tier3
					trait = expert_rogue
				}
				AND = {
					has_character_flag = tier4
					trait = master_rogue
				}
				AND = {
					has_character_flag = tier5
					trait = renowned_rogue
				}
				AND = {
					has_character_flag = tier6
					trait = legendary_rogue
				}
			}
		}
		custom_tooltip = {
			text = GAIN_CLASS_LEVEL
		}
	}
	effect = {
		prestige = 50
		add_character_modifier = { name = class_cd years = 3 hidden = yes}
		clr_character_flag = tier1
		clr_character_flag = tier2
		clr_character_flag = tier3
		clr_character_flag = tier4
		clr_character_flag = tier5
		clr_character_flag = tier6
	}
	abort = {
		trait = incapable
	}
	abort_effect = {
		prestige = -10
	}
	creation_effect = {
		if = {
			limit = {
				NOT = {
					trait = rogue
					trait = trained_rogue
					trait = journeyman_rogue
					trait = expert_rogue
					trait = master_rogue
					trait = renowned_rogue
					trait = legendary_rogue
				}
			}
			add_trait = rogue
		}
		trigger_switch = {
			on_trigger = trait
			rogue = { set_character_flag = tier1 }
			trained_rogue = { set_character_flag = tier2 }
			journeyman_rogue = { set_character_flag = tier3 }
			expert_rogue = { set_character_flag = tier4 }
			master_rogue = { set_character_flag = tier5 }
			renowned_rogue = { set_character_flag = tier6 }
		}
		character_event = { id = tbxp.1 }
	}
}

obj_cls_shadow = {
	type = character
	
	allow = {
		is_adult = yes
		NOT = { trait = legendary_shadow }
		NOT = {
			z_bard = yes
			z_rogue = yes
		}
		NOR = {
			has_character_modifier = class_cd
			trait = incapable
		}
		NOR = {
			trait = dim
			trait = dumb
			trait = slow
			trait = idiot
			trait = imbecile
			trait = dull
			trait = inbred
		}
		intrigue = 5
	}
	chance = {
		factor = 40
		modifier = {
			factor = 0
			trait = stressed
		}
		modifier = {
			factor = 0.25
			trait = depressed
		}
		modifier = {
			factor = 2.0
			trait = diligent
		}
		modifier = {
			factor = 0.2
			trait = trusting
		}
		modifier = {
			factor = 0.8
			trait = content
		}
		modifier = {
			factor = 0.6
			trait = just
		}
		modifier = {
			factor = 2.0
			trait = ambitious
		}
		modifier = {
			factor = 2.0
			trait = paranoid
		}
		modifier = {
			factor = 3.0
			trait = deceitful
		}
		modifier = {
			factor = 2.0
			trait = arbitrary
		}
		modifier = {
			factor = 3.0
			OR = {
				trait = amateurish_plotter
				trait = flamboyant_schemer
				trait = intricate_webweaver
				trait = elusive_shadow
			}
		}
		modifier = {
			factor = 3.0
			trait = schemer
		}
		modifier = {
			factor = 2.0
			OR = {
				trait = seducer
				trait = seductress
			}
		}
		modifier = {
			factor = 1.5
			trait = impaler
		}
		modifier = {
			factor = 2.0
			trait = shrewd
		}
		modifier = {
			factor = 0.01
			NOT = { z_shadow = yes }
			z_has_class = yes
		}
	}
	success = {
		hidden_tooltip = {
			OR = {
				AND = {
					has_character_flag = tier1
					trait = trained_shadow
				}
				AND = {
					has_character_flag = tier2
					trait = journeyman_shadow
				}
				AND = {
					has_character_flag = tier3
					trait = expert_shadow
				}
				AND = {
					has_character_flag = tier4
					trait = master_shadow
				}
				AND = {
					has_character_flag = tier5
					trait = renowned_shadow
				}
				AND = {
					has_character_flag = tier6
					trait = legendary_shadow
				}
			}
		}
		custom_tooltip = {
			text = GAIN_CLASS_LEVEL
		}
	}
	effect = {
		prestige = 50
		add_character_modifier = { name = class_cd years = 3 hidden = yes}
		clr_character_flag = tier1
		clr_character_flag = tier2
		clr_character_flag = tier3
		clr_character_flag = tier4
		clr_character_flag = tier5
		clr_character_flag = tier6
	}
	abort = {
		trait = incapable
	}
	abort_effect = {
		prestige = -10
	}
	creation_effect = {
		if = {
			limit = {
				NOT = {
					trait = shadow
					trait = trained_shadow
					trait = journeyman_shadow
					trait = expert_shadow
					trait = master_shadow
					trait = renowned_shadow
					trait = legendary_shadow
				}
			}
			add_trait = shadow
		}
		trigger_switch = {
			on_trigger = trait
			shadow = { set_character_flag = tier1 }
			trained_shadow = { set_character_flag = tier2 }
			journeyman_shadow = { set_character_flag = tier3 }
			expert_shadow = { set_character_flag = tier4 }
			master_shadow = { set_character_flag = tier5 }
			renowned_shadow = { set_character_flag = tier6 }
		}
		character_event = { id = tbxp.1 }
	}
}

